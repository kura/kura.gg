<!DOCTYPE html><!--

                                      |
                                     /|
                                   ,' |
                                  .   |
                                    | |
                                 ' '| |
                                / / | |
       _,.-\"\"--._              / /  | |
     ,'          `.           j '   ' '
   ,'              `.         ||   / ,                         ___..--,
  /                  \\        ' `.'`.-.,-\".  .       _..---\"\"'' __, ,'
 /                    \\        \\` .\"`      `\"'\\   ,'\"_..--''\"\"\"'.'.'
.                      .      .'-'             \\,' ,'         ,','
|                      |      ,`               ' .`         .' /
|                      |     /          ,\"`.  ' `-. _____.-' .'
'                      |..---.|,\".      | | .  .-'\"\"   __.,-'
 .                   ,'       ||,|      |.' |    |\"\"`'\"
  `-._   `._.._____  |        || |      `._,'    |
      `.   .       `\".     ,'\"| \"  `'           ,+.
        \\  '         |    '   |   .....        .'  `.
         .'          '     7  \".              ,'     \\
                   ,'      |    `..        _,'      F
                  .        |,      `'----''         |
                  |      ,\"j  /                   | '
                  `     |  | .                 | `,'
                   .    |  `.|                 |/
                    `-..'   ,'                .'
                            | \\             ,''
                            |  `,'.      _,' /
                            |    | ^.  .'   /
                             `-'.' j` V    /
                                   |      /
                                   |     /
                                   |   ,'
                                    `\"\"

//--><html lang=en> <head><meta charset=utf-8><meta name=viewport content="width=device-width, initial-scale=1.0, minimum-scale=1.0"><link rel=alternate href=https://kura.gg hreflang=en><link rel=dns-prefetch href=https://kura.gg><link href=https://kura.gg/feeds/rss.xml type=application/rss+xml rel=alternate title=kura.gg><link href=https://kura.gg/feeds/atom.xml type=application/atom+xml rel=alternate title=kura.gg><meta property=og:site_name content=kura.gg><meta property=og:type content=article><meta property=og:title content=kura.gg><meta property=og:url content=https://kura.gg/category/tutorials/index.html><meta property=og:image content=https://kura.gg/category/tutorials/index.png><meta property=og:image:width content=1920><meta property=og:image:height content=1080><meta property=twitter:title content=kura.gg><meta property=twitter:url content=https://kura.gg/category/tutorials/index.html><meta property=twitter:image content=https://kura.gg/category/tutorials/index.png><meta property=twitter:card content=summary_large_image><meta property=twitter:image:width content=1920><meta property=twitter:image:height content=1080><link rel=icon href=/favicon.png type=image/png sizes="16x16 32x32 48x48 64x64 128x128 256x256"><link rel=icon href=/favicon.ico type=image/vnd.microsoft.icon sizes="16x16 32x32 48x48 64x64 128x128 256x256"><title>Articles in the 'tutorials' category</title></head> <body> <div class="eevee-layout mdl-layout mdl-js-layout mdl-color--grey-50"> <header class="eevee-header mdl-color--grey-50 mdl-color-text--grey-800" itemscope itemtype=http://schema.org/WPHeader> <div class=mdl-layout__header-row> <div aria-expanded=false role=button tabindex=0 class="mdl-layout__drawer-button mdl-color-text--accent eevee-mobile-button mdl-layout--small-screen-only"> <i class=material-icons>&#xE5D2;</i> </div> <span class="eevee-logo mdl-color-text--accent mdl-layout-title"> <h2 id=top> <a href=https://kura.gg rel=bookmark title=kura.gg> kura.gg </a> </h2> </span> <div class=mdl-layout-spacer role=presentation></div> <nav class="eevee-nav mdl-navigation mdl-layout--large-screen-only" itemscope itemtype=http://schema.org/SiteNavigationElement aria-label="Header navigation"> <a class="mdl-color-text--accent mdl-navigation__link" href=/eevee/ itemprop=url rel=bookmark title=Eevee> <i class=material-icons aria-hidden=true>&#xE871;</i> Eevee </a> <a class="mdl-color-text--accent mdl-navigation__link" href=/contact/ itemprop=url rel=bookmark title=Contact> <i class=material-icons aria-hidden=true>&#xE0B7;</i> Contact </a> <a class="mdl-color-text--accent mdl-navigation__link" href=/software/ itemprop=url rel=bookmark title=Software> <i class=material-icons aria-hidden=true>&#xE86F;</i> Software </a> <a class="mdl-color-text--accent mdl-navigation__link" href=https://kura.gg/archives/ itemprop=url rel=bookmark title=Archives> <i class=material-icons>&#xE02F;</i> Archives </a> <a class="mdl-color-text--accent mdl-navigation__link" href=https://kura.gg/feeds/rss.xml title=RSS itemprop=url> <i class=material-icons>&#xE0E5;</i> RSS </a> </nav> </div> </header> <div class="eevee-mobile-header mdl-layout__drawer mdl-color--white" aria-hidden=true> <span class=mdl-layout-title> <h2 class="eevee-mobile-logo mdl-color-text--accent"> kura.gg </h2> </span> <div class="mdl-navigation mdl-color--white"> <nav class="eevee-nav mdl-navigation" itemscope itemtype=http://schema.org/SiteNavigationElement aria-label="Header navigation"> <a class="mdl-color-text--accent mdl-navigation__link" href=https://kura.gg itemprop=url rel=bookmark> <i class=material-icons aria-hidden=true> &#xE88A; </i> Home </a> <a class="mdl-color-text--accent mdl-navigation__link" href=/eevee/ itemprop=url rel=bookmark title=Eevee> <i class=material-icons aria-hidden=true>&#xE871;</i> Eevee </a> <a class="mdl-color-text--accent mdl-navigation__link" href=/contact/ itemprop=url rel=bookmark title=Contact> <i class=material-icons aria-hidden=true>&#xE0B7;</i> Contact </a> <a class="mdl-color-text--accent mdl-navigation__link" href=/software/ itemprop=url rel=bookmark title=Software> <i class=material-icons aria-hidden=true>&#xE86F;</i> Software </a> <a class="mdl-color-text--accent mdl-navigation__link" href=https://kura.gg/archives/ itemprop=url rel=bookmark title=Archives> <i class=material-icons>&#xE02F;</i> Archives </a> <a class="mdl-color-text--accent mdl-navigation__link" href=https://kura.gg/feeds/rss.xml title=RSS itemprop=url> <i class=material-icons>&#xE0E5;</i> RSS </a> </nav> </div> </div> <div class="eevee-ribbon mdl-color--primary-dark" role=presentation> </div> <main class="eevee-main mdl-layout__content"> <div class="eevee-container mdl-grid"> <div role=presentation class="mdl-cell mdl-cell--2-col mdl-cell--hide-tablet mdl-cell--hide-phone"> </div> <div class="eevee-content mdl-color--white mdl-shadow--2dp mdl-color-text--grey-800 mdl-cell mdl-cell--8-col" aria-label="Main content"> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=dnssec,dns,sshfp,ssh> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2015-10-18T03:30:00+01:00 itemprop=datePublished> 18 Oct 2015 </time>&nbsp;-- 2 min read </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2015/10/18/sshfp-dns-records/ rel=bookmark title="Permalink to 'SSHFP DNS records'" itemprop=url> <span class=caps>SSHFP</span> <span class=caps>DNS</span>&nbsp;records </a> </h2> <section itemprop=articleBody class=summary-content> <p><a class="reference external" href=https://tools.ietf.org/html/rfc4255><span class=caps>SSHFP</span></a> records are a defense against people blindly typing ‘yes’ when asked if they want to continue connecting to an <span class=caps>SSH</span> host who’s authenticity is unknown.</p> <div class=highlight><pre><span></span>$ ssh some.host.tld
The authenticity of host 'some.host.tld (123.456.789.10)' can't be established.
ED25519 key fingerprint is 69:76:51:39:a4:c6:de:15:7c:50:4b:4a:a7:98:40:5e.
Are you sure you want to continue connecting (yes/no)?
</pre></div> <p>This prompt is likely to be extremely familiar to you and, most people seem to just type ‘yes’ to move on with their lives, which defeats the whole purpose of this prompt.</p> <p>If you use <span class=caps>DNSSEC</span> you can bypass this prompt entirely by publishing your server’s key fingerprints via <span class=caps>DNS</span> and having <span class=caps>SSH</span> authenticate them for you.</p> <div class=section id=generating-your-sshfp-record> <h2>Generating your <span class=caps>SSHFP</span> record</h2> <p>You can get <span class=caps>SSH</span> to generate the <span class=caps>DNS</span> records for you, log in …</p></div> </section> <div class="eevee-divider mdl-color--accent" role=presentation></div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content="dnssec,dns,rage4. name.com"> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2015-10-18T03:10:00+01:00 itemprop=datePublished> 18 Oct 2015 </time>&nbsp;-- 1 min read </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2015/10/18/dnssec-with-rage4-and-name.com/ rel=bookmark title="Permalink to 'DNSSEC with Rage4 and name.com'" itemprop=url> <span class=caps>DNSSEC</span> with Rage4 and&nbsp;name.com </a> </h2> <section itemprop=articleBody class=summary-content> <p>I currently use <a href=https://www.name.com/ class="reference external">name.com</a> as my registrar and I use <a href=https://rage4.com/ class="reference external">Rage4</a> because Rage4 are awesome, they also support <span class=caps>TLSA</span> and <span class=caps>SSHFP</span> records and of course, <span class=caps>DNSSEC</span>.</p> <p>I’m writing this up because I found getting <span class=caps>DNSSEC</span> from Rage4 to work with name.com as my registrar was a pain and the name.com support were not very helpful, linking me to a support article that I’d already read and did not help at all.</p> <div class=section id=rage4-1> <h2>Rage4</h2> <p>I’m going to assume you’ve already got your records in Rage4, if not, the interface is really easy so you’ll figure it out.</p> <p>Within the management section for your domain’s zone, there is a menu bar of icons, the icon pictured below enabled <span class=caps>DNSSEC</span>.</p> <img alt="Enabled DNSSEC" src=/images/rage4-dnssec-icon.png> <p>Clicking this will turn on <span class=caps>DNSSEC</span>. You will then have a new icon that will allow you to display your <span class=caps>DNSSEC</span> information.</p> <img alt="Display DNSSEC info" src=/images/rage4-dnssec-info-icon.png> <p>Clicking this icon …</p></div> </section> <div class="eevee-divider mdl-color--accent" role=presentation></div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content="haproxy,http,tls,ssl,hpkp,public key pinning"> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2015-01-27T07:04:00+00:00 itemprop=datePublished> 27 Jan 2015 </time>&nbsp;-- 3 min read </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2015/01/27/hpkp-http-public-key-pinning-with-haproxy/ rel=bookmark title="Permalink to 'HPKP: HTTP Public Key Pinning with HAProxy'" itemprop=url> <span class=caps>HPKP</span>: <span class=caps>HTTP</span> Public Key Pinning with&nbsp;HAProxy </a> </h2> <section itemprop=articleBody class=summary-content> <p>Public Key Pinning is a security feature that tells a web browser to associate a public cryptographic key with a server or servers. When a web browser visits a website for the first time, it will read the <span class=caps>HPKP</span> header and store the hashes for the certificates that are provided. Each time the browser then revisits that website, the hash from the provided public key is compared against the stored keys, if the hashes do not match, the web browser should display a warning.</p> <p>The <span class=caps>HPKP</span> header adds protection against man-in-the-middle (<span class=caps>MITM</span>) attacks but, if incorrectly configured can make your website display a <span class=caps>TLS</span> error for a long period of time.</p> <p>Here’s a look at what this website publishes as it’s <span class=caps>HKPK</span> header.</p> <pre class=literal-block>
Public-Key-Pins: pin-sha256="cYf9T3Il8DaCnaMaM0LatIAru1vqmcu2JSwS7uvyEB0=";
                 pin-sha256="u2q8QZ8Hjp3o/efZjsch9NKjnZmrISJQjwoi/rmsKLU=";
                 max-age=15768000; includeSubDomains
</pre> <p>To explain it, the first <cite>pin-sha265</cite> key is the hash of the public key that …</p> </section> <div class="eevee-divider mdl-color--accent" role=presentation></div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=debian,wheezy,postfix,dovecot,mail,encrypted> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2015-01-26T21:25:00+00:00 itemprop=datePublished> 26 Jan 2015 </time>&nbsp;-- 3 min read </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2015/01/26/debian-wheezy-encrypted-maildir-using-encfs/ rel=bookmark title="Permalink to 'Debian Wheezy encrypted Maildir using encfs'" itemprop=url> Debian Wheezy encrypted Maildir using&nbsp;encfs </a> </h2> <section itemprop=articleBody class=summary-content> <p>This is really a follow up article to <a href=/debian-wheezy-tls-mailserver-with-mysql-clamav-domainkeys-dkim-spf-solr-imap-search/ class="reference external">one I wrote earlier this year</a> but is really applicable to any similar set-up, with some modifications. The only configuration similarity this requires is that mail for all users is stored on the filesystem in the same place, rather than to separate locations i.e. each user having ~/.Maildir.</p> <div class=section id=encfs> <h2><a class=toc-backref href=#toc-entry-1>EncFS</a></h2> <div class=highlight><pre><span></span>sudo apt-get install encfs
</pre></div> <p>Once installed, you’ll need to make a directory for encrypted and decrypted mail to live.</p> <div class=highlight><pre><span></span>sudo mkdir /var/mail/encrypted /var/mail/decrypted
</pre></div> <p>You’ll need to set up permissions so your mail user can access the fuse device and the new directories.</p> <p>For me, this user and group are called <em>vmail</em> but yours may be different.</p> <div class=highlight><pre><span></span>sudo chgrp mail /var/mail/decrypted
sudo g+rw /var/mail/decrypted
sudo usermod -a -g fuse vmail
sudo chgrp fuse /dev/fuse
sudo chmod g+rw /dev/fuse
</pre></div> <p>Next …</p></div> </section> <div class="eevee-divider mdl-color--accent" role=presentation></div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=postfix,smtp> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2015-01-20T23:38:00+00:00 itemprop=datePublished> 20 Jan 2015 </time>&nbsp;-- < 1 min read </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2015/01/20/block-yourself-from-emailing-someone-using-postfix/ rel=bookmark title="Permalink to 'Block yourself from emailing someone using Postfix'" itemprop=url> Block yourself from emailing someone using&nbsp;Postfix </a> </h2> <section itemprop=articleBody class=summary-content> <p>I think most of us have been in a position where we really shouldn’t continue communicating with someone or contact that person when drunk… You know what I mean, ex relationships etc (it happens.)</p> <p>With Postfix you can block yourself from emailing that person again, which is quite useful.</p> <p>In <cite>/etc/postfix/main.cf</cite> add make the start of your <cite>smtpd_recipient_restrictions</cite> look like below.</p> <div class=highlight><pre><span></span>smtpd_recipient_restrictions =
    check_recipient_access hash:/etc/postfix/recipient_access,
</pre></div> <p>Create a new file <cite>/etc/postfix/recipient_access</cite> and add the email address you wish to block, the word <cite><span class=caps>REJECT</span></cite> in capitals and optionally; a reason. Example below.</p> <div class=highlight><pre><span></span>test@example.com REJECT Don't be silly... You're probably drunk.
</pre></div> <p>For every address you wish to block yourself from emailing, simply add them on a new line.</p> <p>You can see the email is blocked from being sent in <cite>/var/log/mail.log</cite>.</p> <div class=highlight><pre><span></span>NOQUEUE: reject …</pre></div> </section> <div class="eevee-divider mdl-color--accent" role=presentation></div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=debian,wheezy,postfix,dovecot,clamav,domainkeys,dkim,spf,imap> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2015-01-03T19:48:00+00:00 itemprop=datePublished> 03 Jan 2015 </time>&nbsp;-- 9 min read </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2015/01/03/debian-wheezy-tls-mailserver-with-mysql-clamav-domainkeys-dkim-spf-solr-imap-search/ rel=bookmark title="Permalink to 'Debian Wheezy TLS mailserver with MySQL, ClamAV, DomainKeys, DKIM, SPF and Solr-powered IMAP SEARCH'" itemprop=url> Debian Wheezy <span class=caps>TLS</span> mailserver with MySQL, ClamAV, DomainKeys, <span class=caps>DKIM</span>, <span class=caps>SPF</span> and Solr-powered <span class=caps>IMAP</span> <span class=caps>SEARCH</span> </a> </h2> <section itemprop=articleBody class=summary-content> <p>This mail platform does use a fair amount of memory, the memory usage is ClamAV and Solr, the latter being used for <span class=caps>IMAP</span> <span class=caps>SEARCH</span>. I personally use 2 <span class=caps>GB</span>.</p> <p>I’ll warn you all now, this is a long article.</p> <div class=section id=ssl> <h2><a class=toc-backref href=#toc-entry-1><span class=caps>SSL</span></a></h2> <div class=highlight><pre><span></span>sudo openssl genrsa -out /etc/ssl/private/mail.key 4096
sudo openssl req -new -key /etc/ssl/private/mail.key -out /tmp/mail.csr
sudo openssl x509 -req -days 365 -in /tmp/mail.csr -signkey /etc/ssl/private/mail.key -out /etc/ssl/certs/mail.crt
</pre></div> </div> <div class=section id=mysql> <h2><a class=toc-backref href=#toc-entry-2>MySQL</a></h2> <div class=highlight><pre><span></span>sudo apt-get install mysql-server
</pre></div> <p>You’ll be prompted several times for a password for MySQL during the installation, just come up with something nice and secure.</p> <p>The first thing to set-up will be the MySQL database and schema.</p> <div class=highlight><pre><span></span>mysql -u root -p
</pre></div> <p>Next up, create the database.</p> <div class=highlight><pre><span></span>CREATE DATABASE mailserver CHARACTER SET utf8 COLLATE utf8_general_ci;
</pre></div> <p>And grant some privileges, you …</p></div> </section> <div class="eevee-divider mdl-color--accent" role=presentation></div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content="haproxy,ssl,ocsp,ocsp stapling"> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2014-07-02T23:45:00+01:00 itemprop=datePublished> 02 Jul 2014 </time>&nbsp;-- 2 min read </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2014/07/02/haproxy-ocsp-stapling/ rel=bookmark title="Permalink to 'haproxy OCSP stapling'" itemprop=url> haproxy <span class=caps>OCSP</span>&nbsp;stapling </a> </h2> <section itemprop=articleBody class=summary-content> <p>With haproxy 1.5 finally being released we are lucky enough to get a basic interface around <span class=caps>OCSP</span> stapling.</p> <p>Sadly this interface really is quite basic and it’s not the simplest thing to figure out without some trial and error.</p> <p>According to the official documentation, you should be able to pipe your <span class=caps>OCSP</span> response to haproxy via it’s stats socket. Sadly I could not get this to work properly at all, so I decided to swap the piping for a file and reload solution.</p> <p>You’ll need to get a copy of your certification authorities root certificate to proceed with this.</p> <div class=section id=looking-for-your-ocsp-uri> <h2>Looking for your <span class=caps>OCSP</span> <span class=caps>URI</span></h2> <p>If you don’t know the <span class=caps>URI</span> you need to do an <span class=caps>OCSP</span> lookup against, you can find it in your certificate data.</p> <div class=highlight><pre><span></span>openssl x509 -in /path/to/your/certificate -text
</pre></div> <p>Inside the output, look for the following section.</p> <pre class=literal-block>
Authority Information Access …</pre></div> </section> <div class="eevee-divider mdl-color--accent" role=presentation></div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=haproxy,ssl> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2014-02-22T05:10:00+00:00 itemprop=datePublished> 22 Feb 2014 </time>&nbsp;-- < 1 min read </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2014/02/22/haproxy-stateful-ssl-session-resumption/ rel=bookmark title="Permalink to 'haproxy stateful SSL session resumption'" itemprop=url> haproxy stateful <span class=caps>SSL</span> session&nbsp;resumption </a> </h2> <section itemprop=articleBody class=summary-content> <p>By default haproxy enables stateless <span class=caps>SSL</span> session resumption, but you can enable stateful session resumption in accordance with <a class="reference external" href=https://www.ietf.org/rfc/rfc5077.txt><span class=caps>RFC</span> 5077</a>. This functionality, like the <span class=caps>SSL</span> handling it relies on is only available from haproxy 1.5.</p> <div class=section id=configuration> <h2>Configuration</h2> <p>The option to enable stateful <span class=caps>SSL</span> session resumption is as below</p> <pre class=literal-block>
no-tls-tickets
</pre> <p>You will need to add it in to your bind line, like below</p> <pre class=literal-block>
bind 0.0.0.0:443 ssl ... no-tls-tickets
</pre> </div> </section> <div class="eevee-divider mdl-color--accent" role=presentation></div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=ssl> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2014-02-02T15:18:00+00:00 itemprop=datePublished> 02 Feb 2014 </time>&nbsp;-- 2 min read </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2014/02/02/kura.gg-a-star-ssl-rating/ rel=bookmark title="Permalink to 'kura.gg’s A* SSL rating'" itemprop=url> kura.gg&#8217;s A* <span class=caps>SSL</span>&nbsp;rating </a> </h2> <section itemprop=articleBody class=summary-content> <p>I am a firm believer in using <span class=caps>SSL</span> as much as possible, for me that is pretty much everywhere and, thanks to the wonderful guys at <a href=https://www.globalsign.com/ class="reference external">GlobalSign</a>, most of my <span class=caps>SSL</span> certificates are free becauses my projects are all open source.</p> <p>I used a blog post by <a href=https://hynek.me/articles/hardening-your-web-servers-ssl-ciphers/ class="reference external">Hynek Schlawack</a> as a base for my <span class=caps>SSL</span> setup, he is keeping this article up-to-date as much as possible so it should be a great source for any security conscious people that would like to know more and get good explanations about each part.</p> <p>Let’s take a brief look at how this website achieves it’s A* rating.</p> <div class=section id=key> <h2>Key</h2> <p>I use a 4096 bit <span class=caps>RSA</span> key that is no a <a class="reference external" href=https://wiki.debian.org/SSLkeys#Identifying_Weak_Keys>Debian weak key</a>.</p> </div> <div class=section id=protcols> <h2>Protcols</h2> <p>I do not support SSLv2 or SSLv3 but I do support much stronger protocols;</p> <ul class=simple> <li><span class=caps>TLS</span> 1.2,</li> <li><span class=caps>TLS</span> 1.1 and,</li> <li><span class=caps>TLS</span> 1.0.</li> </ul> </div> <div class=section id=dhparam> <h2>dhparam</h2> <p>It’s a …</p></div> </section> <div class="eevee-divider mdl-color--accent" role=presentation></div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=haproxy,npn,spdy,http/1.1> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2014-01-31T15:25:00+00:00 itemprop=datePublished> 31 Jan 2014 </time>&nbsp;-- < 1 min read </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2014/01/31/advertise-multiple-npn-protocols-with-haproxy/ rel=bookmark title="Permalink to 'Advertise multiple NPN protocols with haproxy'" itemprop=url> Advertise multiple <span class=caps>NPN</span> protocols with&nbsp;haproxy </a> </h2> <section itemprop=articleBody class=summary-content> <p>I have previously written an article on <a href=/2013/07/15/haproxy-nginx-and-spdy-with-ssl-termination-debian-7/ class="reference external">using <span class=caps>SPDY</span> with haproxy</a> but have been spending some time recently being annoyed that the <a class="reference external" href=https://spdycheck.org/#kura.gg><span class=caps>SPDY</span> check tool</a> said I didn’t advertise a fall back to <span class=caps>HTTP</span> over <span class=caps>SSL</span> in the <span class=caps>NPN</span> protocol list.</p> <p>After some digging I discovered it was actually quite simple to advertise multiple protocols using npn and haproxy.</p> <p>Previously my article called for using the following section of configuration at the end of the bind line.</p> <div class=highlight><pre><span></span>npn spdy/2
</pre></div> <p>To advertise <span class=caps>HTTP</span> protocols as well as <span class=caps>SPDY</span> you simply need to add them to the npn list, using commas as a delimiter.</p> <div class=highlight><pre><span></span>npn spdy/2,http/1.1
</pre></div> </section> <div class="eevee-divider mdl-color--accent" role=presentation></div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=haproxy,stats> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2013-07-19T13:00:00+01:00 itemprop=datePublished> 19 Jul 2013 </time>&nbsp;-- < 1 min read </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2013/07/19/haproxy-stats/ rel=bookmark title="Permalink to 'haproxy stats'" itemprop=url> haproxy&nbsp;stats </a> </h2> <section itemprop=articleBody class=summary-content> <p>I recently wrote an article on <a href=/2013/07/15/haproxy-nginx-and-spdy-with-ssl-termination-debian-7/ class="reference external">using haproxy, <span class=caps>SSL</span> and <span class=caps>SPDY</span> with nginx backend servers</a>.</p> <p>This article is a little extra on top of that to explain how to enable statistics for haproxy so you can monitor the backend statuses etc.</p> <div class=section id=example-stats-page> <h2>Example stats page</h2> <img alt="Moar stats!" src=/images/haproxy-stats.png> </div> <div class=section id=enabling-stats> <h2>Enabling stats</h2> <pre class=literal-block>
listen stats :8000
    mode http
    stats enable
    stats hide-version
    stats realm haproxy\ stats
    stats uri /
    stats auth admin:admin
</pre> <p>Place the above content in the haproxy configuration file (<em>/etc/haproxy/haproxy.cfg</em>).</p> <p>Be sure to replace <em>admin:admin</em> with your a proper username and password, username first, password after the colon.</p> <p>Restart haproxy, and then browse to <a class="reference external" href=https://yoursite.com:8000>https://yousite.com:8000</a>.</p> </div> </section> <div class="eevee-divider mdl-color--accent" role=presentation></div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content="debian,ubuntu,haproxy,nginx,spdy,ssl,ssl termination"> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2013-07-15T22:30:00+01:00 itemprop=datePublished> 15 Jul 2013 </time>&nbsp;-- 5 min read </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2013/07/15/haproxy-nginx-and-spdy-with-ssl-termination-debian-7/ rel=bookmark title="Permalink to 'haproxy, nginx and SPDY with SSL termination (Debian 7)'" itemprop=url> haproxy, nginx and <span class=caps>SPDY</span> with <span class=caps>SSL</span> termination (Debian&nbsp;7) </a> </h2> <section itemprop=articleBody class=summary-content> <p><a href=/2013/07/10/nginx-spdy-and-ngx-pagespeed/ class="reference external">I wrote an article last week</a> explaining that I had changed my blog and built my own nginx packages with <a class="reference external" href=https://www.chromium.org/spdy><span class=caps>SPDY</span></a> built in.</p> <p>I decided I would take things a little further and poke around with haproxy some more. The initial plan was to compile the latest dev source of haproxy with <span class=caps>SSL</span> termination enabled.</p> <p>In doing so I realised I would lose <span class=caps>SPDY</span> support, which upset me a little. After some digging I found that the 1.5-dev branch of haproxy supports npn and thus can handle <span class=caps>SPDY</span>.</p> <p>I tweaked my builds a little more and managed to get haproxy running as an <span class=caps>SSL</span> terminating load balancer, with <span class=caps>SPDY</span> connections being sent off to my nginx servers with <span class=caps>SPDY</span> enabled and all other non-<span class=caps>SPDY</span> connections were passed on to an nginx virtual host with <span class=caps>SPDY</span> disabled.</p> <div class=section id=requirements> <h2>Requirements</h2> <p>I have released my haproxy build as a debian file below …</p></div> </section> <div class="eevee-divider mdl-color--accent" role=presentation></div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=debian,ubuntu,nginx,spdy,pagespeed,ngx_pagespeed,mod_pagespeed> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2013-07-10T22:30:00+01:00 itemprop=datePublished> 10 Jul 2013 </time>&nbsp;-- 2 min read </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2013/07/10/nginx-spdy-and-ngx-pagespeed/ rel=bookmark title="Permalink to 'nginx, SPDY and ngx_pagespeed (Debian/Ubuntu)'" itemprop=url> nginx, <span class=caps>SPDY</span> and ngx_pagespeed&nbsp;(Debian/Ubuntu) </a> </h2> <section itemprop=articleBody class=summary-content> <p>I decided to rebuild syslog.tv as pure <span class=caps>HTML</span> using <span class=caps>RST</span> and <a href=https://blog.getpelican.com/ class="reference external">Pelican</a> and rebrand it as kura.gg.</p> <p>In doing so I decided I would go all out and use <a class="reference external" href=https://www.chromium.org/spdy><span class=caps>SPDY</span></a> and <a class="reference external" href=https://nginx.org/en/docs/http/ngx_http_spdy_module.html>ngx_pagespeed</a> (<a href=https://developers.google.com/speed/ class="reference external">mod_pagespeed</a>) for fun to see exactly what I could do.</p> <p>Sadly no version of nginx has been officially released with <span class=caps>SPDY</span> or ngx_pagespeed enabled, you can compile nginx from source to enable <span class=caps>SPDY</span> so I thought I would go ahead and do it, releasing some Debian packages in the process.</p> <p>After compiling nginx from the source package available at the <a class="reference external" href=https://launchpad.net/~nginx>Ubuntu <span class=caps>PPA</span></a>, I decided I would go further and compile in ngx_pagespeed.</p> <div class=section id=installing> <h2>Installing</h2> <p>I have released the 4 required debian packages below (please note they are only available for amd64);</p> <table class=docutils> <thead> <tr><th class=head><span class=caps>FILE</span></th> <th class=head><span class=caps>GPG</span></th> <th class=head><span class=caps>MD5</span></th> <th class=head><span class=caps>SHA1</span></th> </tr> </thead> <tbody> <tr><td><a class="reference external" href=/files/nginx_1.4.1_all.deb>nginx_1.4.1_all.deb</a></td> <td><a class="reference external" href=/files/nginx_1.4.1_all.deb.asc>owGMl1NwLw…</a></td> <td><a class="reference external" href=/files/nginx_1.4.1_all.deb.md5>42f790a1f6…</a></td> <td><a class="reference external" href=/files/nginx_1.4.1_all.deb.sha1>f4495055e9…</a></td> </tr> <tr><td><a class="reference external" href=/files/nginx-common_1.4.1_all.deb>nginx-common_1.4.1_all.deb</a></td> <td><a class="reference external" href=/files/nginx-common_1.4.1_all.deb.asc>owGMt1NwJU…</a></td> <td><a class="reference external" href=/files/nginx-common_1.4.1_all.deb.md5>ca4ec5688d…</a></td> <td><a class="reference external" href=/files/nginx-common_1.4.1_all.deb.sha1>633bfc2eaa …</a></td></tr></tbody></table></div> </section> <div class="eevee-divider mdl-color--accent" role=presentation></div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content="autocompletion,bash,port forwarding"> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2013-03-12T18:00:00+00:00 itemprop=datePublished> 12 Mar 2013 </time>&nbsp;-- < 1 min read </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2013/03/12/bash-portforwarding-with-autocompletion/ rel=bookmark title="Permalink to 'Bash portforwarding with autocompletion'" itemprop=url> Bash portforwarding with&nbsp;autocompletion </a> </h2> <section itemprop=articleBody class=summary-content> <p>I spend a <span class=caps>LOT</span> of time with tunnels open to multiple machines, connecting directly to PostgreSQL, RabbitMQ and many other services all via <span class=caps>SSH</span>.</p> <p>I have written several helper functions and this is the final version that I created in a small competition with <a class="reference external" href=https://twitter.com/codeinthehole>@codeinthehole.</a></p> <div class=gist> <script src=https://gist.github.com/5065819.js></script> </div> <div class=section id=installation> <h2>Installation</h2> <p>Simply add the contents to <em>~/.bashrc</em></p> </div> <div class=section id=usage> <h2>Usage</h2> <p>Usage is pretty simply, just called portforward from the command line, pressing &lt;<span class=caps>TAB</span>&gt; as you type in a server name from your ~/.ssh/config file and the same with the port.</p> <div class=highlight><pre><span></span>portforward sy&lt;TAB&gt;
</pre></div> <p>Will become:</p> <div class=highlight><pre><span></span>portforward syslog.tv
</pre></div> <p>And finally</p> <div class=highlight><pre><span></span>portforward syslog.tv <span class=m>15672</span>
</pre></div> </div> </section> <div class="eevee-divider mdl-color--accent" role=presentation></div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=denyhosts,unban> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2012-11-13T17:45:00+00:00 itemprop=datePublished> 13 Nov 2012 </time>&nbsp;-- < 1 min read </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2012/11/13/unbanning-an-ip-a-block-of-ips-or-a-block-of-ips-from-denyhost/ rel=bookmark title="Permalink to 'Unbanning an IP, multiple IPs or a block of IPs from DenyHost'" itemprop=url> Unbanning an <span class=caps>IP</span>, multiple IPs or a block of IPs from&nbsp;DenyHost </a> </h2> <section itemprop=articleBody class=summary-content> <p>I wrote this little Python program a while ago and now people are starting to email me about it, asking for it to be part of the DenyHosts Debian packages so I figured I’d write a quick article on it.</p> <p>If you’re like my developers, you’ll find yourself getting banned from servers all the time and have to come speak to someone like me (your sys engineer/admin), or maybe you are an admin and are sick of people banning themselves and want and easy way to unban them.</p> <p>So give this a try:</p> <p><a class="reference external" href=https://github.com/kura/denyhosts-unban>https://github.com/kura/denyhosts-unban</a></p> <p>From the GitHub page you can download either the tarballs, zipballs or a Debian .deb package. Install it using the instructions in the <span class=caps>README</span> and you’re good to go.</p> <div class=section id=unban> <h2>Unban</h2> <p>Unbanning is simple, you can either unban a single <span class=caps>IP</span> using:</p> <div class=highlight><pre><span></span>sudo denyhosts-unban <span class=m>10</span>.0.0.1 …</pre></div></div> </section> <div class="eevee-divider mdl-color--accent" role=presentation></div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2012-11-08T11:47:00+00:00 itemprop=datePublished> 08 Nov 2012 </time>&nbsp;-- 1 min read </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2012/11/08/java-6-on-ubuntu-12-04-including-tomcat-6/ rel=bookmark title="Permalink to 'Java 6 on Ubuntu 12.04 (including Tomcat 6)'" itemprop=url> Java 6 on Ubuntu 12.04 (including Tomcat&nbsp;6) </a> </h2> <section itemprop=articleBody class=summary-content> <p>If like me you run in to issue when using OpenJDK, my issues come from it’s memory problems when you’re allocating and using large amounts of memory - mostly for Solr where we’re concerned but obviously I’d switch for other high memory usage instances too.</p> <p>So without further ado, lets get the installation going.</p> <p>You’ll need Debian’s “add-apt-repository”, on servers this doesn’t usually come by default so we’ll need to install it.</p> <div class=highlight><pre><span></span>sudo apt-get install python-software-properties
</pre></div> <p>Next we need to add Java’s <span class=caps>PPA</span>.</p> <div class=highlight><pre><span></span>sudo add-apt-repository ppa:sun-java-community-team/sun-java6
</pre></div> <p>Once this is done we’ll need to update our apt caches and install Java 6.</p> <div class=highlight><pre><span></span>sudo apt-get install sun-java6-jdk
</pre></div> <p>Now that this is installed we should get the Java version, remember it for future.</p> <div class=highlight><pre><span></span>java -version
</pre></div> <p>You’ll get something like this</p> <div class=highlight><pre><span></span>java version <span class=s2>"1.6.0_20"</span> OpenJDK Runtime Environment <span class=o>(</span>IcedTea6 <span class=m>1 …</span></pre></div> </section> <div class="eevee-divider mdl-color--accent" role=presentation></div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=/etc/shadow,mkpasswd,password,sha-512,sha512> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2012-10-11T09:56:00+01:00 itemprop=datePublished> 11 Oct 2012 </time>&nbsp;-- < 1 min read </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2012/10/11/how-to-generate-an-etcshadow-compatible-password/ rel=bookmark title="Permalink to 'How to generate an /etc/shadow compatible password'" itemprop=url> How to generate an /etc/shadow compatible&nbsp;password </a> </h2> <section itemprop=articleBody class=summary-content> <p>You’ll need mkpasswd, on Debian 6 and Ubuntu 12.04 you can install this using:</p> <div class=highlight><pre><span></span>sudo apt-get install whois
</pre></div> <p>It is pretty weird that it comes with the whois package though…</p> <p>And then run</p> <div class=highlight><pre><span></span>mkpasswd -m sha-512
</pre></div> </section> <div class="eevee-divider mdl-color--accent" role=presentation></div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=blackhole,blackhole.io,email,mail> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2012-06-26T23:05:00+01:00 itemprop=datePublished> 26 Jun 2012 </time>&nbsp;-- 3 min read </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2012/06/26/send-all-email-to-a-blackhole-never-gets-delivered-test-delivery-speed-and-much-more-using-blackhole-io/ rel=bookmark title="Permalink to 'Send all email to a blackhole (never gets delivered), test delivery speed and much more using blackhole.io'" itemprop=url> Send all email to a blackhole (never gets delivered), test delivery speed and much more using&nbsp;blackhole.io </a> </h2> <section itemprop=articleBody class=summary-content> <p>I have built and released an open-source email server in the past for testing send rates and speeds, this project was called SimpleMTA and is available <a href=https://syslog.tv/simplemta/ class="reference external">here</a>.</p> <p>Recently I have rebuilt this project for an internal project at work using the <a href=https://www.tornadoweb.org/ class="reference external">Tornado framework</a>. Sadly this project as a whole cannot be released but a version of this code will be released in the near future.</p> <p>Until that is released I have launched a new service called <a class="reference external" href=https://blackhole.io>blackhole.io</a></p> <div class=section id=what-is-blackhole-io> <h2>What is blackhole.io?</h2> <p>blackhole.io is a completely open mail relay that forgets anything that is sent to it, meaning there is no auth requirements and no storage of email data within the service. Literally anyone can send anything to it and have it never get delivered.</p> <p>You can even send commands out of order, meaning you can call the <span class=caps>DATA</span> command without ever using <span class=caps>HELO</span>, <span class=caps>MAIL</span> <span class=caps>FROM</span> or <span class=caps>RCPT</span> <span class=caps>TO …</span></p></div> </section> <div class="eevee-divider mdl-color--accent" role=presentation></div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=aws,fstab,fuse,mount,s3,s3fs> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2012-03-03T16:05:00+00:00 itemprop=datePublished> 03 Mar 2012 </time>&nbsp;-- 3 min read </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2012/03/03/mount-amazon-s3-bucket-locally/ rel=bookmark title="Permalink to 'Mount Amazon S3 bucket locally on Debian 5 & 6/Ubuntu 10.04'" itemprop=url> Mount Amazon S3 bucket locally on Debian 5 <span class=amp>&amp;</span> 6/Ubuntu&nbsp;10.04 </a> </h2> <section itemprop=articleBody class=summary-content> <p>I’ve recently been toying with my <a href=https://rpi.syslog.tv/ class="reference external">Raspberry Pi mirror</a> including moving it out on to Amazon’s S3. I’ve written an article on <a href=https://syslog.tv/2012/02/29/backup-a-linux-server-to-amazon-s3-on-debian-6ubuntu-10-04/ class="reference external">how to back up to S3</a>, but that isn’t enough when it comes to serving data from S3.</p> <p>I needed the ability to <span class=caps>RSYNC</span> data from the official Raspberry Pi servers on to mine and then in to S3 and for that I used <a href=https://code.google.com/p/s3fs/ class="reference external">s3fs</a> and <a href=https://fuse.sourceforge.net/ class="reference external"><span class=caps>FUSE</span></a>.</p> <div class=section id=fuse-1> <h2><span class=caps>FUSE</span></h2> <p>You can actually do this successfully without requiring <span class=caps>FUSE</span>, just by installing the s3fs binary on to your system, but this only allows the user who mounted to access the mounted bucket and also is not possible via /etc/fstab.</p> <p><span class=caps>FUSE</span> allows you to implement a filesystem within a userspace program, thus allowing us to give other users access and auto-mount using /etc/fstab.</p> </div> <div class=section id=installation> <h2>Installation</h2> <div class=section id=fuse-2> <h3>Fuse</h3> <p>Installing <span class=caps>FUSE</span> is simple</p> <div class=highlight><pre><span></span>sudo apt-get install fuse-utils
</pre></div> </div> <div class=section id=s3fs-1> <h3>s3fs</h3> <p>We …</p></div></div> </section> <div class="eevee-divider mdl-color--accent" role=presentation></div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=amazon,aws,backup,debian,s3,ubuntu> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2012-02-29T20:55:00+00:00 itemprop=datePublished> 29 Feb 2012 </time>&nbsp;-- 2 min read </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2012/02/29/backup-a-linux-server-to-amazon-s3-on-debian-6ubuntu-10-04/ rel=bookmark title="Permalink to 'Backup a Linux server to Amazon S3 on Debian 6/Ubuntu 10.04'" itemprop=url> Backup a Linux server to Amazon S3 on Debian 6/Ubuntu&nbsp;10.04 </a> </h2> <section itemprop=articleBody class=summary-content> <p>I have several servers powering syslog including it’s <a href=https://rpi.syslog.tv/ class="reference external">Raspberry Pi</a> mirror, load balancer and email servers. All of my servers are hosted using <a class="reference external" href="https://www.linode.com/?r=8d58820f89940a1a68832c0cdd53109727cfa622">Linode</a> in their London data centre and have Linode’s back-up system doing both daily and weekly snapshots.</p> <p>For the app and database servers I do server-side backups storing each website and it’s database in it’s own folder within /backup in case I require a quick back-up to fix something, rather than the server has died.</p> <p>This is all well and good but I like having an off-site backup too and for that I use <a href=https://aws.amazon.com/s3/ class="reference external">S3</a>…</p> <div class=section id=about-s3> <h2>About S3</h2> <p>Amazon’s S3 is pretty cheap and very easy to use. Because only data is going in you don’t pay a transfer fee and the cost of storage is very affordable, you can see a <a class="reference external" href=https://aws.amazon.com/s3/#pricing>pricing list here</a>.</p> <p>To do the backup I use a …</p></div> </section> <div class="eevee-divider mdl-color--accent" role=presentation></div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content="automatic update,debian,unattended-upgrades,update"> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2012-01-28T17:41:00+00:00 itemprop=datePublished> 28 Jan 2012 </time>&nbsp;-- 2 min read </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2012/01/28/automaticunattended-updates-on-debian-6-squeeze/ rel=bookmark title="Permalink to 'Automatic/Unattended updates on Debian 6 (Squeeze)'" itemprop=url> Automatic/Unattended updates on Debian 6&nbsp;(Squeeze) </a> </h2> <section itemprop=articleBody class=summary-content> <p>The unattended-upgrades package used on Debian is based on the one from Ubuntu. It is generally pretty safe in my opinion but I only ever enable it for security upgrades.</p> <div class=section id=installation> <h2>Installation</h2> <div class=highlight><pre><span></span>apt-get install unattended-upgrades apticron
</pre></div> <p><em>unattended-upgrades</em> handles the actual updates, <em>apticron</em> is used for emailing you of available updates - it is not required but I like it.</p> </div> <div class=section id=configuring-unattended-upgrades> <h2>Configuring unattended-upgrades</h2> <p>Open up <strong>/etc/apt/apt.conf.d/50unattended-upgrades</strong> and change it to the content below.</p> <pre class=literal-block>
APT::Periodic::Enable "1";
APT::Periodic::Update-Package-Lists "1";
APT::Periodic::AutocleanInterval "7";
APT::Periodic::Unattended-Upgrade "1";
Unattended-Upgrade::Mail "**YOUR_EMAIL_HERE**";

// Automatically upgrade packages from these (origin, archive) pairs
Unattended-Upgrade::Allowed-Origins {
    "${distro_id} stable";
    "${distro_id} ${distro_codename}-security";
};

// Automatically reboot *WITHOUT CONFIRMATION* if a
 // the file /var/run/reboot-required is found after the upgrade
 Unattended-Upgrade::Automatic-Reboot "false";
</pre> <p>So lets explain the above. As you can see we enable periodic updates, enable update package lists (triggers …</p></div> </section> <div class="eevee-divider mdl-color--accent" role=presentation></div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=debian,keyserver,pgp,sks,ubuntu> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2011-12-17T15:58:00+00:00 itemprop=datePublished> 17 Dec 2011 </time>&nbsp;-- < 1 min read </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2011/12/17/running-your-own-pgp-keyserver-with-sks-on-debian-6ubuntu-10-04/ rel=bookmark title="Permalink to 'Running your own PGP keyserver with SKS on Debian 6/Ubuntu 10.04'" itemprop=url> Running your own <span class=caps>PGP</span> keyserver with <span class=caps>SKS</span> on Debian 6/Ubuntu&nbsp;10.04 </a> </h2> <section itemprop=articleBody class=summary-content> <div class=section id=installation> <h2>Installation</h2> <p>To install we need to run the following command:</p> <div class=highlight><pre><span></span>sudo apt-get install -y sks
</pre></div> <p>Now we build the key database:</p> <div class=highlight><pre><span></span>sudo sks build
</pre></div> <p>And change the permissions for the sks user:</p> <div class=highlight><pre><span></span>sudo chown -R debian-sks:debian-sks /var/lib/sks/DB
</pre></div> <p>Next we need to make sks start from init, open up <strong>/etc/default/sks</strong> in your favourite editor and <strong>*initstart*</strong> to look like below:</p> <div class=highlight><pre><span></span><span class=nv>initstart</span><span class=o>=</span>yes
</pre></div> <p>Now we can start the service with:</p> <div class=highlight><pre><span></span>sudo /etc/init.d/sks start
</pre></div> <p>Your keyserver will now be up and running on port 11371.</p> </div> <div class=section id=web-interface> <h2>Web interface</h2> <p>We’ll need to create a web folder within sks with the following command:</p> <div class=highlight><pre><span></span>sudo mkdir -p /var/lib/sks/www/
</pre></div> <p>Change it’s permissions so the sks user can access it.</p> <div class=highlight><pre><span></span>sudo chown -R debian-sks:debian-sks /var/lib/sks/www
</pre></div> <p>And finally we need create a single <span class=caps>HTML</span> file for the interface, I have provided that …</p></div> </section> <div class="eevee-divider mdl-color--accent" role=presentation></div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=debian,git,gitosis,gitweb,ubuntu> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2011-12-17T15:40:00+00:00 itemprop=datePublished> 17 Dec 2011 </time>&nbsp;-- 4 min read </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2011/12/17/host-git-repositories-with-git-gitosis-and-gitweb-on-debian-6ubuntu-10-04/ rel=bookmark title="Permalink to 'Host git repositories with git, gitosis and gitweb on Debian 6/Ubuntu 10.04'" itemprop=url> Host git repositories with git, gitosis and gitweb on Debian 6/Ubuntu&nbsp;10.04 </a> </h2> <section itemprop=articleBody class=summary-content> <div class=section id=installation> <h2>Installation</h2> <p>First up we’ll need to install git and some Python tools to get Gitosis installed.</p> <div class=highlight><pre><span></span>sudo apt-get install -y git-core gitweb python-setuptools
</pre></div> <p>Next we have to clone gitosis from it’s git repository and install it.</p> <div class=highlight><pre><span></span><span class=nb>cd</span> /tmp
git clone git://eagain.net/gitosis.git
<span class=nb>cd</span> gitosis
sudo python setup.py install
</pre></div> </div> <div class=section id=adding-your-git-user> <h2>Adding your git user</h2> <div class=highlight><pre><span></span>sudo adduser --system --shell /bin/sh --gecos <span class=s1>'git version control'</span> --group --disabled-password --home /home/git git
</pre></div> <p>The above command creates a new system user with <strong>/bin/sh</strong> as it’s shell with <strong>no password</strong> and a homedir of <strong>/home/git/</strong> and also creates a group with the same name.</p> </div> <div class=section id=initialising-gitosis> <h2>Initialising gitosis</h2> <p>You’ll need an <span class=caps>SSH</span> key for this, if you have one simply copy the contents of it to your new git server, if you do not have one then you can generate one on your machine using</p> <div class=highlight><pre><span></span>ssh-keygen
</pre></div> <p>And then …</p></div> </section> <div class="eevee-divider mdl-color--accent" role=presentation></div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content="kernel panic,oom,reboot"> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2011-10-25T10:26:00+01:00 itemprop=datePublished> 25 Oct 2011 </time>&nbsp;-- 1 min read </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2011/10/25/rebooting-on-oom/ rel=bookmark title="Permalink to 'Rebooting on OOM'" itemprop=url> Rebooting on <span class=caps>OOM</span> </a> </h2> <section itemprop=articleBody class=summary-content> <p><strong>*I would generally not advise using this unless you have skill at debugging why <span class=caps>OOM</span> has spawned and also debugging kernel panics after they happen, from logs.*</strong></p> <p>It is possible to configure your kernel to panic when <span class=caps>OOM</span> is spawned, which in itself is not useful but, coupled with a kernel option for auto-rebooting a system when the kernel panics it can be a very useful tool.</p> <p>Think before implementing this and use at your own risk, I take zero responsibility for you using this.</p> <div class=highlight><pre><span></span>sudo sysctl vm.panic_on_oom<span class=o>=</span><span class=m>1</span>
sudo sysctl kernel.panic<span class=o>=</span>X <span class=c1># X is the amount of seconds to wait before rebooting</span>
</pre></div> <p><strong>*<span class=caps>DO</span> <span class=caps>NOT</span> <span class=caps>FORGET</span> <span class=caps>TO</span> <span class=caps>CHANGE</span> X*</strong></p> <p>This will inject the changes in to a system that is currently running but will be forgotten on reboot so use the lines below to save permanently.</p> <div class=highlight><pre><span></span>sudo <span class=nb>echo</span> <span class=s2>"vm.panic_on_oom=1"</span> &gt;&gt; /etc/sysctl.conf …</pre></div> </section> <div class="eevee-divider mdl-color--accent" role=presentation></div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content="mk livestatus,nagios,nagios 3,nagios broker,xinetd"> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2011-10-13T23:17:00+01:00 itemprop=datePublished> 13 Oct 2011 </time>&nbsp;-- 2 min read </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2011/10/13/nagios3-mk-livestatus-xinetd/ rel=bookmark title="Permalink to 'Nagios3 + MK Livestatus + xinetd on Debian 6/Ubuntu'" itemprop=url> Nagios3 + <span class=caps>MK</span> Livestatus + xinetd on Debian&nbsp;6/Ubuntu </a> </h2> <section itemprop=articleBody class=summary-content> <div class=section id=preparation> <h2>Preparation</h2> <p>First we need to make sure we have all the stuff we need to compile mk livestatus and run it</p> <div class=highlight><pre><span></span>sudo apt-get install make build-essential xinetd ucspi-unix
</pre></div> </div> <div class=section id=mk-livestatus> <h2><span class=caps>MK</span> Livestatus</h2> <p>Grab the mk livestatus source from <a class="reference external" href=https://mathias-kettner.de/check_mk_download.html>here</a>, currently it’s version 1.1.10p3 but update the commands below to match your version.</p> <div class=highlight><pre><span></span>wget https://mathias-kettner.de/download/mk-livestatus-1.1.10p3.tar.gz
tar xvzf mk-livestatus-1.1.10p3.tar.gz
<span class=nb>cd</span> mk-livestatus-1.1.10p3
./configure
make
sudo make install
</pre></div> </div> <div class=section id=xinetd> <h2>Xinetd</h2> <p>Now that it’s compiled we need to write a xinetd config for it, create a new file called <strong>/etc/xinetd.d/livestatus</strong> and put the following in it</p> <pre class=literal-block>
service livestatus {
    type = UNLISTED
    port = 6557
    socket_type = stream
    protocol = tcp
    wait = no
    cps = 100 3
    instances = 500
    per_source = 250
    flags = NODELAY
    user = nagios
    server = /usr/bin/unixcat
    server_args = /var/lib/nagios3/rw/live
    only_from = 127.0.0 …</pre></div> </section> </article> <div class=eevee-page-spacer role=presentation></div> </div> </div> </main> <div class="eevee-pagination__container eevee-container mdl-grid"> <div role=presentation class="mdl-cell mdl-cell--2-col mdl-cell--hide-tablet mdl-cell--hide-phone"> </div> <div class="mdl-color-text--grey-800 mdl-cell mdl-cell--8-col"> <nav class="eevee-pagination mdl-cell mdl-cell--12-col" itemscope itemtype=http://schema.org/SiteNavigationElement aria-label=Pagination> <div class=eevee-spacer></div> <a href=https://kura.gg/category/tutorials/page/2/ class=eevee-nav__button itemprop=url rel=bookmark title=Older> Older <button class="mdl-button mdl-button--icon mdl-color--white mdl-color-text--grey-900" role=presentation> <i class=material-icons>&#xE5C8;</i> </button> </a> </nav> </div> </div> <footer class=mdl-mega-footer itemscope itemtype=http://schema.org/SiteNavigationElement> <div class=mdl-mega-footer--top-section> <div class=mdl-mega-footer--drop-down-section> <ul class=mdl-mega-footer--link-list> <li> <a href=#top itemprop=url title="Back to the top of the page"> Back to the top of the page </a> </li> </ul> </div> </div> <div class=mdl-mega-footer--middle-section itemscope itemtype=http://schema.org/SiteNavigationElement aria-label="Footer navigation"> <div class=mdl-mega-footer--drop-down-section> <h1 class=mdl-mega-footer--heading>Menu</h1> <ul class=mdl-mega-footer--link-list> <li> <a href=/eevee/ itemprop=url rel=bookmark title=Eevee> <i class=material-icons aria-hidden=true>&#xE871;</i> Eevee </a> </li> <li> <a href=/contact/ itemprop=url rel=bookmark title=Contact> <i class=material-icons aria-hidden=true>&#xE0B7;</i> Contact </a> </li> <li> <a href=/software/ itemprop=url rel=bookmark title=Software> <i class=material-icons aria-hidden=true>&#xE86F;</i> Software </a> </li> <li> <a href=https://kura.gg/archives/ itemprop=url rel=bookmark title=Archives> <i class=material-icons>&#xE02F;</i> Archives </a> </li> <li> <a href=https://kura.gg/feeds/rss.xml title=RSS itemprop=url> <i class=material-icons>&#xE0E5;</i> RSS </a> </li> </ul> </div> <div class=mdl-mega-footer--drop-down-section> <h1 class=mdl-mega-footer--heading>Social</h1> <ul class=mdl-mega-footer--link-list> <li> <a href=https://github.com/kura itemprop=url rel=bookmark title=GitHub> <i class=fa aria-hidden=true>&#xF09B;</i> Github </a> </li> </ul> </div> <div class=mdl-mega-footer--drop-down-section> <h1 class=mdl-mega-footer--heading>Links</h1> <ul class=mdl-mega-footer--link-list> <li> <a href=https://kura.gg/blackhole itemprop=url rel=bookmark title=Blackhole> <i class=material-icons aria-hidden=true>&#xE86F;</i> Blackhole </a> </li> <li> <a href=https://kura.gg/yarg itemprop=url rel=bookmark title=Yarg> <i class=material-icons aria-hidden=true>&#xE86F;</i> Yarg </a> </li> <li> <a href=https://kura.gg/eevee itemprop=url rel=bookmark title=Eevee> <i class=material-icons aria-hidden=true>&#xE871;</i> Eevee </a> </li> <li> <a href=https://kura.gg/hauntr itemprop=url rel=bookmark title=Hauntr> <i class=material-icons aria-hidden=true>&#xE871;</i> Hauntr </a> </li> <li> <a href=https://kura.gg/ghastly itemprop=url rel=bookmark title=Ghastly> <i class=material-icons aria-hidden=true>&#xE871;</i> Ghastly </a> </li> </ul> </div> </div> <div class=mdl-mega-footer--bottom-section> <div class=mdl-logo> <a href=https://kura.gg rel=bookmark itemprop=url title=kura.gg> kura.gg </a> </div> <ul class="eevee-footer mdl-mega-footer--link-list"> <li>Powered by love &amp; rainbow sparkles.</li> <li>Source code and content released under the <a href=/license/ title="MIT license">MIT license</a>.</li> </ul> </div> </footer> </div> <link rel=stylesheet href=https://kura.gg/theme/css/eevee.min.css?1c9d8344> <script async src=https://kura.gg/theme/js/eevee.min.js?1841d254></script> </body> </html>