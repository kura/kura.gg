<!DOCTYPE html><!--

                                      |
                                     /|
                                   ,' |
                                  .   |
                                    | |
                                 ' '| |
                                / / | |
       _,.-\"\"--._              / /  | |
     ,'          `.           j '   ' '
   ,'              `.         ||   / ,                         ___..--,
  /                  \\        ' `.'`.-.,-\".  .       _..---\"\"'' __, ,'
 /                    \\        \\` .\"`      `\"'\\   ,'\"_..--''\"\"\"'.'.'
.                      .      .'-'             \\,' ,'         ,','
|                      |      ,`               ' .`         .' /
|                      |     /          ,\"`.  ' `-. _____.-' .'
'                      |..---.|,\".      | | .  .-'\"\"   __.,-'
 .                   ,'       ||,|      |.' |    |\"\"`'\"
  `-._   `._.._____  |        || |      `._,'    |
      `.   .       `\".     ,'\"| \"  `'           ,+.
        \\  '         |    '   |   .....        .'  `.
         .'          '     7  \".              ,'     \\
                   ,'      |    `..        _,'      F
                  .        |,      `'----''         |
                  |      ,\"j  /                   | '
                  `     |  | .                 | `,'
                   .    |  `.|                 |/
                    `-..'   ,'                .'
                            | \\             ,''
                            |  `,'.      _,' /
                            |    | ^.  .'   /
                             `-'.' j` V    /
                                   |      /
                                   |     /
                                   |   ,'
                                    `\"\"

//--><html lang=en> <head><meta charset=utf-8><meta name=viewport content="width=device-width, initial-scale=1.0, minimum-scale=1.0"><link rel=alternate href=https://kura.gg hreflang=en><link rel=dns-prefetch href=https://kura.gg><link rel=stylesheet href=https://kura.gg/theme/css/eevee.min.css?1c9d8344><link rel=preload href=https://kura.gg/theme/css/eevee.min.css?1c9d8344 as=style><script async src=https://kura.gg/theme/js/eevee.min.js?1841d254></script><link rel=preload href=https://kura.gg/theme/js/eevee.min.js?1841d254 as=script><link href=https://kura.gg/feeds/rss.xml type=application/rss+xml rel=alternate title=kura.gg><link href=https://kura.gg/feeds/atom.xml type=application/atom+xml rel=alternate title=kura.gg><meta property=og:site_name content=kura.gg><meta property=og:type content=article><meta property=og:title content=kura.gg><meta property=og:url content=https://kura.gg/authors/kura/page/3/index.html><meta property=og:image content=https://kura.gg/authors/kura/page/3/index.png><meta property=og:image:width content=1920><meta property=og:image:height content=1080><meta property=twitter:title content=kura.gg><meta property=twitter:url content=https://kura.gg/authors/kura/page/3/index.html><meta property=twitter:image content=https://kura.gg/authors/kura/page/3/index.png><meta property=twitter:card content=summary_large_image><meta property=twitter:image:width content=1920><meta property=twitter:image:height content=1080><link rel=icon href=/favicon.png type=image/png sizes="16x16 32x32 48x48 64x64 128x128 256x256"><link rel=icon href=/favicon.ico type=image/vnd.microsoft.icon sizes="16x16 32x32 48x48 64x64 128x128 256x256"><title>kura</title></head> <body> <div class="eevee-layout mdl-layout mdl-js-layout mdl-color--grey-50"> <header class="eevee-header mdl-color--grey-50 mdl-color-text--grey-800" itemscope itemtype=http://schema.org/WPHeader> <div class=mdl-layout__header-row> <div aria-expanded=false role=button tabindex=0 class="mdl-layout__drawer-button mdl-color-text--accent eevee-mobile-button mdl-layout--small-screen-only"> <i class=material-icons>&#xE5D2;</i> </div> <span class="eevee-logo mdl-color-text--accent mdl-layout-title"> <h2 id=top> <a href=https://kura.gg rel=bookmark title=kura.gg> kura.gg </a> </h2> </span> <div class=mdl-layout-spacer role=presentation></div> <nav class="eevee-nav mdl-navigation mdl-layout--large-screen-only" itemscope itemtype=http://schema.org/SiteNavigationElement aria-label="Header navigation"> <a class="mdl-color-text--accent mdl-navigation__link" href=/blackhole itemprop=url rel=bookmark title=Blackhole> <i class=material-icons aria-hidden=true>&#xE86F;</i> Blackhole </a> <a class="mdl-color-text--accent mdl-navigation__link" href=/eevee itemprop=url rel=bookmark title=Eevee> <i class=material-icons aria-hidden=true>&#xE871;</i> Eevee </a> <a class="mdl-color-text--accent mdl-navigation__link" href=/hauntr itemprop=url rel=bookmark title=Hauntr> <i class=material-icons aria-hidden=true>&#xE871;</i> Hauntr </a> <a class="mdl-color-text--accent mdl-navigation__link" href=/ghastly itemprop=url rel=bookmark title=Ghastly> <i class=material-icons aria-hidden=true>&#xE871;</i> Ghastly </a> <a class="mdl-color-text--accent mdl-navigation__link" href=/pelican-plugins itemprop=url rel=bookmark title="Pelican Plugins"> <i class=material-icons aria-hidden=true>&#xE86F;</i> Pelican Plugins </a> <a class="mdl-color-text--accent mdl-navigation__link" href=/contact/ itemprop=url rel=bookmark title=Contact> <i class=material-icons aria-hidden=true>&#xE0B7;</i> Contact </a> <a class="mdl-color-text--accent mdl-navigation__link" href=https://kura.gg/archives/ itemprop=url rel=bookmark title=Archives> <i class=material-icons>&#xE02F;</i> Archives </a> <a class="mdl-color-text--accent mdl-navigation__link" href=https://kura.gg/feeds/rss.xml title=RSS itemprop=url> <i class=material-icons>&#xE0E5;</i> RSS </a> </nav> </div> </header> <div class="eevee-mobile-header mdl-layout__drawer mdl-color--white" aria-hidden=true> <span class=mdl-layout-title> <h2 class="eevee-mobile-logo mdl-color-text--accent"> kura.gg </h2> </span> <div class="mdl-navigation mdl-color--white"> <nav class="eevee-nav mdl-navigation" itemscope itemtype=http://schema.org/SiteNavigationElement aria-label="Header navigation"> <a class="mdl-color-text--accent mdl-navigation__link" href=https://kura.gg itemprop=url rel=bookmark> <i class=material-icons aria-hidden=true> &#xE88A; </i> Home </a> <a class="mdl-color-text--accent mdl-navigation__link" href=/blackhole itemprop=url rel=bookmark title=Blackhole> <i class=material-icons aria-hidden=true>&#xE86F;</i> Blackhole </a> <a class="mdl-color-text--accent mdl-navigation__link" href=/eevee itemprop=url rel=bookmark title=Eevee> <i class=material-icons aria-hidden=true>&#xE871;</i> Eevee </a> <a class="mdl-color-text--accent mdl-navigation__link" href=/hauntr itemprop=url rel=bookmark title=Hauntr> <i class=material-icons aria-hidden=true>&#xE871;</i> Hauntr </a> <a class="mdl-color-text--accent mdl-navigation__link" href=/ghastly itemprop=url rel=bookmark title=Ghastly> <i class=material-icons aria-hidden=true>&#xE871;</i> Ghastly </a> <a class="mdl-color-text--accent mdl-navigation__link" href=/pelican-plugins itemprop=url rel=bookmark title="Pelican Plugins"> <i class=material-icons aria-hidden=true>&#xE86F;</i> Pelican Plugins </a> <a class="mdl-color-text--accent mdl-navigation__link" href=/contact/ itemprop=url rel=bookmark title=Contact> <i class=material-icons aria-hidden=true>&#xE0B7;</i> Contact </a> <a class="mdl-color-text--accent mdl-navigation__link" href=https://kura.gg/archives/ itemprop=url rel=bookmark title=Archives> <i class=material-icons>&#xE02F;</i> Archives </a> <a class="mdl-color-text--accent mdl-navigation__link" href=https://kura.gg/feeds/rss.xml title=RSS itemprop=url> <i class=material-icons>&#xE0E5;</i> RSS </a> </nav> </div> </div> <div class="eevee-ribbon mdl-color--primary-dark" role=presentation> </div> <main class="eevee-main mdl-layout__content"> <div class="eevee-container mdl-grid"> <div role=presentation class="mdl-cell mdl-cell--2-col mdl-cell--hide-tablet mdl-cell--hide-phone"> </div> <div class="eevee-content mdl-color--white mdl-shadow--2dp mdl-color-text--grey-800 mdl-cell mdl-cell--8-col" aria-label="Main content"> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=bash,dash,ps1,git> <meta itemprop=keywords content=coding> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2013-08-18T17:25:00+01:00 itemprop=datePublished> 18 Aug 2013 </time>&nbsp;-- < 1 min read </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2013/08/18/my-ps1-with-git-branch-new-files-staged-files-and-commit-status/ rel=bookmark title="Permalink to 'My $PS1 with git branch, new files, staged files and commit status'" itemprop=url> My $<span class=caps>PS1</span> with git branch, new files, staged files and commit&nbsp;status </a> </h2> <section itemprop=articleBody class=summary-content> <p>I love my prompt, always have and always will. I spend so much of my life in a terminal, usually with half a dozen mini terminals open in each tab. As such I like to tweak it and get it as perfect as possible for my life, needs and even mood.</p> <p>In the past I’ve had quite a large <span class=caps>PS1</span> that covers multiple lines and gives a lot of information, after having that <span class=caps>PS1</span> in one form or another for some time I decided it was time for a change, to a smaller <span class=caps>PS1</span> that takes up a lot less space.</p> <p>So here it is, the first image is my standard <span class=caps>PS1</span> when in a git repository, the red @ means a file hasn’t been added to Git, a blue @ means a tracked file has been modified but not stage and finally a green @ means a file is staged …</p> </section> <div class="eevee-divider mdl-color--accent" role=presentation></div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=python,blackhole,setup.py,entry_points,mock,tests,testing> <meta itemprop=keywords content=coding> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2013-08-18T12:00:00+01:00 itemprop=datePublished> 18 Aug 2013 </time>&nbsp;-- 5 min read </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2013/08/18/blackhole-1.8.0-development-mock-and-python-entry-points/ rel=bookmark title="Permalink to 'Blackhole 1.8.0 development, Mock and Python entry_points'" itemprop=url> Blackhole 1.8.0 development, Mock and Python&nbsp;entry_points </a> </h2> <section itemprop=articleBody class=summary-content> <p>Over the last week I’ve been doing a huge amount of refactoring of <a class="reference external" href=https://blackhole.io>Blackhole</a> as well as writing dozens of additional tests. To make Blackhole more testable I needed to make a big change to how the program is launched and controlled.</p> <div class=section id=setup-py-scripts-vs-entry-points> <h2>setup.py scripts vs. entry_points</h2> <p>Whenever I’ve written Python programs that require some kind of command line script I’ve always used distutils’ scripts, this can be seen <a class="reference external" href=https://github.com/kura/blackhole/blob/05c6647aeb25ecfcc17d9df535db330a68016a24/setup.py#L37-L39>in blackhole’s setup.py on GitHub</a> or in the three line example below.</p> <div class=highlight><pre><span></span><span class=n>scripts</span><span class=o>=</span><span class=p>[</span>
    <span class=s1>'blackhole/bin/blackhole'</span><span class=p>,</span>
<span class=p>],</span>
</pre></div> <p>In doing so, it allowed me to be lazy and write a lot of prodecural code in the main “binary” which made it pretty much impossible to test. You can also see that <a class="reference external" href=https://github.com/kura/blackhole/blob/bb6cccca3a75def324ed5cb64a32fd2e5773a038/blackhole/bin/blackhole>on GitHub in the main “binary”</a>.</p> <p>I’ve noticed that most people who write Python packages that have some kind of command line entry point use …</p></div> </section> <div class="eevee-divider mdl-color--accent" role=presentation></div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=python,pelican,youtube,vimeo> <meta itemprop=keywords content=coding> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2013-08-09T17:38:00+01:00 itemprop=datePublished> 09 Aug 2013 </time>&nbsp;-- 3 min read </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2013/08/09/writing-a-vimeo-and-youtube-plugin-for-pelican/ rel=bookmark title="Permalink to 'Writing a Vimeo and YouTube plugin for Pelican'" itemprop=url> Writing a Vimeo and YouTube plugin for&nbsp;Pelican </a> </h2> <section itemprop=articleBody class=summary-content> <p><a href=https://getpelican.com/ class="reference external">Pelican</a> is a Python-powered static blog generator that processes <a class="reference external" href=https://docutils.sourceforge.net/rst.html>ReStructuredText</a> and <a href=https://daringfireball.net/projects/markdown/ class="reference external">Markdown</a> articles and pages and converts them to <span class=caps>HTML</span>. I use Pelican to power this blog.</p> <p>There is a YouTube <span class=caps>RST</span> directive built in to Pelican core but it really shouldn’t exist there.</p> <p>I submitted a pull request for Pelican core to enable Vimeo videos in articles but that request was declined because it didn’t belong in the core. So I decided I would write it as a plugin instead and while I was doing it, also wrote a plugin for YouTube so that it could be removed from the core.</p> <p><a class="reference external" href=https://docs.getpelican.com/en/3.2/plugins.html#how-to-create-plugins>There is a decent amount of detail in the Pelican documentation on how to write plugins</a>, I’m not going to cover the whole process but I thought I would cover a little of what I did.</p> <div class=section id=adding-an-rst-directive> <h2>Adding an <span class=caps>RST</span> directive</h2> <p>Really all we’re doing …</p></div> </section> <div class="eevee-divider mdl-color--accent" role=presentation></div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=python,tornado,iostream,ssl,starttls,blackhole> <meta itemprop=keywords content=coding> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2013-07-31T13:36:00+01:00 itemprop=datePublished> 31 Jul 2013 </time>&nbsp;-- 4 min read </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2013/07/31/writing-the-starttls-command-in-to-blackhole/ rel=bookmark title="Permalink to 'Writing the STARTTLS command in to Blackhole'" itemprop=url> Writing the <span class=caps>STARTTLS</span> command in to&nbsp;Blackhole </a> </h2> <section itemprop=articleBody class=summary-content> <p>Blackhole has always been able to handle unencrypted <span class=caps>SMTP</span> and for a long time it’s been able to handle encrypted <span class=caps>SMTP</span> via TLSv1.</p> <p>One thing Blackhole hasn’t been able to do until the 1.7.0 release is handle <cite><span class=caps>STARTTLS</span></cite>.</p> <p>In the past the <cite><span class=caps>STARTTLS</span></cite> command would cause Blackhole to return the standard <cite>250 <span class=caps>OK</span></cite> response but would continue to operate on unencrypted <span class=caps>SMTP</span>.</p> <p>I wanted to fix this and do it properly, but this meant learning how to do so with Tornado, which itself proved to be tricky. I ended up deciding to go to my local coding spot - the pub and hash it out.</p> <div class=section id=connection-stream> <h2>connection_stream</h2> <p>The first thing I had to do was refactor the code that created the instance of <cite>tornado.iostream.IOStream</cite> and <cite>tornado.iostream.SSLIOStream</cite> so that it didn’t actually do the ssl wrapping.</p> <div class=highlight><pre><span></span><span class=k>def</span> <span class=nf>connection_stream</span><span class=p>(</span><span class=n>connection</span><span class=p>):</span>
    <span class=sd>"""</span>
<span class=sd>    Detect which socket …</span></pre></div></div> </section> <div class="eevee-divider mdl-color--accent" role=presentation></div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=python,tornado,iostream,ssl,blackhole> <meta itemprop=keywords content=coding> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2013-07-29T20:00:00+01:00 itemprop=datePublished> 29 Jul 2013 </time>&nbsp;-- 2 min read </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2013/07/29/wrapping-a-tornado-iostream-with-ssl/ rel=bookmark title="Permalink to 'Wrapping a Tornado IOStream with SSL'" itemprop=url> Wrapping a Tornado IOStream with <span class=caps>SSL</span> </a> </h2> <section itemprop=articleBody class=summary-content> <p>As part of my effort to make <a href=https://blackhole.io/ class="reference external">Blackhole</a> as useful and usable as possible, I needed to be able to support <span class=caps>SSL</span>/<span class=caps>TLS</span> enabled connections.</p> <p>Tornado itself has two built-in IOStreams that help us do the job; the first is the standard <a class="reference external" href=https://www.tornadoweb.org/en/stable/iostream.html#tornado.iostream.IOStream>IOStream</a> and the second is the <a class="reference external" href=https://www.tornadoweb.org/en/stable/iostream.html#tornado.iostream.SSLIOStream>SSLIOStream</a>.</p> <p>With this in mind we simply need to spawn two sockets, by default these listen on port 25 for standard <span class=caps>SMTP</span> and port 465 for <span class=caps>SSL</span>/<span class=caps>TLS</span> encrypted <span class=caps>SMTP</span>. With these two sockets bound we’re then very simply able to listen for incoming connections on either socket and use <cite>socket.socket.getsockname()</cite> to figure out if the connection is to the encrypted or unencrypted socket.</p> <div class=section id=code> <h2>Code</h2> <div class=highlight><pre><span></span><span class=k>def</span> <span class=nf>connection_stream</span><span class=p>(</span><span class=n>connection</span><span class=p>):</span>
    <span class=sd>"""</span>
<span class=sd>    Detect which socket the connection is being made on,</span>
<span class=sd>    create and iostream for the connection, wrapping it</span>
<span class=sd>    in SSL if connected over the SSL socket.</span>

<span class=sd>    The parameter 'connection' is an …</span></pre></div></div> </section> <div class="eevee-divider mdl-color--accent" role=presentation></div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=haproxy,stats> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2013-07-19T13:00:00+01:00 itemprop=datePublished> 19 Jul 2013 </time>&nbsp;-- < 1 min read </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2013/07/19/haproxy-stats/ rel=bookmark title="Permalink to 'haproxy stats'" itemprop=url> haproxy&nbsp;stats </a> </h2> <section itemprop=articleBody class=summary-content> <p>I recently wrote an article on <a href=/2013/07/15/haproxy-nginx-and-spdy-with-ssl-termination-debian-7/ class="reference external">using haproxy, <span class=caps>SSL</span> and <span class=caps>SPDY</span> with nginx backend servers</a>.</p> <p>This article is a little extra on top of that to explain how to enable statistics for haproxy so you can monitor the backend statuses etc.</p> <div class=section id=example-stats-page> <h2>Example stats page</h2> <img alt="Moar stats!" src=/images/haproxy-stats.png> </div> <div class=section id=enabling-stats> <h2>Enabling stats</h2> <pre class=literal-block>
listen stats :8000
    mode http
    stats enable
    stats hide-version
    stats realm haproxy\ stats
    stats uri /
    stats auth admin:admin
</pre> <p>Place the above content in the haproxy configuration file (<em>/etc/haproxy/haproxy.cfg</em>).</p> <p>Be sure to replace <em>admin:admin</em> with your a proper username and password, username first, password after the colon.</p> <p>Restart haproxy, and then browse to <a class="reference external" href=https://yoursite.com:8000>https://yousite.com:8000</a>.</p> </div> </section> <div class="eevee-divider mdl-color--accent" role=presentation></div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=python,pypy,blackhole,blackhole.io,mta,email,honeypot> <meta itemprop=keywords content=talks> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2013-07-17T21:00:00+01:00 itemprop=datePublished> 17 Jul 2013 </time>&nbsp;-- < 1 min read </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2013/07/17/djugl-june-2013-talk-on-blackhole-and-blackhole-io/ rel=bookmark title="Permalink to 'DJUGL June 2013 talk on blackhole and blackhole.io'" itemprop=url> <span class=caps>DJUGL</span> June 2013 talk on blackhole and&nbsp;blackhole.io </a> </h2> <section itemprop=articleBody class=summary-content> <p>I have been a frequent audience member of <a class="reference external" href=https://www.djugl.org/item/443153><span class=caps>DJUGL</span></a> for a few years now and spend most of the time asking questions, playing devils advocate and generally being my annoying self.</p> <p>I have repeatedly said I would do a talk but never got round to it until <a class="reference external" href=https://twitter.com/JonWebJobs>Jon</a> basically forced me to get round to it.</p> <p>My talk was on <a class="reference external" href=https://blackhole.io>blackhole/blackhole.io</a> and covered several topics including <a class="reference external" href=https://pypy.org>PyPy</a>, <a href=/simplemta/ class="reference external">SimpleMTA</a> and moved on to talking about spamming and starting work on my honey pot suite called <a class="reference external" href=https://nectar.blackhole.io>Nectar</a>.</p> <p>You can find the slides on <a class="reference external" href=https://speakerdeck.com/kura/djugl-june-2013>Speaker Deck</a>, sadly I ran out of time when creating them and although I was promised time to finish them at work, I got busy. So I replaced content with “Taylor Replacements(tm)”.</p> <p>The event, attendees and other speakers are listen on the <a href=https://lanyrd.com/2013/djugl-june/ class="reference external">Lanyrd event page</a>.</p> <p>Several people took photos of the event, I don’t remember …</p> </section> <div class="eevee-divider mdl-color--accent" role=presentation></div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content="debian,ubuntu,haproxy,nginx,spdy,ssl,ssl termination"> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2013-07-15T22:30:00+01:00 itemprop=datePublished> 15 Jul 2013 </time>&nbsp;-- 5 min read </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2013/07/15/haproxy-nginx-and-spdy-with-ssl-termination-debian-7/ rel=bookmark title="Permalink to 'haproxy, nginx and SPDY with SSL termination (Debian 7)'" itemprop=url> haproxy, nginx and <span class=caps>SPDY</span> with <span class=caps>SSL</span> termination (Debian&nbsp;7) </a> </h2> <section itemprop=articleBody class=summary-content> <p><a href=/2013/07/10/nginx-spdy-and-ngx-pagespeed/ class="reference external">I wrote an article last week</a> explaining that I had changed my blog and built my own nginx packages with <a class="reference external" href=https://www.chromium.org/spdy><span class=caps>SPDY</span></a> built in.</p> <p>I decided I would take things a little further and poke around with haproxy some more. The initial plan was to compile the latest dev source of haproxy with <span class=caps>SSL</span> termination enabled.</p> <p>In doing so I realised I would lose <span class=caps>SPDY</span> support, which upset me a little. After some digging I found that the 1.5-dev branch of haproxy supports npn and thus can handle <span class=caps>SPDY</span>.</p> <p>I tweaked my builds a little more and managed to get haproxy running as an <span class=caps>SSL</span> terminating load balancer, with <span class=caps>SPDY</span> connections being sent off to my nginx servers with <span class=caps>SPDY</span> enabled and all other non-<span class=caps>SPDY</span> connections were passed on to an nginx virtual host with <span class=caps>SPDY</span> disabled.</p> <div class=section id=requirements> <h2>Requirements</h2> <p>I have released my haproxy build as a debian file below …</p></div> </section> <div class="eevee-divider mdl-color--accent" role=presentation></div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=debian,ubuntu,nginx,spdy,pagespeed,ngx_pagespeed,mod_pagespeed> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2013-07-10T22:30:00+01:00 itemprop=datePublished> 10 Jul 2013 </time>&nbsp;-- 2 min read </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2013/07/10/nginx-spdy-and-ngx-pagespeed/ rel=bookmark title="Permalink to 'nginx, SPDY and ngx_pagespeed (Debian/Ubuntu)'" itemprop=url> nginx, <span class=caps>SPDY</span> and ngx_pagespeed&nbsp;(Debian/Ubuntu) </a> </h2> <section itemprop=articleBody class=summary-content> <p>I decided to rebuild syslog.tv as pure <span class=caps>HTML</span> using <span class=caps>RST</span> and <a href=https://blog.getpelican.com/ class="reference external">Pelican</a> and rebrand it as kura.gg.</p> <p>In doing so I decided I would go all out and use <a class="reference external" href=https://www.chromium.org/spdy><span class=caps>SPDY</span></a> and <a class="reference external" href=https://nginx.org/en/docs/http/ngx_http_spdy_module.html>ngx_pagespeed</a> (<a href=https://developers.google.com/speed/ class="reference external">mod_pagespeed</a>) for fun to see exactly what I could do.</p> <p>Sadly no version of nginx has been officially released with <span class=caps>SPDY</span> or ngx_pagespeed enabled, you can compile nginx from source to enable <span class=caps>SPDY</span> so I thought I would go ahead and do it, releasing some Debian packages in the process.</p> <p>After compiling nginx from the source package available at the <a class="reference external" href=https://launchpad.net/~nginx>Ubuntu <span class=caps>PPA</span></a>, I decided I would go further and compile in ngx_pagespeed.</p> <div class=section id=installing> <h2>Installing</h2> <p>I have released the 4 required debian packages below (please note they are only available for amd64);</p> <table class=docutils> <thead> <tr><th class=head><span class=caps>FILE</span></th> <th class=head><span class=caps>GPG</span></th> <th class=head><span class=caps>MD5</span></th> <th class=head><span class=caps>SHA1</span></th> </tr> </thead> <tbody> <tr><td><a class="reference external" href=/files/nginx_1.4.1_all.deb>nginx_1.4.1_all.deb</a></td> <td><a class="reference external" href=/files/nginx_1.4.1_all.deb.asc>owGMl1NwLw…</a></td> <td><a class="reference external" href=/files/nginx_1.4.1_all.deb.md5>42f790a1f6…</a></td> <td><a class="reference external" href=/files/nginx_1.4.1_all.deb.sha1>f4495055e9…</a></td> </tr> <tr><td><a class="reference external" href=/files/nginx-common_1.4.1_all.deb>nginx-common_1.4.1_all.deb</a></td> <td><a class="reference external" href=/files/nginx-common_1.4.1_all.deb.asc>owGMt1NwJU…</a></td> <td><a class="reference external" href=/files/nginx-common_1.4.1_all.deb.md5>ca4ec5688d…</a></td> <td><a class="reference external" href=/files/nginx-common_1.4.1_all.deb.sha1>633bfc2eaa …</a></td></tr></tbody></table></div> </section> <div class="eevee-divider mdl-color--accent" role=presentation></div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content="autocompletion,bash,port forwarding"> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2013-03-12T18:00:00+00:00 itemprop=datePublished> 12 Mar 2013 </time>&nbsp;-- < 1 min read </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2013/03/12/bash-portforwarding-with-autocompletion/ rel=bookmark title="Permalink to 'Bash portforwarding with autocompletion'" itemprop=url> Bash portforwarding with&nbsp;autocompletion </a> </h2> <section itemprop=articleBody class=summary-content> <p>I spend a <span class=caps>LOT</span> of time with tunnels open to multiple machines, connecting directly to PostgreSQL, RabbitMQ and many other services all via <span class=caps>SSH</span>.</p> <p>I have written several helper functions and this is the final version that I created in a small competition with <a class="reference external" href=https://twitter.com/codeinthehole>@codeinthehole.</a></p> <p>Gist removed. Sorry.</p> <div class=section id=installation> <h2>Installation</h2> <p>Simply add the contents to <em>~/.bashrc</em></p> </div> <div class=section id=usage> <h2>Usage</h2> <p>Usage is pretty simply, just called portforward from the command line, pressing &lt;<span class=caps>TAB</span>&gt; as you type in a server name from your ~/.ssh/config file and the same with the port.</p> <div class=highlight><pre><span></span>portforward sy&lt;TAB&gt;
</pre></div> <p>Will become:</p> <div class=highlight><pre><span></span>portforward syslog.tv
</pre></div> <p>And finally</p> <div class=highlight><pre><span></span>portforward syslog.tv <span class=m>15672</span>
</pre></div> </div> </section> <div class="eevee-divider mdl-color--accent" role=presentation></div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=denyhosts,unban> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2012-11-13T17:45:00+00:00 itemprop=datePublished> 13 Nov 2012 </time>&nbsp;-- < 1 min read </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2012/11/13/unbanning-an-ip-a-block-of-ips-or-a-block-of-ips-from-denyhost/ rel=bookmark title="Permalink to 'Unbanning an IP, multiple IPs or a block of IPs from DenyHost'" itemprop=url> Unbanning an <span class=caps>IP</span>, multiple IPs or a block of IPs from&nbsp;DenyHost </a> </h2> <section itemprop=articleBody class=summary-content> <p>I wrote this little Python program a while ago and now people are starting to email me about it, asking for it to be part of the DenyHosts Debian packages so I figured I’d write a quick article on it.</p> <p>If you’re like my developers, you’ll find yourself getting banned from servers all the time and have to come speak to someone like me (your sys engineer/admin), or maybe you are an admin and are sick of people banning themselves and want and easy way to unban them.</p> <p>So give this a try:</p> <p><a class="reference external" href=https://github.com/kura/denyhosts-unban>https://github.com/kura/denyhosts-unban</a></p> <p>From the GitHub page you can download either the tarballs, zipballs or a Debian .deb package. Install it using the instructions in the <span class=caps>README</span> and you’re good to go.</p> <div class=section id=unban> <h2>Unban</h2> <p>Unbanning is simple, you can either unban a single <span class=caps>IP</span> using:</p> <div class=highlight><pre><span></span>sudo denyhosts-unban <span class=m>10</span>.0.0.1 …</pre></div></div> </section> <div class="eevee-divider mdl-color--accent" role=presentation></div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2012-11-08T11:47:00+00:00 itemprop=datePublished> 08 Nov 2012 </time>&nbsp;-- 1 min read </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2012/11/08/java-6-on-ubuntu-12-04-including-tomcat-6/ rel=bookmark title="Permalink to 'Java 6 on Ubuntu 12.04 (including Tomcat 6)'" itemprop=url> Java 6 on Ubuntu 12.04 (including Tomcat&nbsp;6) </a> </h2> <section itemprop=articleBody class=summary-content> <p>If like me you run in to issue when using OpenJDK, my issues come from it’s memory problems when you’re allocating and using large amounts of memory - mostly for Solr where we’re concerned but obviously I’d switch for other high memory usage instances too.</p> <p>So without further ado, lets get the installation going.</p> <p>You’ll need Debian’s “add-apt-repository”, on servers this doesn’t usually come by default so we’ll need to install it.</p> <div class=highlight><pre><span></span>sudo apt-get install python-software-properties
</pre></div> <p>Next we need to add Java’s <span class=caps>PPA</span>.</p> <div class=highlight><pre><span></span>sudo add-apt-repository ppa:sun-java-community-team/sun-java6
</pre></div> <p>Once this is done we’ll need to update our apt caches and install Java 6.</p> <div class=highlight><pre><span></span>sudo apt-get install sun-java6-jdk
</pre></div> <p>Now that this is installed we should get the Java version, remember it for future.</p> <div class=highlight><pre><span></span>java -version
</pre></div> <p>You’ll get something like this</p> <div class=highlight><pre><span></span>java version <span class=s2>"1.6.0_20"</span> OpenJDK Runtime Environment <span class=o>(</span>IcedTea6 <span class=m>1 …</span></pre></div> </section> <div class="eevee-divider mdl-color--accent" role=presentation></div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=/etc/shadow,mkpasswd,password,sha-512,sha512> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2012-10-11T09:56:00+01:00 itemprop=datePublished> 11 Oct 2012 </time>&nbsp;-- < 1 min read </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2012/10/11/how-to-generate-an-etcshadow-compatible-password/ rel=bookmark title="Permalink to 'How to generate an /etc/shadow compatible password'" itemprop=url> How to generate an /etc/shadow compatible&nbsp;password </a> </h2> <section itemprop=articleBody class=summary-content> <p>You’ll need mkpasswd, on Debian 6 and Ubuntu 12.04 you can install this using:</p> <div class=highlight><pre><span></span>sudo apt-get install whois
</pre></div> <p>It is pretty weird that it comes with the whois package though…</p> <p>And then run</p> <div class=highlight><pre><span></span>mkpasswd -m sha-512
</pre></div> </section> <div class="eevee-divider mdl-color--accent" role=presentation></div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=blackhole,blackhole.io,email,mail> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2012-06-26T23:05:00+01:00 itemprop=datePublished> 26 Jun 2012 </time>&nbsp;-- 3 min read </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2012/06/26/send-all-email-to-a-blackhole-never-gets-delivered-test-delivery-speed-and-much-more-using-blackhole-io/ rel=bookmark title="Permalink to 'Send all email to a blackhole (never gets delivered), test delivery speed and much more using blackhole.io'" itemprop=url> Send all email to a blackhole (never gets delivered), test delivery speed and much more using&nbsp;blackhole.io </a> </h2> <section itemprop=articleBody class=summary-content> <p>I have built and released an open-source email server in the past for testing send rates and speeds, this project was called SimpleMTA and is available <a href=https://syslog.tv/simplemta/ class="reference external">here</a>.</p> <p>Recently I have rebuilt this project for an internal project at work using the <a href=https://www.tornadoweb.org/ class="reference external">Tornado framework</a>. Sadly this project as a whole cannot be released but a version of this code will be released in the near future.</p> <p>Until that is released I have launched a new service called <a class="reference external" href=https://blackhole.io>blackhole.io</a></p> <div class=section id=what-is-blackhole-io> <h2>What is blackhole.io?</h2> <p>blackhole.io is a completely open mail relay that forgets anything that is sent to it, meaning there is no auth requirements and no storage of email data within the service. Literally anyone can send anything to it and have it never get delivered.</p> <p>You can even send commands out of order, meaning you can call the <span class=caps>DATA</span> command without ever using <span class=caps>HELO</span>, <span class=caps>MAIL</span> <span class=caps>FROM</span> or <span class=caps>RCPT</span> <span class=caps>TO …</span></p></div> </section> <div class="eevee-divider mdl-color--accent" role=presentation></div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=aws,fstab,fuse,mount,s3,s3fs> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2012-03-03T16:05:00+00:00 itemprop=datePublished> 03 Mar 2012 </time>&nbsp;-- 3 min read </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2012/03/03/mount-amazon-s3-bucket-locally/ rel=bookmark title="Permalink to 'Mount Amazon S3 bucket locally on Debian 5 & 6/Ubuntu 10.04'" itemprop=url> Mount Amazon S3 bucket locally on Debian 5 <span class=amp>&amp;</span> 6/Ubuntu&nbsp;10.04 </a> </h2> <section itemprop=articleBody class=summary-content> <p>I’ve recently been toying with my <a href=https://rpi.syslog.tv/ class="reference external">Raspberry Pi mirror</a> including moving it out on to Amazon’s S3. I’ve written an article on <a href=https://syslog.tv/2012/02/29/backup-a-linux-server-to-amazon-s3-on-debian-6ubuntu-10-04/ class="reference external">how to back up to S3</a>, but that isn’t enough when it comes to serving data from S3.</p> <p>I needed the ability to <span class=caps>RSYNC</span> data from the official Raspberry Pi servers on to mine and then in to S3 and for that I used <a href=https://code.google.com/p/s3fs/ class="reference external">s3fs</a> and <a href=https://fuse.sourceforge.net/ class="reference external"><span class=caps>FUSE</span></a>.</p> <div class=section id=fuse-1> <h2><span class=caps>FUSE</span></h2> <p>You can actually do this successfully without requiring <span class=caps>FUSE</span>, just by installing the s3fs binary on to your system, but this only allows the user who mounted to access the mounted bucket and also is not possible via /etc/fstab.</p> <p><span class=caps>FUSE</span> allows you to implement a filesystem within a userspace program, thus allowing us to give other users access and auto-mount using /etc/fstab.</p> </div> <div class=section id=installation> <h2>Installation</h2> <div class=section id=fuse-2> <h3>Fuse</h3> <p>Installing <span class=caps>FUSE</span> is simple</p> <div class=highlight><pre><span></span>sudo apt-get install fuse-utils
</pre></div> </div> <div class=section id=s3fs-1> <h3>s3fs</h3> <p>We …</p></div></div> </section> <div class="eevee-divider mdl-color--accent" role=presentation></div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=bruteforce,ssh> <meta itemprop=keywords content=misc> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2012-03-02T18:36:00+00:00 itemprop=datePublished> 02 Mar 2012 </time>&nbsp;-- < 1 min read </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2012/03/02/visualised-24-hours-of-ssh-attacks-against-a-single-server/ rel=bookmark title="Permalink to 'Visualised: 24 hours of SSH attacks against a single server'" itemprop=url> Visualised: 24 hours of <span class=caps>SSH</span> attacks against a single&nbsp;server </a> </h2> <section itemprop=articleBody class=summary-content> <p>24 hours of <span class=caps>SSH</span> attacks against a single server, visualised on a world map using Python.</p> <p>When a country stays lit up for more than 1 tick of the clock in the left hand corner it means that multiple attacks are happening from different <span class=caps>IP</span> addresses. An attacker is banned after;</p> <ul class=simple> <li>1 failed root login,</li> <li>3 failed user logins (including invalid users) and</li> <li>3 failed system logins.</li> </ul> <div align=center class=vimeo><iframe allowfullscreen frameborder=0 height=500 mozallowfullscreen src=https://player.vimeo.com/video/37818131 webkitallowfullscreen width=800></iframe></div><div class=section id=direct-links> <h2>Direct links</h2> <ul class=simple> <li><a class="reference external" href=https://vimeo.com/37818131>Vimeo</a></li> <li><a class="reference external" href="https://www.youtube.com/watch?v=S_p0G2oLuDU">YouTube</a> - older version of the video with yellow colouring instead of red.</li> </ul> </div> </section> <div class="eevee-divider mdl-color--accent" role=presentation></div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=amazon,aws,backup,debian,s3,ubuntu> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2012-02-29T20:55:00+00:00 itemprop=datePublished> 29 Feb 2012 </time>&nbsp;-- 2 min read </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2012/02/29/backup-a-linux-server-to-amazon-s3-on-debian-6ubuntu-10-04/ rel=bookmark title="Permalink to 'Backup a Linux server to Amazon S3 on Debian 6/Ubuntu 10.04'" itemprop=url> Backup a Linux server to Amazon S3 on Debian 6/Ubuntu&nbsp;10.04 </a> </h2> <section itemprop=articleBody class=summary-content> <p>I have several servers powering syslog including it’s <a href=https://rpi.syslog.tv/ class="reference external">Raspberry Pi</a> mirror, load balancer and email servers. All of my servers are hosted using <a class="reference external" href="https://www.linode.com/?r=8d58820f89940a1a68832c0cdd53109727cfa622">Linode</a> in their London data centre and have Linode’s back-up system doing both daily and weekly snapshots.</p> <p>For the app and database servers I do server-side backups storing each website and it’s database in it’s own folder within /backup in case I require a quick back-up to fix something, rather than the server has died.</p> <p>This is all well and good but I like having an off-site backup too and for that I use <a href=https://aws.amazon.com/s3/ class="reference external">S3</a>…</p> <div class=section id=about-s3> <h2>About S3</h2> <p>Amazon’s S3 is pretty cheap and very easy to use. Because only data is going in you don’t pay a transfer fee and the cost of storage is very affordable, you can see a <a class="reference external" href=https://aws.amazon.com/s3/#pricing>pricing list here</a>.</p> <p>To do the backup I use a …</p></div> </section> <div class="eevee-divider mdl-color--accent" role=presentation></div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content="automatic update,debian,unattended-upgrades,update"> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2012-01-28T17:41:00+00:00 itemprop=datePublished> 28 Jan 2012 </time>&nbsp;-- 2 min read </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2012/01/28/automaticunattended-updates-on-debian-6-squeeze/ rel=bookmark title="Permalink to 'Automatic/Unattended updates on Debian 6 (Squeeze)'" itemprop=url> Automatic/Unattended updates on Debian 6&nbsp;(Squeeze) </a> </h2> <section itemprop=articleBody class=summary-content> <p>The unattended-upgrades package used on Debian is based on the one from Ubuntu. It is generally pretty safe in my opinion but I only ever enable it for security upgrades.</p> <div class=section id=installation> <h2>Installation</h2> <div class=highlight><pre><span></span>apt-get install unattended-upgrades apticron
</pre></div> <p><em>unattended-upgrades</em> handles the actual updates, <em>apticron</em> is used for emailing you of available updates - it is not required but I like it.</p> </div> <div class=section id=configuring-unattended-upgrades> <h2>Configuring unattended-upgrades</h2> <p>Open up <strong>/etc/apt/apt.conf.d/50unattended-upgrades</strong> and change it to the content below.</p> <pre class=literal-block>
APT::Periodic::Enable "1";
APT::Periodic::Update-Package-Lists "1";
APT::Periodic::AutocleanInterval "7";
APT::Periodic::Unattended-Upgrade "1";
Unattended-Upgrade::Mail "**YOUR_EMAIL_HERE**";

// Automatically upgrade packages from these (origin, archive) pairs
Unattended-Upgrade::Allowed-Origins {
    "${distro_id} stable";
    "${distro_id} ${distro_codename}-security";
};

// Automatically reboot *WITHOUT CONFIRMATION* if a
 // the file /var/run/reboot-required is found after the upgrade
 Unattended-Upgrade::Automatic-Reboot "false";
</pre> <p>So lets explain the above. As you can see we enable periodic updates, enable update package lists (triggers …</p></div> </section> <div class="eevee-divider mdl-color--accent" role=presentation></div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=debian,keyserver,pgp,sks,ubuntu> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2011-12-17T15:58:00+00:00 itemprop=datePublished> 17 Dec 2011 </time>&nbsp;-- < 1 min read </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2011/12/17/running-your-own-pgp-keyserver-with-sks-on-debian-6ubuntu-10-04/ rel=bookmark title="Permalink to 'Running your own PGP keyserver with SKS on Debian 6/Ubuntu 10.04'" itemprop=url> Running your own <span class=caps>PGP</span> keyserver with <span class=caps>SKS</span> on Debian 6/Ubuntu&nbsp;10.04 </a> </h2> <section itemprop=articleBody class=summary-content> <div class=section id=installation> <h2>Installation</h2> <p>To install we need to run the following command:</p> <div class=highlight><pre><span></span>sudo apt-get install -y sks
</pre></div> <p>Now we build the key database:</p> <div class=highlight><pre><span></span>sudo sks build
</pre></div> <p>And change the permissions for the sks user:</p> <div class=highlight><pre><span></span>sudo chown -R debian-sks:debian-sks /var/lib/sks/DB
</pre></div> <p>Next we need to make sks start from init, open up <strong>/etc/default/sks</strong> in your favourite editor and <strong>*initstart*</strong> to look like below:</p> <div class=highlight><pre><span></span><span class=nv>initstart</span><span class=o>=</span>yes
</pre></div> <p>Now we can start the service with:</p> <div class=highlight><pre><span></span>sudo /etc/init.d/sks start
</pre></div> <p>Your keyserver will now be up and running on port 11371.</p> </div> <div class=section id=web-interface> <h2>Web interface</h2> <p>We’ll need to create a web folder within sks with the following command:</p> <div class=highlight><pre><span></span>sudo mkdir -p /var/lib/sks/www/
</pre></div> <p>Change it’s permissions so the sks user can access it.</p> <div class=highlight><pre><span></span>sudo chown -R debian-sks:debian-sks /var/lib/sks/www
</pre></div> <p>And finally we need create a single <span class=caps>HTML</span> file for the interface, I have provided that …</p></div> </section> <div class="eevee-divider mdl-color--accent" role=presentation></div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=debian,git,gitosis,gitweb,ubuntu> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2011-12-17T15:40:00+00:00 itemprop=datePublished> 17 Dec 2011 </time>&nbsp;-- 4 min read </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2011/12/17/host-git-repositories-with-git-gitosis-and-gitweb-on-debian-6ubuntu-10-04/ rel=bookmark title="Permalink to 'Host git repositories with git, gitosis and gitweb on Debian 6/Ubuntu 10.04'" itemprop=url> Host git repositories with git, gitosis and gitweb on Debian 6/Ubuntu&nbsp;10.04 </a> </h2> <section itemprop=articleBody class=summary-content> <div class=section id=installation> <h2>Installation</h2> <p>First up we’ll need to install git and some Python tools to get Gitosis installed.</p> <div class=highlight><pre><span></span>sudo apt-get install -y git-core gitweb python-setuptools
</pre></div> <p>Next we have to clone gitosis from it’s git repository and install it.</p> <div class=highlight><pre><span></span><span class=nb>cd</span> /tmp
git clone git://eagain.net/gitosis.git
<span class=nb>cd</span> gitosis
sudo python setup.py install
</pre></div> </div> <div class=section id=adding-your-git-user> <h2>Adding your git user</h2> <div class=highlight><pre><span></span>sudo adduser --system --shell /bin/sh --gecos <span class=s1>'git version control'</span> --group --disabled-password --home /home/git git
</pre></div> <p>The above command creates a new system user with <strong>/bin/sh</strong> as it’s shell with <strong>no password</strong> and a homedir of <strong>/home/git/</strong> and also creates a group with the same name.</p> </div> <div class=section id=initialising-gitosis> <h2>Initialising gitosis</h2> <p>You’ll need an <span class=caps>SSH</span> key for this, if you have one simply copy the contents of it to your new git server, if you do not have one then you can generate one on your machine using</p> <div class=highlight><pre><span></span>ssh-keygen
</pre></div> <p>And then …</p></div> </section> <div class="eevee-divider mdl-color--accent" role=presentation></div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content="kernel panic,oom,reboot"> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2011-10-25T10:26:00+01:00 itemprop=datePublished> 25 Oct 2011 </time>&nbsp;-- 1 min read </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2011/10/25/rebooting-on-oom/ rel=bookmark title="Permalink to 'Rebooting on OOM'" itemprop=url> Rebooting on <span class=caps>OOM</span> </a> </h2> <section itemprop=articleBody class=summary-content> <p><strong>*I would generally not advise using this unless you have skill at debugging why <span class=caps>OOM</span> has spawned and also debugging kernel panics after they happen, from logs.*</strong></p> <p>It is possible to configure your kernel to panic when <span class=caps>OOM</span> is spawned, which in itself is not useful but, coupled with a kernel option for auto-rebooting a system when the kernel panics it can be a very useful tool.</p> <p>Think before implementing this and use at your own risk, I take zero responsibility for you using this.</p> <div class=highlight><pre><span></span>sudo sysctl vm.panic_on_oom<span class=o>=</span><span class=m>1</span>
sudo sysctl kernel.panic<span class=o>=</span>X <span class=c1># X is the amount of seconds to wait before rebooting</span>
</pre></div> <p><strong>*<span class=caps>DO</span> <span class=caps>NOT</span> <span class=caps>FORGET</span> <span class=caps>TO</span> <span class=caps>CHANGE</span> X*</strong></p> <p>This will inject the changes in to a system that is currently running but will be forgotten on reboot so use the lines below to save permanently.</p> <div class=highlight><pre><span></span>sudo <span class=nb>echo</span> <span class=s2>"vm.panic_on_oom=1"</span> &gt;&gt; /etc/sysctl.conf …</pre></div> </section> <div class="eevee-divider mdl-color--accent" role=presentation></div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content="mk livestatus,nagios,nagios 3,nagios broker,xinetd"> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2011-10-13T23:17:00+01:00 itemprop=datePublished> 13 Oct 2011 </time>&nbsp;-- 1 min read </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2011/10/13/nagios3-mk-livestatus-xinetd/ rel=bookmark title="Permalink to 'Nagios3 + MK Livestatus + xinetd on Debian 6/Ubuntu'" itemprop=url> Nagios3 + <span class=caps>MK</span> Livestatus + xinetd on Debian&nbsp;6/Ubuntu </a> </h2> <section itemprop=articleBody class=summary-content> <div class=section id=preparation> <h2>Preparation</h2> <p>First we need to make sure we have all the stuff we need to compile mk livestatus and run it</p> <div class=highlight><pre><span></span>sudo apt-get install make build-essential xinetd ucspi-unix
</pre></div> </div> <div class=section id=mk-livestatus> <h2><span class=caps>MK</span> Livestatus</h2> <p>Grab the mk livestatus source from <a class="reference external" href=https://mathias-kettner.de/check_mk_download.html>here</a>, currently it’s version 1.1.10p3 but update the commands below to match your version.</p> <div class=highlight><pre><span></span>wget https://mathias-kettner.de/download/mk-livestatus-1.1.10p3.tar.gz
tar xvzf mk-livestatus-1.1.10p3.tar.gz
<span class=nb>cd</span> mk-livestatus-1.1.10p3
./configure
make
sudo make install
</pre></div> </div> <div class=section id=xinetd> <h2>Xinetd</h2> <p>Now that it’s compiled we need to write a xinetd config for it, create a new file called <strong>/etc/xinetd.d/livestatus</strong> and put the following in it</p> <pre class=literal-block>
service livestatus {
    type = UNLISTED
    port = 6557
    socket_type = stream
    protocol = tcp
    wait = no
    cps = 100 3
    instances = 500
    per_source = 250
    flags = NODELAY
    user = nagios
    server = /usr/bin/unixcat
    server_args = /var/lib/nagios3/rw/live
    only_from = 127.0.0 …</pre></div> </section> <div class="eevee-divider mdl-color--accent" role=presentation></div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=apache2,nginx,wordpress,wp-super-cache> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2011-09-30T23:21:00+01:00 itemprop=datePublished> 30 Sep 2011 </time>&nbsp;-- 2 min read </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2011/09/30/nginx-config-for-reverse-proxying-wordpress-wp-super-cache-and-keeping-the-load-off-apache2/ rel=bookmark title="Permalink to 'nginx config for reverse proxying Wordpress & WP Super Cache and keeping the load off Apache2'" itemprop=url> nginx config for reverse proxying Wordpress <span class=amp>&amp;</span> <span class=caps>WP</span> Super Cache and keeping the load off&nbsp;Apache2 </a> </h2> <section itemprop=articleBody class=summary-content> <div class=section id=the-point> <h2>The point</h2> <p>The whole point of this is to get as much load off of Apache as possible to keep the server running nice and smoothly.</p> </div> <div class=section id=configuration> <h2>Configuration</h2> <p>The configuration below will mean that nginx will serve basically everything;</p> <ul class=simple> <li>static files</li> <li>uploaded files and</li> <li>cached content</li> </ul> <p>simply replace the <strong><span class=caps>VARIABLES</span></strong> below and everything should be good to go, if copy-pasting from below isn’t working properly you can download a full copy from <a class="reference external" href=/files/2011/09/server.txt>here</a>.</p> <div class=highlight><pre><span></span><span class=k>server</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>  </span><span class=kn>listen</span><span class=w> </span><span class=mi>80</span><span class=p>;</span><span class=w></span>
<span class=w>  </span><span class=kn>server_name</span><span class=w> </span><span class=s>**DOMAIN_HERE**</span><span class=p>;</span><span class=w></span>
<span class=w>  </span><span class=kn>access_log</span><span class=w> </span><span class=s>/var/log/nginx/access.**DOMAIN_HERE**.log</span><span class=p>;</span><span class=w></span>

<span class=w>  </span><span class=kn>gzip</span><span class=w> </span><span class=no>on</span><span class=p>;</span><span class=w></span>
<span class=w>  </span><span class=kn>gzip_disable</span><span class=w> </span><span class=s>msie6</span><span class=p>;</span><span class=w> </span><span class=c1># disable gzip for IE6</span>
<span class=w>  </span><span class=kn>gzip_static</span><span class=w> </span><span class=no>on</span><span class=p>;</span><span class=w></span>
<span class=w>  </span><span class=kn>gzip_comp_level</span><span class=w> </span><span class=mi>9</span><span class=p>;</span><span class=w> </span><span class=c1># highest level of compression</span>
<span class=w>  </span><span class=kn>gzip_proxied</span><span class=w> </span><span class=s>any</span><span class=p>;</span><span class=w></span>
<span class=w>  </span><span class=kn>gzip_types</span><span class=w> </span><span class=s>text/plain</span><span class=w> </span><span class=s>text/css</span><span class=w> </span><span class=s>application/x-javascript</span><span class=w> </span><span class=s>text/xml</span><span class=w> </span><span class=s>application/xml</span><span class=w> </span><span class=s>application/xml+rss</span><span class=w> </span><span class=s>text/javascript</span><span class=p>;</span><span class=w></span>

<span class=w>  </span><span class=kn>proxy_redirect</span><span class=w> </span><span class=no>off</span><span class=p>;</span><span class=w></span>
<span class=w>  </span><span class=kn>proxy_set_header</span><span class=w> </span><span class=s>Host</span><span class=w> </span><span class=nv>$host</span><span class=p>;</span><span class=w></span>
<span class=w>  </span><span class=kn>proxy_set_header</span><span class=w> </span><span class=s>X-Real-IP</span><span class=w> </span><span class=nv>$remote_addr</span><span class=p>;</span><span class=w></span>
<span class=w>  </span><span class=kn>proxy_set_header</span><span class=w> </span><span class=s>X-Forwarded-For</span><span class=w> </span><span class=nv>$proxy_add_x …</span></pre></div></div> </section> <div class="eevee-divider mdl-color--accent" role=presentation></div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content="http,https,load,load balancing,pound,ssl,ssl offloading,ssl termination"> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2011-09-29T23:15:00+01:00 itemprop=datePublished> 29 Sep 2011 </time>&nbsp;-- 2 min read </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2011/09/29/load-balancing-httphttps-with-pound-on-debian-6ubuntu/ rel=bookmark title="Permalink to 'Load balancing HTTP/HTTPS with Pound on Debian 6/Ubuntu'" itemprop=url> Load balancing <span class=caps>HTTP</span>/<span class=caps>HTTPS</span> with Pound on Debian&nbsp;6/Ubuntu </a> </h2> <section itemprop=articleBody class=summary-content> <p>Pound is a great little load balancer, it’s fast, opensource and supports <span class=caps>SSL</span> termination, which is great!</p> <div class=section id=install> <h2>Install</h2> <div class=highlight><pre><span></span>sudo apt-get install pound
</pre></div> </div> <div class=section id=configuration> <h2>Configuration</h2> <p>The default configuration should be pretty good for most purposes, but feel free to tweak as you require.</p> <div class=section id=http> <h3><span class=caps>HTTP</span></h3> <p>We’ll first look at load balancing <span class=caps>HTTP</span>, in case you don’t want or need <span class=caps>HTTPS</span> load balancing.</p> <p>We’ll need delete all the content within <em>ListenHTTP</em> block, once done it should look like this</p> <pre class=literal-block>
ListenHTTP
End
</pre> <p>Now we add an address and port to listen on and finally a line to remove an <span class=caps>HTTP</span> header</p> <pre class=literal-block>
ListenHTTP
    Address 0.0.0.0 # all interfaces
    Port 80
    HeadRemove "X-Forwarded-For"
End
</pre> <p>This is a basic configuration, for each backend we want to load balance we’ll need to add a service within that listener.</p> <p>You’ll notice we’re removing incoming headers called <em>X-Forwarded-For</em>, this is to make …</p></div></div> </section> <div class="eevee-divider mdl-color--accent" role=presentation></div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=debian,email,greylist,mail,postfix,postgrey,spam,ubuntu> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2011-09-24T21:29:00+01:00 itemprop=datePublished> 24 Sep 2011 </time>&nbsp;-- 2 min read </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2011/09/24/postfix-spam-protection-with-greylisting-using-postgrey-on-debian-6ubuntu/ rel=bookmark title="Permalink to 'Postfix spam protection with greylisting using Postgrey on Debian 6/Ubuntu'" itemprop=url> Postfix spam protection with greylisting using Postgrey on Debian&nbsp;6/Ubuntu </a> </h2> <section itemprop=articleBody class=summary-content> <p>A simple yet effective method for protecting your mail server from spam is to use greylisting. In simple terms, when an email is received the server will temporarily reject it with a 450 response code claiming that the server is busy, the sending server should then attempt to try to deliver at a later point in time, if enough time has passed the recipient server will then accept the incoming mail and whitelist the send address for a period of time.</p> <p>This is effective because most spam servers are configured not to retry the send whereas real mail servers generally will retry. This sadly does not protect against spam coming from comprised mail servers or accounts like on Hotmail.com.</p> <div class=section id=installation> <h2>Installation</h2> <div class=highlight><pre><span></span>sudo apt-get install postgrey
</pre></div> </div> <div class=section id=configuring-postgrey> <h2>Configuring Postgrey</h2> <p>By default Postgrey runs on <em>127.0.0.1:60000</em>, which is the local loopback interface so it is not exposed to the …</p></div> </section> </article> <div class=eevee-page-spacer role=presentation></div> </div> </div> </main> <div class="eevee-pagination__container eevee-container mdl-grid"> <div role=presentation class="mdl-cell mdl-cell--2-col mdl-cell--hide-tablet mdl-cell--hide-phone"> </div> <div class="mdl-color-text--grey-800 mdl-cell mdl-cell--8-col"> <nav class="eevee-pagination mdl-cell mdl-cell--12-col" itemscope itemtype=http://schema.org/SiteNavigationElement aria-label=Pagination> <a href=https://kura.gg/authors/kura/page/2/ class=eevee-nav__button itemprop=url rel=bookmark title=Newer> <button class="mdl-button mdl-button--icon mdl-color--white mdl-color-text--grey-900" role=presentation> <i class=material-icons>&#xE5C4;</i> </button> Newer </a> <div class=eevee-spacer></div> <a href=https://kura.gg/authors/kura/page/4/ class=eevee-nav__button itemprop=url rel=bookmark title=Older> Older <button class="mdl-button mdl-button--icon mdl-color--white mdl-color-text--grey-900" role=presentation> <i class=material-icons>&#xE5C8;</i> </button> </a> </nav> </div> </div> <footer class=mdl-mega-footer itemscope itemtype=http://schema.org/SiteNavigationElement> <div class=mdl-mega-footer--top-section> <div class=mdl-mega-footer--drop-down-section> <ul class=mdl-mega-footer--link-list> <li> <a href=#top itemprop=url title="Back to the top of the page"> Back to the top of the page </a> </li> </ul> </div> </div> <div class=mdl-mega-footer--middle-section itemscope itemtype=http://schema.org/SiteNavigationElement aria-label="Footer navigation"> <div class=mdl-mega-footer--drop-down-section> <h1 class=mdl-mega-footer--heading>Menu</h1> <ul class=mdl-mega-footer--link-list> <li> <a href=/contact/ itemprop=url rel=bookmark title=Contact> <i class=material-icons aria-hidden=true>&#xE0B7;</i> Contact </a> </li> <li> <a href=https://kura.gg/archives/ itemprop=url rel=bookmark title=Archives> <i class=material-icons>&#xE02F;</i> Archives </a> </li> <li> <a href=https://kura.gg/feeds/rss.xml title=RSS itemprop=url> <i class=material-icons>&#xE0E5;</i> RSS </a> </li> </ul> </div> <div class=mdl-mega-footer--drop-down-section> <h1 class=mdl-mega-footer--heading>Social</h1> <ul class=mdl-mega-footer--link-list> <li> <a href=https://github.com/kura itemprop=url rel=bookmark title=GitHub> <i class=fa aria-hidden=true>&#xF09B;</i> Github </a> </li> </ul> </div> <div class=mdl-mega-footer--drop-down-section> <h1 class=mdl-mega-footer--heading>Links</h1> <ul class=mdl-mega-footer--link-list> <li> <a href=/blackhole itemprop=url rel=bookmark title=Blackhole> <i class=material-icons aria-hidden=true>&#xE86F;</i> Blackhole </a> </li> <li> <a href=/eevee itemprop=url rel=bookmark title=Eevee> <i class=material-icons aria-hidden=true>&#xE871;</i> Eevee </a> </li> <li> <a href=/hauntr itemprop=url rel=bookmark title=Hauntr> <i class=material-icons aria-hidden=true>&#xE871;</i> Hauntr </a> </li> <li> <a href=/ghastly itemprop=url rel=bookmark title=Ghastly> <i class=material-icons aria-hidden=true>&#xE871;</i> Ghastly </a> </li> <li> <a href=/pelican-plugins itemprop=url rel=bookmark title="Pelican Plugins"> <i class=material-icons aria-hidden=true>&#xE86F;</i> Pelican Plugins </a> </li> </ul> </div> </div> <div class=mdl-mega-footer--bottom-section> <div class=mdl-logo> <a href=https://kura.gg rel=bookmark itemprop=url title=kura.gg> kura.gg </a> </div> <ul class="eevee-footer mdl-mega-footer--link-list"> <li>Powered by love &amp; rainbow sparkles.</li> <li>Source code and content released under the <a href=/license/ title="MIT license">MIT license</a>.</li> </ul> </div> </footer> </div> </body> </html>