<!DOCTYPE html><!--

                                      |
                                     /|
                                   ,' |
                                  .   |
                                    | |
                                 ' '| |
                                / / | |
       _,.-\"\"--._              / /  | |
     ,'          `.           j '   ' '
   ,'              `.         ||   / ,                         ___..--,
  /                  \\        ' `.'`.-.,-\".  .       _..---\"\"'' __, ,'
 /                    \\        \\` .\"`      `\"'\\   ,'\"_..--''\"\"\"'.'.'
.                      .      .'-'             \\,' ,'         ,','
|                      |      ,`               ' .`         .' /
|                      |     /          ,\"`.  ' `-. _____.-' .'
'                      |..---.|,\".      | | .  .-'\"\"   __.,-'
 .                   ,'       ||,|      |.' |    |\"\"`'\"
  `-._   `._.._____  |        || |      `._,'    |
      `.   .       `\".     ,'\"| \"  `'           ,+.
        \\  '         |    '   |   .....        .'  `.
         .'          '     7  \".              ,'     \\
                   ,'      |    `..        _,'      F
                  .        |,      `'----''         |
                  |      ,\"j  /                   | '
                  `     |  | .                 | `,'
                   .    |  `.|                 |/
                    `-..'   ,'                .'
                            | \\             ,''
                            |  `,'.      _,' /
                            |    | ^.  .'   /
                             `-'.' j` V    /
                                   |      /
                                   |     /
                                   |   ,'
                                    `\"\"

//--><html lang=en> <head><meta charset=utf-8><meta name=viewport content="width=device-width, initial-scale=1.0, minimum-scale=1.0"><link rel=alternate href=https://kura.gg hreflang=en><link rel=dns-prefetch href=https://kura.gg><link href=https://kura.gg/feeds/rss.xml type=application/rss+xml rel=alternate title=kura.gg><link href=https://kura.gg/feeds/atom.xml type=application/atom+xml rel=alternate title=kura.gg><meta property=og:site_name content=kura.gg><meta property=og:type content=article><meta property=og:title content="Shields for PyPI packages"><meta content=https://kura.gg/2013/12/24/shields-for-pypi-packages/ property=og:url><meta property=og:description content="Some time back in April 2013 I was bored and looking for a new project to keep my attention, if only for a short period of time. My colleague @codeinthehole had an idea but no time to implement it, this idea was to have shields like those of travis-ci (shown below) but displaying package download counts. Tech stack From the very start I decided to use Tornado framework, although this may change in the future. The original plan was to generate the images using Pillow (PIL) and then simply cache them to disk. I decided it would make far more sense to do this using Varnish and not have to worry about it working as expected. Manually generating the images The images were originally generated from a base template using Pillow, but sadly Python’s image manipulation is not very good, especially it’s text manipulation and the shields could …"><meta property=og:image content=https://kura.gg/2013/12/24/shields-for-pypi-packages/index.png><meta property=og:image:width content=1920><meta property=og:image:height content=1080><meta property=twitter:title content="Shields for PyPI packages"><meta content=https://kura.gg/2013/12/24/shields-for-pypi-packages/ property=twitter:url><meta property=twitter:description content="Some time back in April 2013 I was bored and looking for a new project to keep my attention, if only for a short period of time. My colleague @codeinthehole had an idea but no time to implement it, this idea was to have shields like those of travis-ci (shown below) but displaying package download counts. Tech stack From the very start I decided to use Tornado framework, although this may change in the future. The original plan was to generate the images using Pillow (PIL) and then simply cache them to disk. I decided it would make far more sense to do this using Varnish and not have to worry about it working as expected. Manually generating the images The images were originally generated from a base template using Pillow, but sadly Python’s image manipulation is not very good, especially it’s text manipulation and the shields could …"><meta property=twitter:image content=https://kura.gg/2013/12/24/shields-for-pypi-packages/index.png><meta property=twitter:card content=summary_large_image><meta property=twitter:image:width content=1920><meta property=twitter:image:height content=1080><link rel=icon href=/favicon.png type=image/png sizes="16x16 32x32 48x48 64x64 128x128 256x256"><link rel=icon href=/favicon.ico type=image/vnd.microsoft.icon sizes="16x16 32x32 48x48 64x64 128x128 256x256"><title>Shields for PyPI packages</title></head> <body> <div class="eevee-layout mdl-layout mdl-js-layout mdl-color--grey-50"> <header class="eevee-header mdl-color--grey-50 mdl-color-text--grey-800" itemscope itemtype=http://schema.org/WPHeader> <div class=mdl-layout__header-row> <div aria-expanded=false role=button tabindex=0 class="mdl-layout__drawer-button mdl-color-text--accent eevee-mobile-button mdl-layout--small-screen-only"> <i class=material-icons>&#xE5D2;</i> </div> <span class="eevee-logo mdl-color-text--accent mdl-layout-title"> <h2 id=top> <a href=https://kura.gg rel=bookmark title=kura.gg> kura.gg </a> </h2> </span> <div class=mdl-layout-spacer role=presentation></div> <nav class="eevee-nav mdl-navigation mdl-layout--large-screen-only" itemscope itemtype=http://schema.org/SiteNavigationElement aria-label="Header navigation"> <a class="mdl-color-text--accent mdl-navigation__link" href=/eevee/ itemprop=url rel=bookmark title=Eevee> <i class=material-icons aria-hidden=true>&#xE871;</i> Eevee </a> <a class="mdl-color-text--accent mdl-navigation__link" href=/contact/ itemprop=url rel=bookmark title=Contact> <i class=material-icons aria-hidden=true>&#xE0B7;</i> Contact </a> <a class="mdl-color-text--accent mdl-navigation__link" href=/software/ itemprop=url rel=bookmark title=Software> <i class=material-icons aria-hidden=true>&#xE86F;</i> Software </a> <a class="mdl-color-text--accent mdl-navigation__link" href=https://kura.gg/archives/ itemprop=url rel=bookmark title=Archives> <i class=material-icons>&#xE02F;</i> Archives </a> <a class="mdl-color-text--accent mdl-navigation__link" href=https://kura.gg/feeds/rss.xml title=RSS itemprop=url> <i class=material-icons>&#xE0E5;</i> RSS </a> </nav> </div> </header> <div class="eevee-mobile-header mdl-layout__drawer mdl-color--white" aria-hidden=true> <span class=mdl-layout-title> <h2 class="eevee-mobile-logo mdl-color-text--accent"> kura.gg </h2> </span> <div class="mdl-navigation mdl-color--white"> <nav class="eevee-nav mdl-navigation" itemscope itemtype=http://schema.org/SiteNavigationElement aria-label="Header navigation"> <a class="mdl-color-text--accent mdl-navigation__link" href=https://kura.gg itemprop=url rel=bookmark> <i class=material-icons aria-hidden=true> &#xE88A; </i> Home </a> <a class="mdl-color-text--accent mdl-navigation__link" href=/eevee/ itemprop=url rel=bookmark title=Eevee> <i class=material-icons aria-hidden=true>&#xE871;</i> Eevee </a> <a class="mdl-color-text--accent mdl-navigation__link" href=/contact/ itemprop=url rel=bookmark title=Contact> <i class=material-icons aria-hidden=true>&#xE0B7;</i> Contact </a> <a class="mdl-color-text--accent mdl-navigation__link" href=/software/ itemprop=url rel=bookmark title=Software> <i class=material-icons aria-hidden=true>&#xE86F;</i> Software </a> <a class="mdl-color-text--accent mdl-navigation__link" href=https://kura.gg/archives/ itemprop=url rel=bookmark title=Archives> <i class=material-icons>&#xE02F;</i> Archives </a> <a class="mdl-color-text--accent mdl-navigation__link" href=https://kura.gg/feeds/rss.xml title=RSS itemprop=url> <i class=material-icons>&#xE0E5;</i> RSS </a> </nav> </div> </div> <div class="eevee-ribbon mdl-color--primary-dark" role=presentation> </div> <main class="eevee-main mdl-layout__content"> <div class="eevee-container mdl-grid"> <div role=presentation class="mdl-cell mdl-cell--2-col mdl-cell--hide-tablet mdl-cell--hide-phone"> </div> <div class="eevee-content mdl-color--white mdl-shadow--2dp mdl-color-text--grey-800 mdl-cell mdl-cell--8-col" aria-label="Main content"> <article itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=python,pypi,shields> <meta itemprop=keywords content=coding> <div class=eevee-share> <ul class="social-share mdl-navigation"> <li class="social-share__link social-share__link--twitter"> <a href="https://twitter.com/intent/tweet?text=Shields%20for%20PyPI%20packages&url=https%3A//kura.gg/2013/12/24/shields-for-pypi-packages/" title="Share 'Shields for PyPI packages' on Twitter" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235'); return false;"> <i class=fa aria-hidden=true>&#xF099;</i> </a> </li> <li class="social-share__link social-share__link--facebook"> <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A//kura.gg/2013/12/24/shields-for-pypi-packages/" title="Share 'Shields for PyPI packages' on Facebook" onclick="window.open(this.href, 'facebook-share', 'width=580,height=296'); return false;"> <i class=fa aria-hidden=true>&#xF09A;</i> </a> </li> <li class="social-share__link social-share__link--email"> <a href="mailto:?subject=Shields%20for%20PyPI%20packages&body=I%20thought%20you%20might%20like%20'Shields%20for%20PyPI%20packages'%20--%20https%3A//kura.gg/2013/12/24/shields-for-pypi-packages/" title="Share 'Shields for PyPI packages' via email"> <i class=material-icons aria-hidden=true> &#xE0E1; </i> </a> </li> </ul> </div> <div class=eevee-article> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2013-12-24T14:07:00+00:00 itemprop=datePublished> 24 Dec 2013 </time>&nbsp;-- 2 min read </div> <h1 itemprop=name> <a href=https://kura.gg/2013/12/24/shields-for-pypi-packages/ rel=bookmark title="Permalink to 'Shields for PyPI packages'" itemprop=url> Shields for PyPI&nbsp;packages </a> </h1> <section class=eevee-toc> <h2 id=toc> Contents </h2> <nav class=eevee-toc-ribbon> <div class=toc id> <p class=topic-title>Contents</p> <ul class=simple> <li><a class="reference internal" href=#tech-stack id=id1>Tech stack</a></li> <li><a class="reference internal" href=#manually-generating-the-images id=id2>Manually generating the images</a></li> <li><a class="reference internal" href=#crate-io-shuts-down id=id3>crate.io shuts down</a></li> <li><a class="reference internal" href=#b-repl-ca id=id4>b.repl.ca</a></li> <li><a class="reference internal" href=#eggs-wheels-and-licenses id=id5>Eggs, wheels and licenses</a></li> </ul> </div> </nav> </section> <section itemprop=articleBody class=article-content> <p>Some time back in April 2013 I was bored and looking for a new project to keep my attention, if only for a short period of time.</p> <p>My colleague <a class="reference external" href=https://twitter.com/codeinthehole>@codeinthehole</a> had an idea but no time to implement it, this idea was to have shields like those of <a class="reference external" href=https://travis-ci.org>travis-ci</a> (shown below) but displaying package download counts.</p> <img alt="Status of blackhole on Travis CI" src="https://api.travis-ci.org/kura/blackhole.png?branch=master"> <div class=section id=tech-stack> <h2>Tech stack</h2> <p>From the very start I decided to use <a href=https://www.tornadoweb.org/en/stable/ class="reference external">Tornado framework</a>, although this may change in the future.</p> <p>The original plan was to generate the images using Pillow (<span class=caps>PIL</span>) and then simply cache them to disk. I decided it would make far more sense to do this using <a href=https://www.varnish-cache.org/ class="reference external">Varnish</a> and not have to worry about it working as expected.</p> </div> <div class=section id=manually-generating-the-images> <h2>Manually generating the images</h2> <p>The images were originally generated from a base template using Pillow, but sadly Python’s image manipulation is not very good, especially it’s text manipulation and the shields could have really used a bit of work.</p> <p>I reached out to the <a class="reference external" href=https://github.com/gittip/shields.io>shields project</a> but sadly got no response so the images remained as they were.</p> </div> <div class=section id=crate-io-shuts-down> <h2>crate.io shuts down</h2> <p>Sadly <a class="reference external" href=https://crate.io>crate.io</a> stopped being a custom PyPI mirror in mid December which meant I had to rewrite the codebase to use the official PyPI <span class=caps>JSON</span> <span class=caps>API</span>. In doing so I lost the ability to get download counts for all versions or a specific version and instead, could only get a count by day, week or month.</p> <p>It was while changing this functionality that I stumbled upon a <a class="reference external" href=https://github.com/gittip/shields.io/issues/83>ticket from the shields project</a> mentioning my shields and their poor artistic styling. The ticked mentioned an <a href=https://shields.io/ class="reference external">public <span class=caps>API</span></a> for generating these images.</p> <p>After switching to this <span class=caps>API</span> I quickly found from PyPI Pin users on Twitter that there was an issue in their <span class=caps>API</span>, specifically with version number formats. Version numbers with a format of <span class=caps>X.X.</span>X worked fine but X.<span class=caps>XX</span> did not. I can only assume that many other formats didn’t work either.</p> </div> <div class=section id=b-repl-ca> <h2>b.repl.ca</h2> <p>While trying to find the source code for shields.io on GitHub I found what they consider <a href=https://b.repl.ca/ class="reference external">a newer, better version</a>.</p> <p>I promptly switched to PyPI Pins to use this and queried the authors on GitHub to make sure the <span class=caps>API</span> was meant to be public and usable, thankfully it was.</p> </div> <div class=section id=eggs-wheels-and-licenses> <h2>Eggs, wheels and licenses</h2> <p>With this new found image <span class=caps>API</span> and the wealth of data in the PyPI <span class=caps>JSON</span> <span class=caps>API</span> I quickly decided to leverage it as much as I could and thus the egg, wheel and license shields were created.</p> <p>The tech stack remains the same, I still cache all successful image requests using Varnish to limit the impact on my Tornado servers and on the shields.io service. I look forward to adding more shields and functionality in the future.</p> <p>You can access this set of services <a class="reference external" href=https://pypip.in>on PyPI Pins</a>.</p> </div> </section> </div> <div class=eevee-related> <section> <h2>Related articles</h2> <ul> <li> <a href=https://kura.gg/2014/07/25/new-pypip.in-shields-and-styling/ rel=bookmark title="Permalink to 'New pypip.in shields and styling'" itemprop=url> New pypip.in shields and&nbsp;styling </a> </li> <li> <a href=https://kura.gg/2014/08/09/yarg/ rel=bookmark title="Permalink to 'yarg(1) — A semi hard Cornish cheese, also queries PyPI'" itemprop=url> yarg(1) &#8212; A semi hard Cornish cheese, also queries&nbsp;PyPI </a> </li> <li> <a href=https://kura.gg/2014/08/07/speeding-up-pypip.in-and-reducing-load-on-pypi/ rel=bookmark title="Permalink to 'Speeding up pypip.in and reducing load on PyPI'" itemprop=url> Speeding up pypip.in and reducing load on&nbsp;PyPI </a> </li> <li> <a href=https://kura.gg/2014/07/26/so-you-want-to-run-your-own-copy-of-pypip.in/ rel=bookmark title="Permalink to 'So you want to run your own copy of pypip.in?'" itemprop=url> So you want to run your own copy of&nbsp;pypip.in? </a> </li> <li> <a href=https://kura.gg/2014/03/03/pypip.in-most-requested-shields/ rel=bookmark title="Permalink to 'pypip.in most requested shields'" itemprop=url> pypip.in most requested&nbsp;shields </a> </li> </ul> </section> </div> <div class=eevee-ac> <header class=eevee-ac__header> <div class=eevee-ac-author__text> <h2>Kura</h2> <p>Anarchist. Pessimist. Bipolar. Hacker. Hyperpolyglot. Musician. Ex-(semi-)pro gamer. They/Them.</p> <p> <a href=https://kura.gg/authors/kura/ itemprop=url title="Read more articles by Kura"> Read more articles by Kura </a> </p> <nav> <ul class=eevee-ac-author__social> <li class=eevee-ac-author-social__link> <a class="mdl-color-text--accent mdl-navigation__link" href=https://github.com/kura itemprop=url rel=bookmark title="kura on GitHub"> <i class=fa aria-hidden=true>&#xF09B;</i> </a> </li> </ul> </nav> </div> <img src=/images/avatar.png class=eevee-ac-author__avatar alt=Kura> </header> </div> </article> <a href=https://github.com/kura/kura.gg/blob/main/content/shields-for-pypi.rst id=view-source title="View 'Shields for PyPI packages' on GitHub" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--raised mdl-color--accent mdl-color-text--white"> <i class=material-icons>&#xE86F;</i> View Source </a> </div> </div> </main> <div class="eevee-pagination__container eevee-container mdl-grid"> <div role=presentation class="mdl-cell mdl-cell--2-col mdl-cell--hide-tablet mdl-cell--hide-phone"> </div> <div class="mdl-color-text--grey-800 mdl-cell mdl-cell--8-col"> <nav class="eevee-pagination mdl-cell mdl-cell--12-col" itemscope itemtype=http://schema.org/SiteNavigationElement aria-label=Pagination> <a href=https://kura.gg/2014/01/08/haproxy1.5-dev21-nginx-1.5.8-spdy-pagespeed-1.7.30.2/ class=eevee-nav__button itemprop=url rel=bookmark title=Newer> <button class="mdl-button mdl-button--icon mdl-color--white mdl-color-text--grey-900" role=presentation> <i class=material-icons>&#xE5C4;</i> </button> Newer </a> <div class=eevee-spacer></div> <a href=https://kura.gg/2013/09/17/bye-bye-google-analytics-hello-self-hosted-open-web-analytics-duckduckgo-search/ class=eevee-nav__button itemprop=url rel=bookmark title=Older> Older <button class="mdl-button mdl-button--icon mdl-color--white mdl-color-text--grey-900" role=presentation> <i class=material-icons>&#xE5C8;</i> </button> </a> </nav> </div> </div> <footer class=mdl-mega-footer itemscope itemtype=http://schema.org/SiteNavigationElement> <div class=mdl-mega-footer--top-section> <div class=mdl-mega-footer--drop-down-section> <ul class=mdl-mega-footer--link-list> <li> <a href=#top itemprop=url title="Back to the top of the page"> Back to the top of the page </a> </li> </ul> </div> </div> <div class=mdl-mega-footer--middle-section itemscope itemtype=http://schema.org/SiteNavigationElement aria-label="Footer navigation"> <div class=mdl-mega-footer--drop-down-section> <h1 class=mdl-mega-footer--heading>Menu</h1> <ul class=mdl-mega-footer--link-list> <li> <a href=/eevee/ itemprop=url rel=bookmark title=Eevee> <i class=material-icons aria-hidden=true>&#xE871;</i> Eevee </a> </li> <li> <a href=/contact/ itemprop=url rel=bookmark title=Contact> <i class=material-icons aria-hidden=true>&#xE0B7;</i> Contact </a> </li> <li> <a href=/software/ itemprop=url rel=bookmark title=Software> <i class=material-icons aria-hidden=true>&#xE86F;</i> Software </a> </li> <li> <a href=https://kura.gg/archives/ itemprop=url rel=bookmark title=Archives> <i class=material-icons>&#xE02F;</i> Archives </a> </li> <li> <a href=https://kura.gg/feeds/rss.xml title=RSS itemprop=url> <i class=material-icons>&#xE0E5;</i> RSS </a> </li> </ul> </div> <div class=mdl-mega-footer--drop-down-section> <h1 class=mdl-mega-footer--heading>Social</h1> <ul class=mdl-mega-footer--link-list> <li> <a href=https://github.com/kura itemprop=url rel=bookmark title=GitHub> <i class=fa aria-hidden=true>&#xF09B;</i> Github </a> </li> </ul> </div> <div class=mdl-mega-footer--drop-down-section> <h1 class=mdl-mega-footer--heading>Links</h1> <ul class=mdl-mega-footer--link-list> <li> <a href=https://kura.gg/blackhole itemprop=url rel=bookmark title=Blackhole> <i class=material-icons aria-hidden=true>&#xE86F;</i> Blackhole </a> </li> <li> <a href=https://kura.gg/yarg itemprop=url rel=bookmark title=Yarg> <i class=material-icons aria-hidden=true>&#xE86F;</i> Yarg </a> </li> <li> <a href=https://kura.gg/eevee itemprop=url rel=bookmark title=Eevee> <i class=material-icons aria-hidden=true>&#xE871;</i> Eevee </a> </li> <li> <a href=https://kura.gg/hauntr itemprop=url rel=bookmark title=Hauntr> <i class=material-icons aria-hidden=true>&#xE871;</i> Hauntr </a> </li> <li> <a href=https://kura.gg/ghastly itemprop=url rel=bookmark title=Ghastly> <i class=material-icons aria-hidden=true>&#xE871;</i> Ghastly </a> </li> </ul> </div> </div> <div class=mdl-mega-footer--bottom-section> <div class=mdl-logo> <a href=https://kura.gg rel=bookmark itemprop=url title=kura.gg> kura.gg </a> </div> <ul class="eevee-footer mdl-mega-footer--link-list"> <li>Powered by love &amp; rainbow sparkles.</li> <li>Source code and content released under the <a href=/license/ title="MIT license">MIT license</a>.</li> </ul> </div> </footer> </div> <link rel=stylesheet href=https://kura.gg/theme/css/eevee.min.css?e96887dc> <script async src=https://kura.gg/theme/js/eevee.min.js?1841d254 nonce=REPLACEMENT_NONCE_f8Qeqqx8yd33jPY2AoZUU7UJMH376hMt></script> </body> </html>