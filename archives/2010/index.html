<!DOCTYPE html><!--

                                      |
                                     /|
                                   ,' |
                                  .   |
                                    | |
                                 ' '| |
                                / / | |
       _,.-\"\"--._              / /  | |
     ,'          `.           j '   ' '
   ,'              `.         ||   / ,                         ___..--,
  /                  \\        ' `.'`.-.,-\".  .       _..---\"\"'' __, ,'
 /                    \\        \\` .\"`      `\"'\\   ,'\"_..--''\"\"\"'.'.'
.                      .      .'-'             \\,' ,'         ,','
|                      |      ,`               ' .`         .' /
|                      |     /          ,\"`.  ' `-. _____.-' .'
'                      |..---.|,\".      | | .  .-'\"\"   __.,-'
 .                   ,'       ||,|      |.' |    |\"\"`'\"
  `-._   `._.._____  |        || |      `._,'    |
      `.   .       `\".     ,'\"| \"  `'           ,+.
        \\  '         |    '   |   .....        .'  `.
         .'          '     7  \".              ,'     \\
                   ,'      |    `..        _,'      F
                  .        |,      `'----''         |
                  |      ,\"j  /                   | '
                  `     |  | .                 | `,'
                   .    |  `.|                 |/
                    `-..'   ,'                .'
                            | \\             ,''
                            |  `,'.      _,' /
                            |    | ^.  .'   /
                             `-'.' j` V    /
                                   |      /
                                   |     /
                                   |   ,'
                                    `\"\"

//--><html lang=en> <head><meta charset=utf-8><meta name=viewport content="width=device-width, initial-scale=1.0, minimum-scale=1.0"><link rel=alternate href=https://kura.gg hreflang=en><link rel=dns-prefetch href=https://kura.gg><link href=https://kura.gg/feeds/rss.xml type=application/rss+xml rel=alternate title=kura.gg><link href=https://kura.gg/feeds/atom.xml type=application/atom+xml rel=alternate title=kura.gg><meta property=og:site_name content=kura.gg><meta property=og:type content=article><meta property=og:title content=kura.gg><meta property=og:url content=https://kura.gg/archives/2010/index.html><meta property=og:image content=https://kura.gg/archives/2010/index.png><meta property=og:image:width content=1920><meta property=og:image:height content=1080><meta property=twitter:title content=kura.gg><meta property=twitter:url content=https://kura.gg/archives/2010/index.html><meta property=twitter:image content=https://kura.gg/archives/2010/index.png><meta property=twitter:card content=summary_large_image><meta property=twitter:image:width content=1920><meta property=twitter:image:height content=1080><link rel=icon href=/favicon.png type=image/png sizes="16x16 32x32 48x48 64x64 128x128 256x256"><link rel=icon href=/favicon.ico type=image/vnd.microsoft.icon sizes="16x16 32x32 48x48 64x64 128x128 256x256"><title>Archives for 2010</title></head> <body> <div class="eevee-layout mdl-layout mdl-js-layout mdl-color--grey-50"> <header class="eevee-header mdl-color--grey-50 mdl-color-text--grey-800" itemscope itemtype=http://schema.org/WPHeader> <div class=mdl-layout__header-row> <div aria-expanded=false role=button tabindex=0 class="mdl-layout__drawer-button mdl-color-text--accent eevee-mobile-button mdl-layout--small-screen-only"> <i class=material-icons>&#xE5D2;</i> </div> <span class="eevee-logo mdl-color-text--accent mdl-layout-title"> <h2 id=top> <a href=https://kura.gg rel=bookmark title=kura.gg> kura.gg </a> </h2> </span> <div class=mdl-layout-spacer role=presentation></div> <nav class="eevee-nav mdl-navigation mdl-layout--large-screen-only" itemscope itemtype=http://schema.org/SiteNavigationElement aria-label="Header navigation"> <a class="mdl-color-text--accent mdl-navigation__link" href=/eevee/ itemprop=url rel=bookmark title=Eevee> <i class=material-icons aria-hidden=true>&#xE871;</i> Eevee </a> <a class="mdl-color-text--accent mdl-navigation__link" href=/contact/ itemprop=url rel=bookmark title=Contact> <i class=material-icons aria-hidden=true>&#xE0B7;</i> Contact </a> <a class="mdl-color-text--accent mdl-navigation__link" href=/software/ itemprop=url rel=bookmark title=Software> <i class=material-icons aria-hidden=true>&#xE86F;</i> Software </a> <a class="mdl-color-text--accent mdl-navigation__link" href=https://kura.gg/archives/ itemprop=url rel=bookmark title=Archives> <i class=material-icons>&#xE02F;</i> Archives </a> <a class="mdl-color-text--accent mdl-navigation__link" href=https://kura.gg/feeds/rss.xml title=RSS itemprop=url> <i class=material-icons>&#xE0E5;</i> RSS </a> </nav> </div> </header> <div class="eevee-mobile-header mdl-layout__drawer mdl-color--white" aria-hidden=true> <span class=mdl-layout-title> <h2 class="eevee-mobile-logo mdl-color-text--accent"> kura.gg </h2> </span> <div class="mdl-navigation mdl-color--white"> <nav class="eevee-nav mdl-navigation" itemscope itemtype=http://schema.org/SiteNavigationElement aria-label="Header navigation"> <a class="mdl-color-text--accent mdl-navigation__link" href=https://kura.gg itemprop=url rel=bookmark> <i class=material-icons aria-hidden=true> &#xE88A; </i> Home </a> <a class="mdl-color-text--accent mdl-navigation__link" href=/eevee/ itemprop=url rel=bookmark title=Eevee> <i class=material-icons aria-hidden=true>&#xE871;</i> Eevee </a> <a class="mdl-color-text--accent mdl-navigation__link" href=/contact/ itemprop=url rel=bookmark title=Contact> <i class=material-icons aria-hidden=true>&#xE0B7;</i> Contact </a> <a class="mdl-color-text--accent mdl-navigation__link" href=/software/ itemprop=url rel=bookmark title=Software> <i class=material-icons aria-hidden=true>&#xE86F;</i> Software </a> <a class="mdl-color-text--accent mdl-navigation__link" href=https://kura.gg/archives/ itemprop=url rel=bookmark title=Archives> <i class=material-icons>&#xE02F;</i> Archives </a> <a class="mdl-color-text--accent mdl-navigation__link" href=https://kura.gg/feeds/rss.xml title=RSS itemprop=url> <i class=material-icons>&#xE0E5;</i> RSS </a> </nav> </div> </div> <div class="eevee-ribbon mdl-color--primary-dark" role=presentation> </div> <main class="eevee-main mdl-layout__content"> <div class="eevee-container mdl-grid"> <div role=presentation class="mdl-cell mdl-cell--2-col mdl-cell--hide-tablet mdl-cell--hide-phone"> </div> <div class="eevee-content mdl-color--white mdl-shadow--2dp mdl-color-text--grey-800 mdl-cell mdl-cell--8-col" aria-label="Main content"> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=apt-get,aptitude,security,update,upgrade> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2010-12-13T16:27:00+00:00 itemprop=datePublished> 13 Dec 2010 </time> </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2010/12/13/debianubuntu-upgrade-security-packages-only/ rel=bookmark title="Permalink to 'Debian/Ubuntu upgrade security packages only'" itemprop=url> Debian/Ubuntu upgrade security packages&nbsp;only </a> </h2> <section itemprop=articleBody class=summary-content> <p><strong>The command below no longer works, for an updated version that does work and should continue to work (until you upgrade to a new distro version e.g. 10.04 -&gt; 12.04) please see `here`_.</strong></p> <p>Really simple, should work for most cases, I’ve not found anything wrong with it.</p> <div class=highlight><pre><span></span>sudo aptitude update <span class=o>&amp;&amp;</span> sudo aptitude install <span class=s1>'?and(~U,~Asecurity)'</span>
</pre></div> </section> <div class="eevee-divider mdl-color--accent" role=presentation> </div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=linux,online,partition> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2010-10-20T17:17:00+01:00 itemprop=datePublished> 20 Oct 2010 </time> </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2010/10/20/refresh-linux-partition-table-online/ rel=bookmark title="Permalink to 'Refresh Linux partition table online'" itemprop=url> Refresh Linux partition table&nbsp;online </a> </h2> <section itemprop=articleBody class=summary-content> <div class=section id=if-the-device-is-not-mounted> <h2>If the device is not mounted</h2> <div class=highlight><pre><span></span>sudo blockdev --rereadpt DEVICE
</pre></div> <p>E.g.</p> <div class=highlight><pre><span></span>sudo blockdev --rereadpt /dev/sda
</pre></div> </div> <div class=section id=if-the-device-is-mounted> <h2>If the device is mounted</h2> <p>Parted is awesome and does this job amazingly.</p> <div class=highlight><pre><span></span>sudo apt-get install parted
sudo partprobe
</pre></div> </div> </section> <div class="eevee-divider mdl-color--accent" role=presentation> </div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=apache,nginx,varnish,wordpress> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2010-09-26T19:41:00+01:00 itemprop=datePublished> 26 Sep 2010 </time> </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2010/09/26/nginx-varnish-apache2/ rel=bookmark title="Permalink to 'WordPress + nginx + Varnish + Apache 2'" itemprop=url> WordPress + nginx + Varnish + Apache&nbsp;2 </a> </h2> <section itemprop=articleBody class=summary-content> <p>Lately I’ve been doing a lot of work with Varnish, this includes testing it within a load balanced environment, putting it behind nginx, putting it in front of Solr, the list goes on.</p> <p>This blog post will hopefully give you an insight in to a simple way of combining nginx, Varnish and Apache to create a powerful Wordpress environment that can really take a hammering.</p> <p>I’m going to assume you already have Apache and nginx working together, if not I suggest you read my other articles on these subjects to learn how to combine them.</p> <div class=section id=installing-varnish> <h2>Installing Varnish</h2> <div class=highlight><pre><span></span>sudo apt-get install varnish
</pre></div> </div> <div class=section id=configuring-apache> <h2>Configuring Apache</h2> <p>I suggest binding Apache to port 81, this is easy to change, open the following file in your favourite editor.</p> <blockquote> /etc/apache2/ports.conf</blockquote> <p>Change the Listen and NameVirtualHost lines to:</p> <div class=highlight><pre><span></span><span class=nb>Listen</span> <span class=m>81</span>
<span class=nb>NameVirtualHost</span> *:81
</pre></div> <p>This will mean you need to go and change all …</p></div> </section> <div class="eevee-divider mdl-color--accent" role=presentation> </div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=ssh,sshfs> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2010-09-26T01:55:00+01:00 itemprop=datePublished> 26 Sep 2010 </time> </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2010/09/26/mounting-a-remote-filesystem-using-sshfs/ rel=bookmark title="Permalink to 'Mounting a remote filesystem using sshfs'" itemprop=url> Mounting a remote filesystem using&nbsp;sshfs </a> </h2> <section itemprop=articleBody class=summary-content> <p>First we need to install sshfs.</p> <div class=highlight><pre><span></span>sudo apt-get install sshfs fuse-utils
</pre></div> <p>Now we make a mount point, I’m going to use a directory in my home directory for this.</p> <div class=highlight><pre><span></span>mkd﻿ir ~/remote-content
</pre></div> <p>And now we simply mount our remote directory to it.</p> <div class=highlight><pre><span></span>sshfs user@host:/path/to/location ~/remote-content
</pre></div> <p>It’s as simple as that.</p> </section> <div class="eevee-divider mdl-color--accent" role=presentation> </div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=mysql,replication> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2010-09-04T18:14:00+01:00 itemprop=datePublished> 04 Sep 2010 </time> </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2010/09/04/mysql-master-master-slave-slave-replication/ rel=bookmark title="Permalink to 'MySQL Master-Master-Slave-Slave Replication'" itemprop=url> MySQL Master-Master-Slave-Slave&nbsp;Replication </a> </h2> <section itemprop=articleBody class=summary-content> <div class=section id=quick-introduction> <h2>Quick introduction</h2> <p>My employers presented me with a challenge this week. The task was not difficult in the end but to me it was an untried concept involving MySQL.</p> <p>I have never been a fan of MySQL and generally turn my nose at the thought of using it, let alone replicating it etc.</p> <p>The task in question? Master -&gt; Master -&gt; Slave -&gt; Slave replication.</p> <p>From this point forward I will expect you to have MySQL installed and set-up as normal.</p> <ul class=simple> <li>Master 1 will be known as Master 1 and Slave 2 with <span class=caps>IP</span> 10.1.1.1</li> <li>Master 2 will be known as Master 2 and Slave 1 with <span class=caps>IP</span> 10.1.1.2</li> <li>Slave 1 will be known as Slave 3 with <span class=caps>IP</span> 10.1.1.3</li> <li>and Slave 2 will be known as Slave 4 with <span class=caps>IP</span> 10.1.1.4</li> </ul> </div> <div class=section id=master-1> <h2>Master 1</h2> <p>Modify your MySQL config file, usually named …</p></div> </section> <div class="eevee-divider mdl-color--accent" role=presentation> </div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=find,sed,xargs> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2010-08-13T19:19:00+01:00 itemprop=datePublished> 13 Aug 2010 </time> </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2010/08/13/find-and-replace-across-multiple-files/ rel=bookmark title="Permalink to 'Find and replace across multiple files'" itemprop=url> Find and replace across multiple&nbsp;files </a> </h2> <section itemprop=articleBody class=summary-content> <p>I needed to quickly modify 500 hundred <span class=caps>XML</span> files, each was about <span class=caps>10MB</span> in size, thankfully Linux makes that pretty fast and very easy.</p> <div class=highlight><pre><span></span>find . -name <span class=s2>"*.xml"</span> -print <span class=p>|</span> xargs sed -i <span class=s1>'s/FROM/TO/g'</span>
</pre></div> <p>A semi “real world” example:</p> <div class=highlight><pre><span></span>find . -name <span class=s2>"*.xml"</span> -print <span class=p>|</span> xargs sed -i <span class=s1>'s/foo/bar/g'</span>
</pre></div> </section> <div class="eevee-divider mdl-color--accent" role=presentation> </div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=debian,swap,vmware> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2010-07-07T18:56:00+01:00 itemprop=datePublished> 07 Jul 2010 </time> </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2010/07/07/adding-swap-while-the-server-is-online-with-debian-and-vmware-esx/ rel=bookmark title="Permalink to 'Adding swap while the server is online with Debian and VMWare ESX'" itemprop=url> Adding swap while the server is online with Debian and VMWare <span class=caps>ESX</span> </a> </h2> <section itemprop=articleBody class=summary-content> <p>Recently I had to install Oracle on a virtual machine but didn’t find out until after I’d spun up of the machine that Oracle required at least <span class=caps>2GB</span> of swap space, my machine did not have enough.</p> <p>Thankfully it’s quite simple to increase swap space, using VMWare <span class=caps>ESX</span>, simple add a new drive to the machine as you normally would, I used <span class=caps>5GB</span>.</p> <div class=section id=detecting-the-new-scsi-drive-and-partitioning-it> <h2>Detecting the new <span class=caps>SCSI</span> drive and partitioning it</h2> <p>This bit is simple, I’m going to assume you’re logged in as root.</p> <div class=highlight><pre><span></span>sudo <span class=nb>echo</span> <span class=s2>"- - -"</span> &gt; /sys/class/scsi_host/**host0**/scan <span class=o>&amp;&amp;</span> fdisk -l
</pre></div> <p>If host0 doesn’t work, try changing to host1, host2 etc.</p> <p>Now we need to format the drive, for me it was /dev/sdb.</p> <div class=highlight><pre><span></span>sudo cfdisk /dev/sdb
</pre></div> <p>Create a new logical partition, set it’s type to <strong>82 Linux Swap</strong> and simply write the changes.</p> </div> <div class=section id=adding-swap> <h2>Adding swap</h2> <p>Next we simply …</p></div> </section> <div class="eevee-divider mdl-color--accent" role=presentation> </div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=incron,infobright,inotify,mysql> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2010-07-03T15:26:00+01:00 itemprop=datePublished> 03 Jul 2010 </time> </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2010/07/03/trigger-command-on-filesystem-changes-with-inotify-incron/ rel=bookmark title="Permalink to 'Trigger command on filesystem changes with inotify + incron'" itemprop=url> Trigger command on filesystem changes with inotify +&nbsp;incron </a> </h2> <section itemprop=articleBody class=summary-content> <p>During a seemingly normal work day a colleague pointed out a problem to me and asked if I had any solution.</p> <p>The problem was that they were trying to use InfoBright (<a href=https://www.infobright.com/ class="reference external">https://www.infobright.com/</a>) for some data crunching, export the data to <span class=caps>CSV</span> and then import in to MySQL. My first idea was to output the data from InfoBright as <span class=caps>SQL</span> and pipe it directly in to MySQL, this turned out to not be possible as the version of <span class=caps>IB</span> they were using only supported output as <span class=caps>CSV</span>.</p> <p>This in itself wasn’t a problem, the problem lay with the fact that <span class=caps>IB</span> would only output the file with 0660 permissions, and although both <span class=caps>IB</span> and MySQL ran as user mysql and group mysql, MySQL itself flat out refused to import the <span class=caps>CSV</span> file unless it was world readable (0664), which was slightly annoying.</p> <p>If the <span class=caps>CSV</span> didn’t …</p> </section> <div class="eevee-divider mdl-color--accent" role=presentation> </div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=apt,backup,dpkg,packages> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2010-07-02T18:32:00+01:00 itemprop=datePublished> 02 Jul 2010 </time> </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2010/07/02/using-dpkg-selections-to-backup-and-install-packages/ rel=bookmark title="Permalink to 'Using dpkg selections to backup and install packages'" itemprop=url> Using dpkg selections to backup and install&nbsp;packages </a> </h2> <section itemprop=articleBody class=summary-content> <p>Sometimes you want to be able to install packages on another machine without the hassle of a long apt-get install command or having to write down every single package you’ve installed.</p> <p>Luckily Debian has the wonderful dpkg which has 2 methods for generating a list of installed packages and another for importing a list.</p> <div class=section id=generating-a-list-of-installed-packages> <h2>Generating a list of installed packages</h2> <div class=highlight><pre><span></span>sudo dpkg --get-selections &gt; selections
</pre></div> <p>This will generate a file called <em>selections</em> which will contain something like</p> <pre class=literal-block>
... snip ...
adduser install
apache2 install
apache2-mpm-prefork install
apache2-utils install
apache2.2-bin install
apache2.2-common install
apt install
... snip...
</pre> <p>This is just a simple, plain text file so can be copied between servers.</p> </div> <div class=section id=installing-packages-from-an-exported-list> <h2>Installing packages from an exported list</h2> <p>This is almost just as easy, first we need to actually set the list of selected packages</p> <div class=highlight><pre><span></span>sudo dpkg --set-selections &lt; selections
</pre></div> <p>Then we need to actually do an update and install</p> <div class=highlight><pre><span></span>sudo apt-get update <span class=o>&amp;&amp;</span> sudo …</pre></div></div> </section> <div class="eevee-divider mdl-color--accent" role=presentation> </div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=apache,cache,nginx,proxy,proxy_cache,wordpress> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2010-04-18T12:51:00+01:00 itemprop=datePublished> 18 Apr 2010 </time> </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2010/04/18/new-syslog-tv-nginx-wordpress-site-configuration/ rel=bookmark title="Permalink to 'New syslog.tv nginx wordpress site configuration explained'" itemprop=url> New syslog.tv nginx wordpress site configuration&nbsp;explained </a> </h2> <section itemprop=articleBody class=summary-content> <div class=section id=configuration-changes> <h2>Configuration changes</h2> <p>I made some modifications to my nginx configuration this weekend to improve performance and clear up some bugs.</p> <div class=highlight><pre><span></span><span class=k>upstream</span> <span class=s>backend</span> <span class=p>{</span>
    <span class=kn>server</span> <span class=n>127.0.0.1</span><span class=p>:</span><span class=mi>81</span> <span class=s>fail_timeout=120s</span><span class=p>;</span>
<span class=p>}</span>

<span class=k>server</span> <span class=p>{</span>
    <span class=kn>listen</span> <span class=mi>80</span><span class=p>;</span>
    <span class=kn>server_name</span> <span class=s>syslog.tv</span><span class=p>;</span>

    <span class=kn>access_log</span> <span class=s>/var/log/nginx/access.syslog.tv.log</span><span class=p>;</span>

    <span class=kn>gzip</span> <span class=no>on</span><span class=p>;</span>
    <span class=kn>gzip_disable</span> <span class=s>msie6</span><span class=p>;</span>
    <span class=kn>gzip_static</span> <span class=no>on</span><span class=p>;</span>
    <span class=kn>gzip_comp_level</span> <span class=mi>9</span><span class=p>;</span>
    <span class=kn>gzip_proxied</span> <span class=s>any</span><span class=p>;</span>
    <span class=kn>gzip_types</span> <span class=s>text/plain</span> <span class=s>text/css</span> <span class=s>application/x-javascript</span> <span class=s>text/xml</span>
    <span class=s>application/xml</span> <span class=s>application/xml+rss</span> <span class=s>text/javascript</span><span class=p>;</span>

   <span class=kn>location</span> <span class=s>/</span> <span class=p>{</span>
        <span class=kn>root</span> <span class=s>/var/www/syslog.tv</span><span class=p>;</span>

        <span class=kn>set</span> <span class=nv>$wordpress_logged_in</span> <span class=s>""</span><span class=p>;</span>
        <span class=kn>set</span> <span class=nv>$comment_author_email</span> <span class=s>""</span><span class=p>;</span>
        <span class=kn>set</span> <span class=nv>$comment_author</span> <span class=s>""</span><span class=p>;</span>

        <span class=kn>if</span> <span class=s>(</span><span class=nv>$http_cookie</span> <span class=p>~</span><span class=sr>*</span> <span class=s>"wordpress_logged_in_[^=]*=([^%]+)%7C")</span> <span class=p>{</span>
             <span class=kn>set</span> <span class=nv>$wordpress_logged_in</span> <span class=s>wordpress_logged_in_</span><span class=nv>$1</span><span class=p>;</span>
        <span class=p>}</span>

        <span class=kn>if</span> <span class=s>(</span><span class=nv>$http_cookie</span> <span class=p>~</span><span class=sr>*</span> <span class=s>"comment_author_email_[^=]*=([^</span><span class=p>;</span><span class=kn>]+)(</span><span class=p>;</span><span class=kn>|$)")</span> <span class=p>{</span>
            <span class=kn>set</span> <span class=nv>$comment_author_email</span> <span class=s>comment_author_email_</span><span class=nv>$1</span><span class=p>;</span>
        <span class=p>}</span>

        <span class=kn>if</span> <span class=s>(</span><span class=nv>$http_cookie</span> <span class=p>~</span><span class=sr>*</span> <span class=s>"comment_author_[^=]*=([^</span><span class=p>;</span><span class=kn>]+)(</span><span class=p>;</span><span class=kn>|$)")</span> <span class=p>{</span>
            <span class=kn>set</span> <span class=nv>$comment_author</span> <span class=s>comment_author_</span><span class=nv>$1</span><span class=p>;</span>
        <span class=p>}</span>

        <span class=kn>set</span> <span class=nv>$my_cache_key</span> <span class=s>"</span><span class=nv>$scheme://$host$uri$is_args$args$wordpress_logged_in$comment …</span></pre></div></div> </section> <div class="eevee-divider mdl-color--accent" role=presentation> </div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=crt,openssl,pem,pkcs12,ssl> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2010-04-13T19:19:00+01:00 itemprop=datePublished> 13 Apr 2010 </time> </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2010/04/13/convert-pem-key-to-a-single-pkcs12-file/ rel=bookmark title="Permalink to 'Convert PEM & Key to a single PKCS#12 file'" itemprop=url> Convert <span class=caps>PEM</span> <span class=amp>&amp;</span> Key to a single <span class=caps>PKCS</span>#12&nbsp;file </a> </h2> <section itemprop=articleBody class=summary-content> <p>Sometimes keeping multiple copies of keys, certificates and root certificates can be a real annoyance, thankfully it’s quite simple to convert them in to a single <span class=caps>PKCS</span>#12 file with the following command.</p> <div class=highlight><pre><span></span>openssl pkcs12 -export -out certificate.pkcs -in certificate.crt -inkey private.key -certfile rootcert.crt -name <span class=s2>"PKCS#12 Certificate Bundle"</span>
</pre></div> <p>This will create a file called <strong>certificate.pkcs</strong> which will contain the contents of the <strong>certificate.crt</strong>, <strong>private.key</strong> and your root certificate <strong>rootcert.crt</strong>, it will also have an internal reference to it’s name <strong><span class=caps>PKCS</span>#12 Certificate Bundle</strong> to make it easier to inspect the certificate to find what it should contain, usually you’d set this to something more useful.</p> </section> <div class="eevee-divider mdl-color--accent" role=presentation> </div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=debian,fedora,install,nginx,redhat,ubuntu> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2010-04-02T16:54:00+01:00 itemprop=datePublished> 02 Apr 2010 </time> </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2010/04/02/building-nginx-on-red-hat-and-debian-to-rpmdeb-style-locations/ rel=bookmark title="Permalink to 'Building nginx on Red Hat and Debian to RPM/DEB-style locations'" itemprop=url> Building nginx on Red Hat and Debian to <span class=caps>RPM</span>/<span class=caps>DEB</span>-style&nbsp;locations </a> </h2> <section itemprop=articleBody class=summary-content> <p>The title of this post is a bit stupid, but I honestly couldn’t think of any other way to write it…</p> <p>When compiling nginx by hand, by default make install will push the binaries out to /usr/local/nginx and it doesn’t come with a start/stop script, understandably because it doesn’t know which <span class=caps>OS</span> it is going to be installed on etc etc.</p> <p>Recently I was tasked with building nginx to an old Red Hat Enterprise Live 4 server with no yum installation, no nginx package in up2date and not being able to find an <span class=caps>RPM</span> that’s link wasn’t dead.</p> <p>I’ve always felt that, being a Debian user, people think of me as only being able to use apt-get and if I’m feeling especially adventurous dpkg - to install applications. Some people know that I build .deb files in my spare time, but …</p> </section> <div class="eevee-divider mdl-color--accent" role=presentation> </div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content="apache,load average"> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2010-03-27T19:29:00+00:00 itemprop=datePublished> 27 Mar 2010 </time> </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2010/03/27/apache-internal-dummy-connection/ rel=bookmark title="Permalink to 'Apache internal dummy connection'" itemprop=url> Apache internal dummy&nbsp;connection </a> </h2> <section itemprop=articleBody class=summary-content> <p>Recently I found that one of the servers I look after that runs a high profile site was generating semi-high load at traffic peaks. You could generally say that this would be understandable but the server was shooting up to a load of around 10 for a few seconds and with that load jump I was able to graph an increase of Apache processes on top of it. Again though, this would generally be considered normal, but knowing how well the server performs and having nginx sitting on top handling all static content I knew something wasn’t quite right.</p> <p>Looking through the logs I found quite a lot of requests from a badly written spider which was generating a lot of server load when it hit the server, but after <span class=caps>IP</span> banning the culprit I also found several instances of Apache waking it’s child processes.</p> <pre class=literal-block>
127.0.0 …</pre> </section> <div class="eevee-divider mdl-color--accent" role=presentation> </div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=debian,monitoring,nagios,nrpe,ubuntu> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2010-03-21T21:55:00+00:00 itemprop=datePublished> 21 Mar 2010 </time> </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2010/03/21/configuring-nagios-to-monitor-remote-load-disk-using-nrpe/ rel=bookmark title="Permalink to 'Configuring Nagios to monitor remote load, disk, swap etc using NRPE'" itemprop=url> Configuring Nagios to monitor remote load, disk, swap etc using <span class=caps>NRPE</span> </a> </h2> <section itemprop=articleBody class=summary-content> <p>I’ll assume you already have Nagios installed and configured and have an understanding of actually configuring and using Nagios.</p> <div class=section id=remote-server-the-server-to-be-monitored> <h2>Remote server — the server to be monitored</h2> <p>First we’ll install the needed plugins and daemon on the <strong>remote</strong> server.</p> <div class=highlight><pre><span></span>sudo apt-get install nagios-plugins nagios-nrpe-server
</pre></div> <p>Once installed, open up <strong>/etc/nagios/nrpe_local.cfg</strong></p> <p>And place the following in it</p> <pre class=literal-block>
allowed_hosts=NAGIOS.SERVER.IP,127.0.0.1

command[check_users]=/usr/lib/nagios/plugins/check_users -w 5 -c 10
command[check_load]=/usr/lib/nagios/plugins/check_load -w 15,10,5 -c 30,25,20
command[check_all_disks]=/usr/lib/nagios/plugins/check_disk -w 20 -c 10
command[check_zombie_procs]=/usr/lib/nagios/plugins/check_procs -w 5 -c 10 -s Z
command[check_total_procs]=/usr/lib/nagios/plugins/check_procs -w 150 -c 200
command[check_swap]=/usr/lib/nagios/plugins …</pre></div> </section> <div class="eevee-divider mdl-color--accent" role=presentation> </div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=apache,log,nginx,proxy> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2010-03-20T19:24:00+00:00 itemprop=datePublished> 20 Mar 2010 </time> </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2010/03/20/show-ip-in-apache-logs-from-nginx-reverse-proxy/ rel=bookmark title="Permalink to 'Show IP in Apache logs from nginx reverse proxy'" itemprop=url> Show <span class=caps>IP</span> in Apache logs from nginx reverse&nbsp;proxy </a> </h2> <section itemprop=articleBody class=summary-content> <p>This is a very quick blog to show you how to show a users <span class=caps>IP</span> address in your Apache access logs when the site in question is being reverse proxied to Apache through nginx.</p> <p>You need the rpaf module for Apache, on Debian and Ubuntu this is simple to install</p> <div class=highlight><pre><span></span>sudo apt-get install libapache2-mod-rpaf
sudo a2enmod rpaf
sudo /etc/init.d/apache2 restart
</pre></div> <p>This set of commands will do the following;</p> <ol class="arabic simple"> <li>Update apt package list</li> <li>Install libapache2-mod-rpaf</li> <li>Enable mod-rpaf</li> <li>Gracefully restart Apache (doesn’t kill connections)</li> </ol> <p>Once installed you simple need to be sure to pass the correct headers through, so open up one of your nginx site configuration files and add the following within the server definition.</p> <div class=highlight><pre><span></span><span class=k>proxy_set_header</span> <span class=s>X-Forwarded-For</span> <span class=nv>$proxy_add_x_forwarded_for</span><span class=p>;</span>
</pre></div> <p>So you should have something that looks like this, but without the “… snip …”</p> <div class=highlight><pre><span></span><span class=k>server</span> <span class=p>{</span>
    <span class=c1># ...snip...</span>
    <span class=kn>location</span> <span class=s>/</span> <span class=p>{</span>
        <span class=c1># ...snip...</span>
        <span class=kn>proxy_set_header</span> <span class=s>X-Forwarded-For</span> <span class=nv>$proxy_add …</span></pre></div> </section> <div class="eevee-divider mdl-color--accent" role=presentation> </div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=nginx> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2010-03-18T21:54:00+00:00 itemprop=datePublished> 18 Mar 2010 </time> </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2010/03/18/nginx-increase-increase-server_names_hash_bucket_size/ rel=bookmark title="Permalink to 'nginx - increase increase server_names_hash_bucket_size'" itemprop=url> nginx - increase increase&nbsp;server_names_hash_bucket_size </a> </h2> <section itemprop=articleBody class=summary-content> <p>Today I ran in to something I’d never seen before when configuring nginx.</p> <p>I ran the nginx config test, as I usually do before I restart it.</p> <div class=highlight><pre><span></span>nginx -t
</pre></div> <p>But, the response I got was interesting</p> <pre class=literal-block>
2010/03/18 21:16:09 [emerg] 12299#0: could not build the server_names_hash, you should increase server_names_hash_bucket_size: 32
2010/03/18 21:16:09 [emerg] 12299#0: the configuration file /etc/nginx/nginx.conf test failed
</pre> <p>I found that one of the domain names I was using was over 32 characters in length, nginx’s default max length.</p> <p>Thankfully the fix was simple.</p> <div class=highlight><pre><span></span><span class=k>http</span> <span class=p>{</span>
    <span class=c1># ...snip...</span>
    <span class=kn>server_names_hash_bucket_size</span> <span class=mi>64</span><span class=p>;</span>
    <span class=c1># ...snip...</span>
<span class=p>}</span>
</pre></div> </section> <div class="eevee-divider mdl-color--accent" role=presentation> </div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=awk,egrep,find,linux,ls,wc> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2010-03-17T11:19:00+00:00 itemprop=datePublished> 17 Mar 2010 </time> </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2010/03/17/finding-files-over-a-set-size-with-find-and-awk/ rel=bookmark title="Permalink to 'Finding files over a set size with find & awk'" itemprop=url> Finding files over a set size with find <span class=amp>&amp;</span>&nbsp;awk </a> </h2> <section itemprop=articleBody class=summary-content> <p>This is a really great simple way to find files on the filesystem that are over 200k in size.</p> <div class=highlight><pre><span></span>find /path/to/directory/ -type f -size +200k -exec ls -lh <span class=o>{}</span> <span class=p>;</span> <span class=p>|</span> awk <span class=s1>'{ print $NF ": " $5 }'</span>
</pre></div> <p>You can use the output of this to either store in a file, or pipe to wc for a count of lines</p> <div class=highlight><pre><span></span>find /path/to/directory/ -type f -size +200k -exec ls -lh <span class=o>{}</span> <span class=p>;</span> <span class=p>|</span> awk <span class=s1>'{ print $NF ": " $5 }'</span> <span class=p>|</span> wc -l
</pre></div> <p>You can also use egrep before wc to look for specific filetypes</p> <div class=highlight><pre><span></span>find /path/to/directory/ -type f -size +200k -exec ls -lh <span class=o>{}</span> <span class=p>;</span> <span class=p>|</span> awk <span class=s1>'{ print $NF ": " $5 }'</span> <span class=p>|</span> egrep <span class=s1>'(jpg|bmp|gif|tiff|jpeg)'</span> <span class=p>|</span> wc -l
</pre></div> </section> <div class="eevee-divider mdl-color--accent" role=presentation> </div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=apache,certificate,crt,der,pem,ssl> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2010-03-03T17:26:00+00:00 itemprop=datePublished> 03 Mar 2010 </time> </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2010/03/03/convert-der-certificate-to-pem/ rel=bookmark title="Permalink to 'Convert DER certificate to PEM'" itemprop=url> Convert <span class=caps>DER</span> certificate to <span class=caps>PEM</span> </a> </h2> <section itemprop=articleBody class=summary-content> <p>Some times as an administrator you will be given a certificate from a third party that will be in the <span class=caps>DER</span> format, which cannot be loaded in to Apache.</p> <p>Converting it is a simple process:</p> <div class=highlight><pre><span></span>openssl x509 -in certificate.crt -inform DER -out certificate.pem -outform PEM
</pre></div> </section> <div class="eevee-divider mdl-color--accent" role=presentation> </div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=less,linux,unix> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2010-03-01T21:30:00+00:00 itemprop=datePublished> 01 Mar 2010 </time> </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2010/03/01/less-is-more/ rel=bookmark title="Permalink to 'less is more'" itemprop=url> less is&nbsp;more </a> </h2> <section itemprop=articleBody class=summary-content> <p>To my surprise I have found that there are still people out there who use <em>“more”</em>, this has shocked me.</p> <p>So this is a very, very short blog post to tell those who visit that <strong>less is more and more is less</strong>.</p> <div class=section id=what> <h2>What?</h2> <p>less is a command that comes as standard in almost all Linux distros now, and unlike more it actually has the ability to do backwards and forwards scrolling with Page Up, Page Down, arrow keys and spacebar. It’s a fantastic little command!</p> <div class=highlight><pre><span></span>less FILE
</pre></div> <p>Very simple to use and an all round great tool. The best thing about less is it doesn’t need to read the whole file in one go, it reads in chunks. Opening a <span class=caps>100MB</span> log file is simple with less!</p> </div> <div class=section id=useful-options> <h2>Useful options</h2> <table class=docutils> <thead> <tr><th class=head><strong>-g</strong></th> <th class=head>Highlights just the current match of any searched string,</th> </tr> </thead> <tbody> <tr><td><strong>-I</strong></td> <td>Case-insensitive searches,</td> </tr> <tr><td><strong>-M</strong></td> <td>Show a more detailed prompt …</td></tr></tbody></table></div> </section> <div class="eevee-divider mdl-color--accent" role=presentation> </div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=debian,howto,ssh,ssh_config,ubuntu> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2010-02-18T21:03:00+00:00 itemprop=datePublished> 18 Feb 2010 </time> </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2010/02/18/howto-ssh-config-on-debian-ubuntu/ rel=bookmark title="Permalink to 'HOWTO: SSH config on Debian/Ubuntu'" itemprop=url> <span class=caps>HOWTO</span>: <span class=caps>SSH</span> config on&nbsp;Debian/Ubuntu </a> </h2> <section itemprop=articleBody class=summary-content> <p>Today I <em>finally</em> got round to setting up my local user ssh config on my new work laptop and figured I’d do a quick write up on it and it’s uses.</p> <p>You can create a configuration file in your home directory that will override the options set in your machine-wide config.</p> <div class=section id=your-configuration-files> <h2>Your configuration files</h2> <p>Your local config can be found/created in:</p> <blockquote> ~/.ssh/config</blockquote> <p>And your machine-wide configuration is in:</p> <blockquote> /etc/ssh/ssh_config</blockquote> <p>Rather than editing my ssh config across my whole machine I’m doing it for my local user specifically.</p> <p>Reading the man page for ssh_config will give you a full list of available options, below I will outline several that I use and find very useful.</p> </div> <div class=section id=your-host-definitions> <h2>Your host definitions</h2> <p>First things first, we need to define a host.</p> <pre class=literal-block>
Host host.domain.com
</pre> <p>Each host you add to your config will need to have …</p></div> </section> <div class="eevee-divider mdl-color--accent" role=presentation> </div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content="cfdisk,debian,esx,howto,logical volume management,lvm,lvm2,partition,ubuntu,vmware"> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2010-02-16T18:20:00+00:00 itemprop=datePublished> 16 Feb 2010 </time> </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2010/02/16/howto-guest-virtual-machine-disk-extend-online-with-debian-ubuntu-lvm2-and-vmware-esx/ rel=bookmark title="Permalink to 'HOWTO: Guest Virtual Machine disk extend online with Debian/Ubuntu, LVM2 and VMWare ESX'" itemprop=url> <span class=caps>HOWTO</span>: Guest Virtual Machine disk extend online with Debian/Ubuntu, <span class=caps>LVM2</span> and VMWare <span class=caps>ESX</span> </a> </h2> <section itemprop=articleBody class=summary-content> <p>Over the last two days I’ve had the interesting task of online some VMs from clones and increasing their disk space to accommodate a mass of user uploaded content. I’ve done this before but never actually with an Logical Volume Management (<span class=caps>LVM</span>) disk.</p> <p>My first approach, like a fool, was to clone the <span class=caps>VM</span> from source and boot it from a remotely mounted GParted <span class=caps>ISO</span>, this didn’t actually go as expected and I was unable to add it to the <span class=caps>LVM</span>, I found a nice guide online and consulted a colleague because I knew he’d done something similar recently. After the first successful size increase I realised I was able to do it without ever rebooting the machine itself, this is accomplished by actually adding an extra disk to the <span class=caps>VM</span>, this disk can then be partition with cfdisk and then added to the <span class=caps>LVM</span>, thus …</p> </section> <div class="eevee-divider mdl-color--accent" role=presentation> </div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content="apache,cache,debian,howto,load balancing,nginx,ubuntu,wordpress"> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2010-02-14T14:27:00+00:00 itemprop=datePublished> 14 Feb 2010 </time> </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2010/02/14/more-nginx-proxy_cache-optimizations-and-nginx-load-balancing/ rel=bookmark title="Permalink to 'More nginx proxy_cache optimizations and nginx load balancing'" itemprop=url> More nginx proxy_cache optimizations and nginx load&nbsp;balancing </a> </h2> <section itemprop=articleBody class=summary-content> <p>This is yet another follow up to post to several previous posts about using nginx as a reverse proxy with caching. It is actually a direct addition to my post from a week or so ago which outlined how to actually using nginx’s proxy caching feature which can be read here — <a href=https://syslog.tv/2010/02/07/nginx-proxy_cache-and-explained-benchmarked/ class="reference external">/2010/02/07/nginx-proxy_cache-and-explained-benchmarked/</a>.</p> <div class=section id=even-more-changes> <h2>Even more changes?</h2> <p>Yes, even more changes, these are basic changes that are there to improve the caching capabilities and also implement load balancing.</p> <div class=section id=cache-changes> <h3>Cache changes</h3> <p>The first set of changes are in the main nginx configuration file</p> <blockquote> /etc/nginx/nginx.conf</blockquote> <p>These changes basically just change the proxy_cache key</p> <div class=highlight><pre><span></span><span class=k>proxy_cache_path</span> <span class=s>/var/www/nginx_cache</span> <span class=s>levels=1:2</span> <span class=s>keys_zone=cache:8m</span> <span class=s>max_size=1000m</span> <span class=s>inactive=600m</span><span class=p>;</span>
<span class=k>proxy_temp_path</span> <span class=s>/tmp/nginx</span><span class=p>;</span>
<span class=k>proxy_cache_key</span> <span class=s>"</span><span class=nv>$scheme://$host$request_uri"</span><span class=p>;</span>
</pre></div> <p>I’ve decided to put the temporary caches file in to …</p></div></div> </section> <div class="eevee-divider mdl-color--accent" role=presentation> </div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=apache,code_swarm,postgresql,python> <meta itemprop=keywords content=misc> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2010-02-13T23:01:00+00:00 itemprop=datePublished> 13 Feb 2010 </time> </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2010/02/13/code_swarm-apache-python-and-postgresql-commit-visualization/ rel=bookmark title="Permalink to 'code_swarm - Apache, Python and PostgreSQL commit visualization'" itemprop=url> code_swarm - Apache, Python and PostgreSQL commit&nbsp;visualization </a> </h2> <section itemprop=articleBody class=summary-content> <p>These videos are pretty old now and I had forgotten about them until a colleague tweeted about a Twitter code_swarm visualization which made me remember.</p> <p>So here they are, best viewed in full screen mode.</p> <div class=section id=apache> <h2>Apache</h2> <div align=center class=vimeo><iframe allowfullscreen frameborder=0 height=500 mozallowfullscreen src=https://player.vimeo.com/video/1076588 webkitallowfullscreen width=800></iframe></div></div> <div class=section id=python> <h2>Python</h2> <div align=center class=vimeo><iframe allowfullscreen frameborder=0 height=500 mozallowfullscreen src=https://player.vimeo.com/video/1093745 webkitallowfullscreen width=800></iframe></div></div> <div class=section id=postgresql> <h2>PostgreSQL</h2> <div align=center class=vimeo><iframe allowfullscreen frameborder=0 height=500 mozallowfullscreen src=https://player.vimeo.com/video/1081680 webkitallowfullscreen width=800></iframe></div></div> </section> <div class="eevee-divider mdl-color--accent" role=presentation> </div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=debian,dkim,domainkeys,howto,mail,postfix,ubuntu> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2010-02-12T19:08:00+00:00 itemprop=datePublished> 12 Feb 2010 </time> </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2010/02/12/howto-domainkeys-with-postfix-on-debian-ubuntu/ rel=bookmark title="Permalink to 'HOWTO: DomainKeys with Postfix on Debian/Ubuntu'" itemprop=url> <span class=caps>HOWTO</span>: DomainKeys with Postfix on&nbsp;Debian/Ubuntu </a> </h2> <section itemprop=articleBody class=summary-content> <p><strong>I have written a much newer, clearer and better article on DomainKeys signing email `here`_.</strong></p> <div class=section id=about> <h2>About</h2> <p>This guide is a sister to another guide I wrote a while back about how to use DomainKeys Identified Mail (<span class=caps>DKIM</span>) with Postfix on Debian, which can be read here - <a href=/2010/01/11/dkim-on-debian-with-postfix/ class="reference external">/2010/01/11/dkim-on-debian-with-postfix/</a>.</p> <p>DomainKeys is an older implementation than <span class=caps>DKIM</span>, <span class=caps>DKIM</span> is a merge of DomainKeys and Identified Mail. Both DomainKeys and <span class=caps>DKIM</span> are used so having both configured is a good idea.</p> </div> <div class=section id=getting-started> <h2>Getting started</h2> <p>Lets start off by installing the dk-filter</p> <div class=highlight><pre><span></span>sudo apt-get install dk-filter
</pre></div> <p>Once installed you can can create a public and private key set using the commands below, if you’re already using <span class=caps>DKIM</span> you can skip this step and just use your already existing key.</p> <div class=highlight><pre><span></span>openssl genrsa -out private.key <span class=m>1024</span>
openssl rsa -in private.key -out public.key -pubout -outform PEM
sudo mkdir /etc/mail
sudo cp …</pre></div></div> </section> <div class="eevee-divider mdl-color--accent" role=presentation> </div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=howto,mail> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2010-02-11T18:25:00+00:00 itemprop=datePublished> 11 Feb 2010 </time> </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2010/02/11/howto-using-spf-to-validate-outgoing-mail/ rel=bookmark title="Permalink to 'HOWTO: Using SPF to validate outgoing mail'" itemprop=url> <span class=caps>HOWTO</span>: Using <span class=caps>SPF</span> to validate outgoing&nbsp;mail </a> </h2> <section itemprop=articleBody class=summary-content> <p>You can get a basic overview on what <span class=caps>SPF</span> is, what it’s for and it’s more advanced usages here - <a href=https://www.openspf.org/ class="reference external">https://www.openspf.org/</a></p> <p>This article is to give only a basic insight in to how you can use an <span class=caps>SPF</span> record to valid mail from your servers.</p> <div class=section id=the-dns> <h2>The <span class=caps>DNS</span></h2> <p><span class=caps>SPF</span> records work from your <span class=caps>DNS</span>, it’s really simple. Technically there is a <span class=caps>DNS</span> type defined for <span class=caps>SPF</span> records as of <a class="reference external" href=https://tools.ietf.org/html/rfc4408><span class=caps>RFC</span> 4408</a>, but since not all servers recognise this type it also works in the <span class=caps>TXT</span> type.</p> <p>A simple usage of <span class=caps>SPF</span> is</p> <pre class=literal-block>
v=spf1 a mx -all
</pre> <p>Imagine this exists on this domain, <strong>syslog.tv</strong>. This spf record would mean that <span class=caps>ALL</span> <span class=caps>AN</span> and <span class=caps>MX</span> servers listed in the <span class=caps>DNS</span> records of syslog.tv would be valid senders.</p> <p>The hypen (-) before <em>all</em> means that if the mail appears to be coming from a server that isn …</p></div> </section> <div class="eevee-divider mdl-color--accent" role=presentation> </div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=debian,howto,iptables,networking,security,ubuntu> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2010-02-11T16:51:00+00:00 itemprop=datePublished> 11 Feb 2010 </time> </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2010/02/11/howto-iptables-on-debian-ubuntu/ rel=bookmark title="Permalink to 'HOWTO: IPTables on Debian/Ubuntu'" itemprop=url> <span class=caps>HOWTO</span>: IPTables on&nbsp;Debian/Ubuntu </a> </h2> <section itemprop=articleBody class=summary-content> <div class=section id=installation> <h2>Installation</h2> <p>Simple, if it’s not installed already then run the following commands</p> <div class=highlight><pre><span></span>sudo apt-get install iptables
sudo /etc/init.d/iptables start
</pre></div> <p>The safest and best way of configuring iptables, in my opinion, is to have two files. The first is a temporary/test set that you will save to first, the second is the actual rule set that will be loaded to iptables.</p> </div> <div class=section id=configuration> <h2>Configuration</h2> <p>So, first we’ll create an empty temp rules file</p> <div class=highlight><pre><span></span>sudo touch /etc/iptables.temp.rules
</pre></div> <p>Add some simple rules to it:</p> <pre class=literal-block>
*filter
# Allows all loopback traffic and drop all traffic to 127/8 that doesn't use lo

-A INPUT -i lo -j ACCEPT
-A INPUT ! -i lo -d 127.0.0.0/8 -j REJECT

# Accepts all established inbound connections
-A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT

# Allows all outbound traffic
-A OUTPUT -j ACCEPT

#SSH
-A INPUT -p tcp -m …</pre></div> </section> <div class="eevee-divider mdl-color--accent" role=presentation> </div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=apache,cache,debian,howto,nginx,php,ubuntu,wordpress> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2010-02-07T10:27:00+00:00 itemprop=datePublished> 07 Feb 2010 </time> </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2010/02/07/nginx-proxy_cache-and-explained-benchmarked/ rel=bookmark title="Permalink to 'nginx, proxy_cache and reverse proxying explained & benchmarked'" itemprop=url> nginx, proxy_cache and reverse proxying explained <span class=amp>&amp;</span>&nbsp;benchmarked </a> </h2> <section itemprop=articleBody class=summary-content> <div class=section id=the-beginning> <h2>The beginning</h2> <p>Where to begin? nginx would be a good start I suppose. It’s far easier and makes much for sense for you to actually read about nginx from it’s own website - <a href=https://nginx.org/en/ class="reference external">https://nginx.org/en/</a> - but just to give a simple explanation too; `nginx is king of static content <span class=caps>HTTP</span> servers.`</p> <p>Anyone that has dealt with Apache on medium to high traffic websites will know that Apache is bit of a `wheezy, old geezer` when it comes to content serving using it’s mpm-worker (threaded). Very often high traffic will cause server load to go through the roof but for serving dynamic content, there really is no better <span class=caps>HTTP</span> server than Apache, so this leaves us in a bit of a predicament; a high powered website with dynamic content and lots of static files like <span class=caps>JS</span>, <span class=caps>CSS</span> and imagery, what do we do?!</p> <p>In this example `dynamic …</p></div> </section> <div class="eevee-divider mdl-color--accent" role=presentation> </div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=apache,cache,nginx,varnish> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2010-02-06T10:36:00+00:00 itemprop=datePublished> 06 Feb 2010 </time> </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2010/02/06/using-nginx-varnish-and-apache/ rel=bookmark title="Permalink to 'Using nginx, Varnish and Apache'" itemprop=url> Using nginx, Varnish and&nbsp;Apache </a> </h2> <section itemprop=articleBody class=summary-content> <div class=section id=the-problem> <h2>The problem</h2> <p>So lets get to the problem first. I have several lightly to medium loaded sites running on some virtual servers, they servers themselves are highly configured to run beautifully on our host environments, very, very <span class=caps>RAM</span> intensive but low disk I/O and low <span class=caps>CPU</span> usage.</p> <p>As mentioned, the sites are relatively low loaded, they’ll generally hang around at between 3,000-5,000 unique hits a day and are run through Apache using <span class=caps>PHP</span>, various <span class=caps>PHP</span> modules and MySQL, a simple generic <span class=caps>LAMP</span> environment, yet customised to suit it’s surroundings and host.</p> <p>The sites themselves run fine on that setup, no issues at all on normal days, but on set days of the week these sites can double in unique hits or even more than double, with KeepAlive enabled and a KeepAliveTimeout set low Apache has problems handling this kind of load (I should point out …</p></div> </section> <div class="eevee-divider mdl-color--accent" role=presentation> </div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=apache,debian,eth0,howto,mod_ssl,networking,ssl,vhost> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2010-01-15T06:24:00+00:00 itemprop=datePublished> 15 Jan 2010 </time> </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2010/01/15/howto-debian-apache2-ssl-multiple-vhosts/ rel=bookmark title="Permalink to 'HOWTO: Debian - Apache 2 SSL on multiple virtual hosts'" itemprop=url> <span class=caps>HOWTO</span>: Debian - Apache 2 <span class=caps>SSL</span> on multiple virtual&nbsp;hosts </a> </h2> <section itemprop=articleBody class=summary-content> <p>Figured I’d write this one up quickly as it proved to annoy the hell out of me at 4:30am this morning getting it working on a live server.</p> <p>Apache 2 can serve <span class=caps>SSL</span> content to multiple vhosts on your setup, provided they use different <span class=caps>IP</span> addresses, this post will give you a quick run down on how to do it.</p> <p>First up we need to actually add the new <span class=caps>IP</span> to the machine in /etc/network/interfaces.</p> <pre class=literal-block>
auto eth0
iface eth0 inet static
    address 10.1.1.7
    netmask 255.255.255.0
    gateway 10.1.1.1

auto eth0:1
iface eth0:1 inet static
    address 10.1.1.8
    netmask 255.255.255.0
</pre> <p>Replace my IPs with your own.</p> <p>Restart networking.</p> <div class=highlight><pre><span></span>sudo /etc/init.d/networking restart
</pre></div> <p>Next task is Apache 2 to configure it to listen on both IPs.</p> <blockquote> /etc/apache2/ports.conf</blockquote> <p>My …</p> </section> <div class="eevee-divider mdl-color--accent" role=presentation> </div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=apache,debian,denyhosts,howto,logwatch,php,security> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2010-01-14T19:57:00+00:00 itemprop=datePublished> 14 Jan 2010 </time> </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2010/01/14/howto-debian-server-security/ rel=bookmark title="Permalink to 'HOWTO: Debian server security'" itemprop=url> <span class=caps>HOWTO</span>: Debian server&nbsp;security </a> </h2> <section itemprop=articleBody class=summary-content> <p>Server security is something I’ve always tried to keep myself up-to-date on. I have at least a dozen <span class=caps>RSS</span> feeds that I read daily to learn about the latest flaws, holes releases etc. That being said I am by no means an “expert”, I’ve learned what I’ve needed to learn over time. I like to think that over the years I’ve gained enough knowledge to almost completely secure servers with all the programs installed that I generally use.</p> <p>The aim of this article is to introduce you to some of the programs I use for security and some config changes that can be made to other programs to make them more secure. It is aimed at web servers but other changes work anywhere, like the <span class=caps>SSH</span> changes.</p> <div class=section id=ssh> <h2><span class=caps>SSH</span></h2> <p>We’ll start with a very simple change that makes a very big difference, a change to the …</p></div> </section> <div class="eevee-divider mdl-color--accent" role=presentation> </div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=debian,howto,sudo,sudoers> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2010-01-13T03:56:00+00:00 itemprop=datePublished> 13 Jan 2010 </time> </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2010/01/13/howto-debian-sudoers-explained/ rel=bookmark title="Permalink to 'HOWTO: Debian - Sudo(ers) explained'" itemprop=url> <span class=caps>HOWTO</span>: Debian - Sudo(ers)&nbsp;explained </a> </h2> <section itemprop=articleBody class=summary-content> <p>Ah sudo, one of my favourites, funnily enough I’ve noticed a lot of Linux users use sudo (mainly because Ubuntu installs and configures your first user by default,) but very few seem to know that much about it. This can include not even knowing how to add a user to sudoers.</p> <p>This article will give you some useful information on what sudo actually is, how to configure it and how to restrict it.</p> <div class=section id=what-is-sudo> <h2>What is sudo?</h2> <p>So, quickly running <strong>man sudo</strong> gives us some information what sudo actually is and does.</p> <blockquote> sudo allows a permitted user to execute a command as the superuser or another user, as specified in the sudoers file. The real and effective uid and gid are set to match those of the target user as specified in the passwd file and the group vector is initialized based on the group file (unless the -P option …</blockquote></div> </section> <div class="eevee-divider mdl-color--accent" role=presentation> </div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=apache,debian,mod_ssl,ssl> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2010-01-12T22:57:00+00:00 itemprop=datePublished> 12 Jan 2010 </time> </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2010/01/12/howto-debian-apache-2-amp-mod_ssl/ rel=bookmark title="Permalink to 'HOWTO: Debian, Apache 2 & mod_ssl with self signed cert. or officially signed cert.'" itemprop=url> <span class=caps>HOWTO</span>: Debian, Apache 2 <span class=amp>&amp;</span> mod_ssl with self signed cert. or officially signed&nbsp;cert. </a> </h2> <section itemprop=articleBody class=summary-content> <p>This is gonna be quite a simple tutorial that should be the same (excluding pathing and apt) across other Linux distros.</p> <div class=section id=installation> <h2>Installation</h2> <p>First off we’ll get Apache and mod_ssl install</p> <div class=highlight><pre><span></span>sudo apt-get install apache2
</pre></div> <p><span class=caps>SSL</span> should be enabled by default, if not run the following</p> <div class=highlight><pre><span></span>sudo a2enmod ssl
</pre></div> </div> <div class=section id=ssl-certificate> <h2><span class=caps>SSL</span> certificate</h2> <p>There are several ways of doing this, the first you need to figure out is if you want a self signed certificate or one signed by a provider like GeoTrust, this type is not free. In this article I’ll cover both, starting with self signed.</p> <div class=section id=self-signed> <h3>Self signed</h3> <div class=highlight><pre><span></span>sudp mkdir /etc/apache2/ssl
sudo /usr/sbin/make-ssl-cert /usr/share/ssl-cert/ssleay.cnf /etc/apache2/ssl/apache.pem
</pre></div> </div> <div class=section id=provider-signed> <h3>Provider signed</h3> <p>Please note, this type of certificate has to be paid for, prices at time of writing range from £15/year to £2,000/year.</p> <p>There are actually some more …</p></div></div> </section> <div class="eevee-divider mdl-color--accent" role=presentation> </div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=apache,cache,debian,nginx,wordpress> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2010-01-12T00:37:00+00:00 itemprop=datePublished> 12 Jan 2010 </time> </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2010/01/12/apache-2-nginx-wordpress-mu-follow-up/ rel=bookmark title="Permalink to 'Apache 2, Nginx & WordPress MU - Follow up'" itemprop=url> Apache 2, Nginx <span class=amp>&amp;</span> WordPress <span class=caps>MU</span> - Follow&nbsp;up </a> </h2> <section itemprop=articleBody class=summary-content> <p>This is a quick follow up to a previous post about getting this blog <a href=/2010/01/11/debian-apache-2-nginx-wordpress-mu/ class="reference external">running on nginx with a reverse proxy to Apache 2</a>.</p> <p>It seems the issue stems from 3 mods I had installed and enabled</p> <ol class="arabic simple"> <li>mod-spamhaus</li> <li>mod-evasive and</li> <li>mod-security</li> </ol> <p>The 3, when running together are a fantastic way to strengthen any web server from attack, be it <span class=caps>DOS</span>, injection, <span class=caps>XLS</span> etc. I’ve sworn by all 3 of them for years now and I thought I had them cracked for security:performance ratio, when it comes to reverse proxying requests from nginx to Apache 2 where WordPress is concerned, apparently I was very wrong.</p> <p>The issue wasn’t so bad when the cache was full, but seeing as my cache is only alive for an hour that leaves an open point for the cache to be recreated when a user views the page. This in itself isn’t …</p> </section> <div class="eevee-divider mdl-color--accent" role=presentation> </div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=debian,dkim,howto,mail,postfix> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2010-01-11T20:53:00+00:00 itemprop=datePublished> 11 Jan 2010 </time> </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2010/01/11/dkim-on-debian-with-postfix/ rel=bookmark title="Permalink to 'HOWTO: DKIM with Postfix on Debian'" itemprop=url> <span class=caps>HOWTO</span>: <span class=caps>DKIM</span> with Postfix on&nbsp;Debian </a> </h2> <section itemprop=articleBody class=summary-content> <p><em>There is a much newer article on this subject `here`_ and covers DomainKeys and <span class=caps>DKIM</span>.</em></p> <p>Mail and mail servers have always been my forté if I’m to be honest, my home mail server has been spam free for years now, nothing really gets past due to my love of all things installable and configurable.</p> <p>Several months ago I started a new job and after a few weeks I was tasked with getting <span class=caps>DKIM</span> signing to work on our mail platform, <span class=caps>DKIM</span> was semi-new to me, I’d never bothered with anything but <span class=caps>SPF</span> before so I figured I’d give it a shot.</p> <p>At work our servers are Debian based but are the evil that is Ubuntu, strangely though I was able to find an Ubuntu specific article that wasn’t absolute rubbish, which surprised me no end. I was able to get dkim-milter working with Postfix and signing …</p> </section> <div class="eevee-divider mdl-color--accent" role=presentation> </div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=apache,cache,debian,nginx,wordpress> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2010-01-11T19:58:00+00:00 itemprop=datePublished> 11 Jan 2010 </time> </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2010/01/11/debian-apache-2-nginx-wordpress-mu/ rel=bookmark title="Permalink to 'Debian, Apache 2, Nginx, WordPress MU & WP-Super-Cache'" itemprop=url> Debian, Apache 2, Nginx, WordPress <span class=caps>MU</span> <span class=amp>&amp;</span> <span class=caps>WP</span>-Super-Cache </a> </h2> <section itemprop=articleBody class=summary-content> <p><em>This is a rather old article, for more up-to-date information please see;</em></p> <ol class="arabic simple"> <li><a href=/2010/02/07/nginx-proxy_cache-and-explained-benchmarked/ class="reference external">/2010/02/07/nginx-proxy_cache-and-explained-benchmarked/</a></li> <li><a href=/2010/02/14/more-nginx-proxy_cache-optimizations-and-nginx-load-balancing/ class="reference external">/2010/02/14/more-nginx-proxy_cache-optimizations-and-nginx-load-balancing/</a></li> </ol> <p>I’ve started collecting a few blogs on my servers now and figured from this one on I would consolidate it in to one workable, usable location. Removing my need to update multiple plugins, themes and WordPress itself, over and over.</p> <p>This time round I thought I’d do it properly, and properly in my book is as complicated and “awesome” as it can possibly be, without growing legs and running off to stomp a city.</p> <div class=section id=love> <h2>Love</h2> <p>I’ve fallen in-love with nginx (<a href=https://nginx.org/ class="reference external">https://nginx.org/</a>) over the last 6 months or so, I’d been an avid user of LighTTPD for a very long time before but started to look in to nginx mid year as a replacement. I learned that at my new job they used …</p></div> </section> </article> <div class=eevee-page-spacer role=presentation></div> </div> </div> </main> <div class="eevee-pagination__container eevee-container mdl-grid"> <div role=presentation class="mdl-cell mdl-cell--2-col mdl-cell--hide-tablet mdl-cell--hide-phone"> </div> <div class="mdl-color-text--grey-800 mdl-cell mdl-cell--8-col"> <nav class="eevee-pagination mdl-cell mdl-cell--12-col" itemscope itemtype=http://schema.org/SiteNavigationElement aria-label=Pagination> <div class=eevee-spacer></div> </nav> </div> </div> <footer class=mdl-mega-footer itemscope itemtype=http://schema.org/SiteNavigationElement> <div class=mdl-mega-footer--top-section> <div class=mdl-mega-footer--drop-down-section> <ul class=mdl-mega-footer--link-list> <li> <a href=#top itemprop=url title="Back to the top of the page"> Back to the top of the page </a> </li> </ul> </div> </div> <div class=mdl-mega-footer--middle-section itemscope itemtype=http://schema.org/SiteNavigationElement aria-label="Footer navigation"> <div class=mdl-mega-footer--drop-down-section> <h1 class=mdl-mega-footer--heading>Menu</h1> <ul class=mdl-mega-footer--link-list> <li> <a href=/eevee/ itemprop=url rel=bookmark title=Eevee> <i class=material-icons aria-hidden=true>&#xE871;</i> Eevee </a> </li> <li> <a href=/contact/ itemprop=url rel=bookmark title=Contact> <i class=material-icons aria-hidden=true>&#xE0B7;</i> Contact </a> </li> <li> <a href=/software/ itemprop=url rel=bookmark title=Software> <i class=material-icons aria-hidden=true>&#xE86F;</i> Software </a> </li> <li> <a href=https://kura.gg/archives/ itemprop=url rel=bookmark title=Archives> <i class=material-icons>&#xE02F;</i> Archives </a> </li> <li> <a href=https://kura.gg/feeds/rss.xml title=RSS itemprop=url> <i class=material-icons>&#xE0E5;</i> RSS </a> </li> </ul> </div> <div class=mdl-mega-footer--drop-down-section> <h1 class=mdl-mega-footer--heading>Social</h1> <ul class=mdl-mega-footer--link-list> <li> <a href=https://github.com/kura itemprop=url rel=bookmark title=GitHub> <i class=fa aria-hidden=true>&#xF09B;</i> Github </a> </li> </ul> </div> <div class=mdl-mega-footer--drop-down-section> <h1 class=mdl-mega-footer--heading>Links</h1> <ul class=mdl-mega-footer--link-list> <li> <a href=https://kura.gg/blackhole itemprop=url rel=bookmark title=Blackhole> <i class=material-icons aria-hidden=true>&#xE86F;</i> Blackhole </a> </li> <li> <a href=https://kura.gg/yarg itemprop=url rel=bookmark title=Yarg> <i class=material-icons aria-hidden=true>&#xE86F;</i> Yarg </a> </li> <li> <a href=https://kura.gg/eevee itemprop=url rel=bookmark title=Eevee> <i class=material-icons aria-hidden=true>&#xE871;</i> Eevee </a> </li> <li> <a href=https://kura.gg/hauntr itemprop=url rel=bookmark title=Hauntr> <i class=material-icons aria-hidden=true>&#xE871;</i> Hauntr </a> </li> <li> <a href=https://kura.gg/ghastly itemprop=url rel=bookmark title=Ghastly> <i class=material-icons aria-hidden=true>&#xE871;</i> Ghastly </a> </li> </ul> </div> </div> <div class=mdl-mega-footer--bottom-section> <div class=mdl-logo> <a href=https://kura.gg rel=bookmark itemprop=url title=kura.gg> kura.gg </a> </div> <ul class="eevee-footer mdl-mega-footer--link-list"> <li>Powered by love &amp; rainbow sparkles.</li> <li>Source code and content released under the <a href=/license/ title="MIT license">MIT license</a>.</li> </ul> </div> </footer> </div> <link rel=stylesheet href=https://kura.gg/theme/css/eevee.min.css?e96887dc> <script async src=https://kura.gg/theme/js/eevee.min.js?1841d254></script> </body> </html>