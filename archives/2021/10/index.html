<!doctype html><html lang=en><meta charset=utf-8><meta content=width=device-width,initial-scale=1.0,minimum-scale=1.0 name=viewport><link href=https://kura.gg hreflang=en rel=alternate><link href=https://kura.gg rel=dns-prefetch><link href=https://kura.gg/theme/css/eevee.min.css?1c9d8344 rel=stylesheet><script async src=https://kura.gg/theme/js/eevee.min.js?1841d254></script><link href=https://kura.gg/feeds/rss.xml rel=alternate title=kura.gg type=application/rss+xml><link href=https://kura.gg/feeds/atom.xml rel=alternate title=kura.gg type=application/atom+xml><meta content=kura.gg property=og:site_name><meta content=article property=og:type><meta content=kura.gg property=og:title><meta content=https://kura.gg/archives/2021/10/index.html property=og:url><meta content=https://kura.gg/archives/2021/10/index.png property=og:image><meta content=1920 property=og:image:width><meta content=1080 property=og:image:height><meta content=kura.gg property=twitter:title><meta content=https://kura.gg/archives/2021/10/index.html property=twitter:url><meta content=https://kura.gg/archives/2021/10/index.png property=twitter:image><meta content=summary_large_image property=twitter:card><meta content=1920 property=twitter:image:width><meta content=1080 property=twitter:image:height><link sizes="16x16 32x32 48x48 64x64 128x128 256x256" href=/favicon.png rel=icon type=image/png><link sizes="16x16 32x32 48x48 64x64 128x128 256x256" href=/favicon.ico rel=icon type=image/vnd.microsoft.icon><title>Archives for October 2021</title><body><div class="eevee-layout mdl-layout mdl-js-layout mdl-color--grey-50"><header class="eevee-header mdl-color--grey-50 mdl-color-text--grey-800" itemscope itemtype=http://schema.org/WPHeader><div class=mdl-layout__header-row><div class="mdl-layout__drawer-button mdl-color-text--accent eevee-mobile-button mdl-layout--small-screen-only" aria-expanded=false role=button tabindex=0><i class=material-icons></i></div><span class="eevee-logo mdl-color-text--accent mdl-layout-title"> <h2 id=top><a href=https://kura.gg rel=bookmark title=kura.gg> kura.gg </a></h2> </span><div class=mdl-layout-spacer role=presentation></div><nav aria-label="Header navigation" class="eevee-nav mdl-navigation mdl-layout--large-screen-only" itemscope itemtype=http://schema.org/SiteNavigationElement><a class="mdl-color-text--accent mdl-navigation__link" href=/blackhole itemprop=url rel=bookmark title=Blackhole> <i aria-hidden=true class=material-icons></i> Blackhole </a><a class="mdl-color-text--accent mdl-navigation__link" href=/eevee itemprop=url rel=bookmark title=Eevee> <i aria-hidden=true class=material-icons></i> Eevee </a><a class="mdl-color-text--accent mdl-navigation__link" href=/hauntr itemprop=url rel=bookmark title=Hauntr> <i aria-hidden=true class=material-icons></i> Hauntr </a><a class="mdl-color-text--accent mdl-navigation__link" href=/ghastly itemprop=url rel=bookmark title=Ghastly> <i aria-hidden=true class=material-icons></i> Ghastly </a><a class="mdl-color-text--accent mdl-navigation__link" title="Pelican Plugins" href=/pelican-plugins itemprop=url rel=bookmark> <i aria-hidden=true class=material-icons></i> Pelican Plugins </a><a class="mdl-color-text--accent mdl-navigation__link" href=/contact/ itemprop=url rel=bookmark title=Contact> <i aria-hidden=true class=material-icons></i> Contact </a><a class="mdl-color-text--accent mdl-navigation__link" href=https://kura.gg/archives/ itemprop=url rel=bookmark title=Archives> <i class=material-icons></i> Archives </a><a class="mdl-color-text--accent mdl-navigation__link" href=https://kura.gg/feeds/rss.xml itemprop=url title=RSS> <i class=material-icons></i> RSS </a><a class="mdl-color-text--accent mdl-navigation__link" href=https://kura.gg/feeds/atom.xml itemprop=url title=Atom> <i class=material-icons></i> Atom </a></nav></div></header><div class="eevee-mobile-header mdl-layout__drawer mdl-color--white" aria-hidden=true><span class=mdl-layout-title> <h2 class="eevee-mobile-logo mdl-color-text--accent">kura.gg</h2> </span><div class="mdl-navigation mdl-color--white"><nav aria-label="Header navigation" class="eevee-nav mdl-navigation" itemscope itemtype=http://schema.org/SiteNavigationElement><a class="mdl-color-text--accent mdl-navigation__link" href=https://kura.gg itemprop=url rel=bookmark> <i aria-hidden=true class=material-icons>  </i> Home </a><a class="mdl-color-text--accent mdl-navigation__link" href=/blackhole itemprop=url rel=bookmark title=Blackhole> <i aria-hidden=true class=material-icons></i> Blackhole </a><a class="mdl-color-text--accent mdl-navigation__link" href=/eevee itemprop=url rel=bookmark title=Eevee> <i aria-hidden=true class=material-icons></i> Eevee </a><a class="mdl-color-text--accent mdl-navigation__link" href=/hauntr itemprop=url rel=bookmark title=Hauntr> <i aria-hidden=true class=material-icons></i> Hauntr </a><a class="mdl-color-text--accent mdl-navigation__link" href=/ghastly itemprop=url rel=bookmark title=Ghastly> <i aria-hidden=true class=material-icons></i> Ghastly </a><a class="mdl-color-text--accent mdl-navigation__link" title="Pelican Plugins" href=/pelican-plugins itemprop=url rel=bookmark> <i aria-hidden=true class=material-icons></i> Pelican Plugins </a><a class="mdl-color-text--accent mdl-navigation__link" href=/contact/ itemprop=url rel=bookmark title=Contact> <i aria-hidden=true class=material-icons></i> Contact </a><a class="mdl-color-text--accent mdl-navigation__link" href=https://kura.gg/archives/ itemprop=url rel=bookmark title=Archives> <i class=material-icons></i> Archives </a><a class="mdl-color-text--accent mdl-navigation__link" href=https://kura.gg/feeds/rss.xml itemprop=url title=RSS> <i class=material-icons></i> RSS </a><a class="mdl-color-text--accent mdl-navigation__link" href=https://kura.gg/feeds/atom.xml itemprop=url title=Atom> <i class=material-icons></i> Atom </a></nav></div></div><div class="eevee-ribbon mdl-color--primary-dark" role=presentation></div><main class="eevee-main mdl-layout__content"><div class="eevee-container mdl-grid"><div class="mdl-cell mdl-cell--2-col mdl-cell--hide-tablet mdl-cell--hide-phone" role=presentation></div><div aria-label="Main content" class="eevee-content mdl-color--white mdl-shadow--2dp mdl-color-text--grey-800 mdl-cell mdl-cell--8-col"><article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting><meta content=fullKeyboardControl itemprop=accessibilityControl><meta content=fullMouseControl itemprop=accessibilityControl><meta content=bookmarks itemprop=accessibilityControl><meta content=captions itemprop=accessibilityControl><meta content=alternativeText itemprop=accessibilityControl><meta content=index itemprop=accessibilityControl><meta content=readingOrder itemprop=accessibilityControl><meta content=structuralNavigation itemprop=accessibilityControl><meta content=tableOfContents itemprop=accessibilityControl><meta content=noFlashingHazard itemprop=accessibilityHazard><meta content=noMotionSimulationHazard itemprop=accessibilityHazard><meta content=noSoundHazard itemprop=accessibilityHazard><meta content=ARIA itemprop=accessibilityAPI><div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation><a class=hidden href=https://kura.gg/authors/kura/ itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a></div><meta content="cloudflare http content-security-policy csp" itemprop=keywords><meta content=misc itemprop=keywords><div class="eevee-meta mdl-color-text--grey-500"><time datetime=2021-10-24T12:00:00+01:00 itemprop=datePublished> 24 Oct 2021 </time></div><h2 class=article-title itemprop=name><a title="Permalink to 'Playing with Cloudflare Workers: Injecting CSP nonces in to responses'" href=https://kura.gg/2021/10/24/playing-with-cloudflare-workers-injecting-csp-nonce/ itemprop=url rel=bookmark> Playing with Cloudflare Workers: Injecting <span class=caps>CSP</span> nonces in to responses </a></h2><section class=summary-content itemprop=articleBody><img alt="Mew, the Pokémon" class=align-center src=/images/151_mew.png><p><tt class="docutils literal"><span class=pre>Content-Security-Policy</span></tt> (<span class=caps>CSP</span>) is an <span class=caps>HTTP</span> header returned by servers that gives the client some information on where resources can be loaded. For example setting <tt class="docutils literal"><span class=pre>script-src</span> 'self'</tt> in the <span class=caps>CSP</span> tells the client that it should only load script resources from the current origin. <tt class="docutils literal">'self'</tt> for this blog post would mean <tt class="docutils literal"><span class=pre>https://kura.gg</span></tt>.<p>To make loading those resources more secure you can use hashes or nonces within the <span class=caps>CSP</span> that the client can verify. Below I will show how I inject <span class=caps>CSP</span> nonces using Cloudflare Workers in to responses from my origin.<div class=section id=security-considerations><h2>Security considerations</h2><p><strong>Think of this as an academic exercise rather than something you should do.</strong><p>This article will only explain how I inject the nonces in to responses from the origin. This isn’t really secure given the method I use to do this is pretty dumb — it just adds a generated nonce to <tt class="docutils literal">&LTscript></tt> and <tt class="docutils literal">&LTlink <span class=pre>rel …</span></tt></div></section><div class="eevee-divider mdl-color--accent" role=presentation></div><div class=eevee-divider-to-top><a title="Back to the top of the page" href=#top itemprop=url> Back to the top of the page </a></div></article><article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting><meta content=fullKeyboardControl itemprop=accessibilityControl><meta content=fullMouseControl itemprop=accessibilityControl><meta content=bookmarks itemprop=accessibilityControl><meta content=captions itemprop=accessibilityControl><meta content=alternativeText itemprop=accessibilityControl><meta content=index itemprop=accessibilityControl><meta content=readingOrder itemprop=accessibilityControl><meta content=structuralNavigation itemprop=accessibilityControl><meta content=tableOfContents itemprop=accessibilityControl><meta content=noFlashingHazard itemprop=accessibilityHazard><meta content=noMotionSimulationHazard itemprop=accessibilityHazard><meta content=noSoundHazard itemprop=accessibilityHazard><meta content=ARIA itemprop=accessibilityAPI><div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation><a class=hidden href=https://kura.gg/authors/kura/ itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a></div><meta content="pokemon cloudflare http" itemprop=keywords><meta content=misc itemprop=keywords><div class="eevee-meta mdl-color-text--grey-500"><time datetime=2021-10-15T20:50:00+01:00 itemprop=datePublished> 15 Oct 2021 </time></div><h2 class=article-title itemprop=name><a title="Permalink to 'Playing with Cloudflare Workers: Adding a random Pokémon to response headers'" href=https://kura.gg/2021/10/15/playing-with-cloudflare-workers-adding-random-pokemon-header/ itemprop=url rel=bookmark> Playing with Cloudflare Workers: Adding a random Pokémon to response headers </a></h2><section class=summary-content itemprop=articleBody><img alt="Eevee, the Pokémon" class=align-center src=/images/133_eevee.png><p>I was a little bored tonight and had a thought; “can I find a way to add a random Pokédex and it’s National Pokédex number as a header to requests on my website?”<p>The answer is - quite simply - “yes”.<div class=section id=cloudflare-workers><h2>Cloudflare Workers</h2><p>This website runs on Cloudflare’s content delivery network and as such I have access to <a class="reference external" href=https://workers.cloudflare.com/>Cloudflare Workers</a>, allowing me to run arbitrary code at the edge for incoming requests.<p>Setting up a worker that picks a random Pokemon and injects it as a header is very simple, add a worker, write the code and add some routing to it.</div><div class=section id=try-it-yourself><h2>Try it yourself</h2><pre class="code bash literal-block">
curl<span class=w> </span>-sI<span class=w> </span>https://kura.gg/<span class=w> </span><span class=p>|</span><span class=w> </span>grep<span class=w> </span><span class=s2>"x-pokemon"</span><span class=w>
</span>x-pokemon:<span class=w> </span>Eevee<span class=w> </span><span class=o>(</span><span class=c1>#133)</span>
</pre></div><div class=section id=the-code><h2>The code</h2><pre class="code javascript literal-block">
<span class=kd>let</span><span class=w> </span><span class=nx>pokemon</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span><span class=w>
    </span><span class=s2>"Bulbasaur (#1)"</span><span class=p>,</span><span class=w> </span><span class=s2>"Ivysaur (#2)"</span><span class=p>,</span><span class=w> </span><span class=s2>"Venusaur (#3)"</span><span class=p>,</span><span class=w> </span><span class=s2>"Charmander (#4)"</span><span class=p>,</span><span class=w> </span><span class=s2>"Charmeleon (#5)"</span><span class=p>,</span><span class=w>
    </span><span class=s2>"Charizard (#6)"</span><span class=p>,</span><span class=w> </span><span class=s2>"Squirtle (#7)"</span><span class=p>,</span><span class=w> </span><span class=s2>"Wartortle (#8)"</span><span class=p>,</span><span class=w> </span><span class=s2>"Blastoise (#9)"</span><span class=p>,</span><span class=w> </span><span class=s2>"Caterpie (#10)"</span><span class=p>,</span><span class=w>
    </span><span class=s2>"Metapod (#11)"</span><span class=p>,</span><span class=w> </span><span class=s2>"Butterfree (#12)"</span><span class=p>,</span><span class=w> </span><span class=s2>"Weedle (#13)"</span><span class=p>,</span><span class=w> </span><span class=s2>"Kakuna (#14)"</span><span class=p>,</span><span class=w> </span><span class=s2>"Beedrill (#15)"</span><span class=p>,</span><span class=w>
    </span><span class=s2>"Pidgey …</span></pre></div></section><div class="eevee-divider mdl-color--accent" role=presentation></div><div class=eevee-divider-to-top><a title="Back to the top of the page" href=#top itemprop=url> Back to the top of the page </a></div></article><article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting><meta content=fullKeyboardControl itemprop=accessibilityControl><meta content=fullMouseControl itemprop=accessibilityControl><meta content=bookmarks itemprop=accessibilityControl><meta content=captions itemprop=accessibilityControl><meta content=alternativeText itemprop=accessibilityControl><meta content=index itemprop=accessibilityControl><meta content=readingOrder itemprop=accessibilityControl><meta content=structuralNavigation itemprop=accessibilityControl><meta content=tableOfContents itemprop=accessibilityControl><meta content=noFlashingHazard itemprop=accessibilityHazard><meta content=noMotionSimulationHazard itemprop=accessibilityHazard><meta content=noSoundHazard itemprop=accessibilityHazard><meta content=ARIA itemprop=accessibilityAPI><div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation><a class=hidden href=https://kura.gg/authors/kura/ itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a></div><meta content=gmail,email,smtp,dnssec itemprop=keywords><meta content=email itemprop=keywords><div class="eevee-meta mdl-color-text--grey-500"><time datetime=2021-10-14T16:50:00+01:00 itemprop=datePublished> 14 Oct 2021 </time></div><h2 class=article-title itemprop=name><a title="Permalink to 'Google Workspace Gmail MX records signed with DNSSEC'" href=https://kura.gg/2021/10/14/google-workspace-gmail-mx-dnssec-signed/ itemprop=url rel=bookmark> Google Workspace Gmail <span class=caps>MX</span> records signed with <span class=caps>DNSSEC</span> </a></h2><section class=summary-content itemprop=articleBody><p>Gmail provided by the paid Google Workspace service (formerly known as G Suite and Google Apps) has unofficial <span class=caps>DNSSEC</span>-signed <span class=caps>MX</span> records available for use. The officially supported ones that you’re told to configure do not offer <span class=caps>DNSSEC</span> signing.<p>These <span class=caps>MX</span> records have both IPv4 and IPv6 addresses, although the records are not officially supported or documented and may be unreliable or removed at any point. (I’ve been using them for a while now and they seem perfectly fine to me but use at your own risk.)<pre class="code literal-block">
mx1.smtp.goog
mx2.smtp.goog
mx3.smtp.goog
mx4.smtp.goog
</pre><p>The table below has the <span class=caps>MX</span> record and the A and <span class=caps>AAAA</span> record values.<pre class="code literal-block">
mx1.smtp.goog
    216.239.32.151
    2001:4860:4802:32::97

mx2.smtp.goog
    216.239.34.151
    2001:4860:4802:34::97

mx3.smtp.goog
    216.239.36.151
    2001:4860:4802:36 …</pre></section></article><div class=eevee-page-spacer role=presentation></div></div></div></main><div class="eevee-pagination__container eevee-container mdl-grid"><div class="mdl-cell mdl-cell--2-col mdl-cell--hide-tablet mdl-cell--hide-phone" role=presentation></div><div class="mdl-color-text--grey-800 mdl-cell mdl-cell--8-col"><nav class="eevee-pagination mdl-cell mdl-cell--12-col" aria-label=Pagination itemscope itemtype=http://schema.org/SiteNavigationElement><div class=eevee-spacer></div></nav></div></div><footer class=mdl-mega-footer itemscope itemtype=http://schema.org/SiteNavigationElement><div class=mdl-mega-footer--top-section><div class=mdl-mega-footer--drop-down-section><ul class=mdl-mega-footer--link-list><li><a title="Back to the top of the page" href=#top itemprop=url> Back to the top of the page </a></ul></div></div><div aria-label="Footer navigation" class=mdl-mega-footer--middle-section itemscope itemtype=http://schema.org/SiteNavigationElement><div class=mdl-mega-footer--drop-down-section><h1 class=mdl-mega-footer--heading>Menu</h1><ul class=mdl-mega-footer--link-list><li><a href=/contact/ itemprop=url rel=bookmark title=Contact> <i aria-hidden=true class=material-icons></i> Contact </a><li><a href=https://kura.gg/archives/ itemprop=url rel=bookmark title=Archives> <i class=material-icons></i> Archives </a><li><a href=https://kura.gg/feeds/rss.xml itemprop=url title=RSS> <i class=material-icons></i> RSS </a><li><a href=https://kura.gg/feeds/atom.xml itemprop=url title=Atom> <i class=material-icons></i> Atom </a></ul></div><div class=mdl-mega-footer--drop-down-section><h1 class=mdl-mega-footer--heading>Social</h1><ul class=mdl-mega-footer--link-list><li><a href=https://github.com/kura itemprop=url rel=bookmark title=GitHub> <i aria-hidden=true class=fa></i> Github </a><li><a href=https://noc.social/@kura itemprop=url rel=me title=@kura@noc.social> <i aria-hidden=true class=fa>🦣</i> @kura@noc.social </a></ul></div><div class=mdl-mega-footer--drop-down-section><h1 class=mdl-mega-footer--heading>Links</h1><ul class=mdl-mega-footer--link-list><li><a href=/blackhole itemprop=url rel=bookmark title=Blackhole> <i aria-hidden=true class=material-icons></i> Blackhole </a><li><a href=/eevee itemprop=url rel=bookmark title=Eevee> <i aria-hidden=true class=material-icons></i> Eevee </a><li><a href=/hauntr itemprop=url rel=bookmark title=Hauntr> <i aria-hidden=true class=material-icons></i> Hauntr </a><li><a href=/ghastly itemprop=url rel=bookmark title=Ghastly> <i aria-hidden=true class=material-icons></i> Ghastly </a><li><a title="Pelican Plugins" href=/pelican-plugins itemprop=url rel=bookmark> <i aria-hidden=true class=material-icons></i> Pelican Plugins </a></ul></div></div><div class=mdl-mega-footer--bottom-section><div class=mdl-logo><a href=https://kura.gg itemprop=url rel=bookmark title=kura.gg> kura.gg </a></div><ul class="eevee-footer mdl-mega-footer--link-list"><li>Powered by love & rainbow sparkles.<li>Source code and content released under the <a title="MIT license" href=/license/>MIT license</a>.</ul></div></footer></div>