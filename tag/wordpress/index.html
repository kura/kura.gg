<!doctype html><html lang=en><meta charset=utf-8><meta content=width=device-width,initial-scale=1.0,minimum-scale=1.0 name=viewport><link href=https://kura.gg hreflang=en rel=alternate><link href=https://kura.gg rel=dns-prefetch><link href=https://kura.gg/theme/css/eevee.min.css?1c9d8344 rel=stylesheet><script async src=https://kura.gg/theme/js/eevee.min.js?1841d254></script><link href=https://kura.gg/feeds/rss.xml rel=alternate title=kura.gg type=application/rss+xml><link href=https://kura.gg/feeds/atom.xml rel=alternate title=kura.gg type=application/atom+xml><meta content=kura.gg property=og:site_name><meta content=article property=og:type><meta content=kura.gg property=og:title><meta content=https://kura.gg/tag/wordpress/index.html property=og:url><meta content=https://kura.gg/tag/wordpress/index.png property=og:image><meta content=1920 property=og:image:width><meta content=1080 property=og:image:height><meta content=kura.gg property=twitter:title><meta content=https://kura.gg/tag/wordpress/index.html property=twitter:url><meta content=https://kura.gg/tag/wordpress/index.png property=twitter:image><meta content=summary_large_image property=twitter:card><meta content=1920 property=twitter:image:width><meta content=1080 property=twitter:image:height><link sizes="16x16 32x32 48x48 64x64 128x128 256x256" href=/favicon.png rel=icon type=image/png><link sizes="16x16 32x32 48x48 64x64 128x128 256x256" href=/favicon.ico rel=icon type=image/vnd.microsoft.icon><title>Articles with the 'wordpress' tag</title><body><div class="eevee-layout mdl-layout mdl-js-layout mdl-color--grey-50"><header class="eevee-header mdl-color--grey-50 mdl-color-text--grey-800" itemscope itemtype=http://schema.org/WPHeader><div class=mdl-layout__header-row><div class="mdl-layout__drawer-button mdl-color-text--accent eevee-mobile-button mdl-layout--small-screen-only" aria-expanded=false role=button tabindex=0><i class=material-icons>î—’</i></div><span class="eevee-logo mdl-color-text--accent mdl-layout-title"> <h2 id=top><a href=https://kura.gg rel=bookmark title=kura.gg> kura.gg </a></h2> </span><div class=mdl-layout-spacer role=presentation></div><nav aria-label="Header navigation" class="eevee-nav mdl-navigation mdl-layout--large-screen-only" itemscope itemtype=http://schema.org/SiteNavigationElement><a class="mdl-color-text--accent mdl-navigation__link" href=/blackhole itemprop=url rel=bookmark title=Blackhole> <i aria-hidden=true class=material-icons>î¡¯</i> Blackhole </a><a class="mdl-color-text--accent mdl-navigation__link" href=/eevee itemprop=url rel=bookmark title=Eevee> <i aria-hidden=true class=material-icons>î¡±</i> Eevee </a><a class="mdl-color-text--accent mdl-navigation__link" href=/hauntr itemprop=url rel=bookmark title=Hauntr> <i aria-hidden=true class=material-icons>î¡±</i> Hauntr </a><a class="mdl-color-text--accent mdl-navigation__link" href=/ghastly itemprop=url rel=bookmark title=Ghastly> <i aria-hidden=true class=material-icons>î¡±</i> Ghastly </a><a class="mdl-color-text--accent mdl-navigation__link" title="Pelican Plugins" href=/pelican-plugins itemprop=url rel=bookmark> <i aria-hidden=true class=material-icons>î¡¯</i> Pelican Plugins </a><a class="mdl-color-text--accent mdl-navigation__link" href=/contact/ itemprop=url rel=bookmark title=Contact> <i aria-hidden=true class=material-icons>î‚·</i> Contact </a><a class="mdl-color-text--accent mdl-navigation__link" href=https://kura.gg/archives/ itemprop=url rel=bookmark title=Archives> <i class=material-icons>î€¯</i> Archives </a><a class="mdl-color-text--accent mdl-navigation__link" href=https://kura.gg/feeds/rss.xml itemprop=url title=RSS> <i class=material-icons>îƒ¥</i> RSS </a><a class="mdl-color-text--accent mdl-navigation__link" href=https://kura.gg/feeds/atom.xml itemprop=url title=Atom> <i class=material-icons>îƒ¥</i> Atom </a></nav></div></header><div class="eevee-mobile-header mdl-layout__drawer mdl-color--white" aria-hidden=true><span class=mdl-layout-title> <h2 class="eevee-mobile-logo mdl-color-text--accent">kura.gg</h2> </span><div class="mdl-navigation mdl-color--white"><nav aria-label="Header navigation" class="eevee-nav mdl-navigation" itemscope itemtype=http://schema.org/SiteNavigationElement><a class="mdl-color-text--accent mdl-navigation__link" href=https://kura.gg itemprop=url rel=bookmark> <i aria-hidden=true class=material-icons> î¢Š </i> Home </a><a class="mdl-color-text--accent mdl-navigation__link" href=/blackhole itemprop=url rel=bookmark title=Blackhole> <i aria-hidden=true class=material-icons>î¡¯</i> Blackhole </a><a class="mdl-color-text--accent mdl-navigation__link" href=/eevee itemprop=url rel=bookmark title=Eevee> <i aria-hidden=true class=material-icons>î¡±</i> Eevee </a><a class="mdl-color-text--accent mdl-navigation__link" href=/hauntr itemprop=url rel=bookmark title=Hauntr> <i aria-hidden=true class=material-icons>î¡±</i> Hauntr </a><a class="mdl-color-text--accent mdl-navigation__link" href=/ghastly itemprop=url rel=bookmark title=Ghastly> <i aria-hidden=true class=material-icons>î¡±</i> Ghastly </a><a class="mdl-color-text--accent mdl-navigation__link" title="Pelican Plugins" href=/pelican-plugins itemprop=url rel=bookmark> <i aria-hidden=true class=material-icons>î¡¯</i> Pelican Plugins </a><a class="mdl-color-text--accent mdl-navigation__link" href=/contact/ itemprop=url rel=bookmark title=Contact> <i aria-hidden=true class=material-icons>î‚·</i> Contact </a><a class="mdl-color-text--accent mdl-navigation__link" href=https://kura.gg/archives/ itemprop=url rel=bookmark title=Archives> <i class=material-icons>î€¯</i> Archives </a><a class="mdl-color-text--accent mdl-navigation__link" href=https://kura.gg/feeds/rss.xml itemprop=url title=RSS> <i class=material-icons>îƒ¥</i> RSS </a><a class="mdl-color-text--accent mdl-navigation__link" href=https://kura.gg/feeds/atom.xml itemprop=url title=Atom> <i class=material-icons>îƒ¥</i> Atom </a></nav></div></div><div class="eevee-ribbon mdl-color--primary-dark" role=presentation></div><main class="eevee-main mdl-layout__content"><div class="eevee-container mdl-grid"><div class="mdl-cell mdl-cell--2-col mdl-cell--hide-tablet mdl-cell--hide-phone" role=presentation></div><div aria-label="Main content" class="eevee-content mdl-color--white mdl-shadow--2dp mdl-color-text--grey-800 mdl-cell mdl-cell--8-col"><article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting><meta content=fullKeyboardControl itemprop=accessibilityControl><meta content=fullMouseControl itemprop=accessibilityControl><meta content=bookmarks itemprop=accessibilityControl><meta content=captions itemprop=accessibilityControl><meta content=alternativeText itemprop=accessibilityControl><meta content=index itemprop=accessibilityControl><meta content=readingOrder itemprop=accessibilityControl><meta content=structuralNavigation itemprop=accessibilityControl><meta content=tableOfContents itemprop=accessibilityControl><meta content=noFlashingHazard itemprop=accessibilityHazard><meta content=noMotionSimulationHazard itemprop=accessibilityHazard><meta content=noSoundHazard itemprop=accessibilityHazard><meta content=ARIA itemprop=accessibilityAPI><div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation><a class=hidden href=https://kura.gg/authors/kura/ itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a></div><meta content=apache2,nginx,wordpress,wp-super-cache itemprop=keywords><meta content=tutorials itemprop=keywords><div class="eevee-meta mdl-color-text--grey-500"><time datetime=2011-09-30T23:21:00+01:00 itemprop=datePublished> 30 Sep 2011 </time>Â â€” 2 min read</div><h2 class=article-title itemprop=name><a title="Permalink to 'nginx config for reverse proxying Wordpress & WP Super Cache and keeping the load offÂ Apache2'" href=https://kura.gg/2011/09/30/nginx-config-for-reverse-proxying-wordpress-wp-super-cache-and-keeping-the-load-off-apache2/ itemprop=url rel=bookmark> nginx config for reverse proxying Wordpress <span class=amp>&</span> <span class=caps>WP</span> Super Cache and keeping the load offÂ Apache2 </a></h2><section class=summary-content itemprop=articleBody><div class=section id=the-point><h2>TheÂ point</h2><p>The whole point of this is to get as much load off of Apache as possible to keep the server running nice andÂ smoothly.</div><div class=section id=configuration><h2>Configuration</h2><p>The configuration below will mean that nginx will serve basicallyÂ everything;<ul class=simple><li>staticÂ files<li>uploaded filesÂ and<li>cachedÂ content</ul><p>simply replace the <strong><span class=caps>VARIABLES</span></strong> below and everything should be good to go, if copy-pasting from below isnâ€™t working properly you can download a full copy from <a class="reference external" href=/files/2011/09/server.txt>here</a>.<div class=highlight><pre><span></span><span class=k>server</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=kn>listen</span><span class=w> </span><span class=mi>80</span><span class=p>;</span>
<span class=w>  </span><span class=kn>server_name</span><span class=w> </span><span class=s>**DOMAIN_HERE**</span><span class=p>;</span>
<span class=w>  </span><span class=kn>access_log</span><span class=w> </span><span class=s>/var/log/nginx/access.**DOMAIN_HERE**.log</span><span class=p>;</span>

<span class=w>  </span><span class=kn>gzip</span><span class=w> </span><span class=no>on</span><span class=p>;</span>
<span class=w>  </span><span class=kn>gzip_disable</span><span class=w> </span><span class=s>msie6</span><span class=p>;</span><span class=w> </span><span class=c1># disable gzip for IE6</span>
<span class=w>  </span><span class=kn>gzip_static</span><span class=w> </span><span class=no>on</span><span class=p>;</span>
<span class=w>  </span><span class=kn>gzip_comp_level</span><span class=w> </span><span class=mi>9</span><span class=p>;</span><span class=w> </span><span class=c1># highest level of compression</span>
<span class=w>  </span><span class=kn>gzip_proxied</span><span class=w> </span><span class=s>any</span><span class=p>;</span>
<span class=w>  </span><span class=kn>gzip_types</span><span class=w> </span><span class=s>text/plain</span><span class=w> </span><span class=s>text/css</span><span class=w> </span><span class=s>application/x-javascript</span><span class=w> </span><span class=s>text/xml</span><span class=w> </span><span class=s>application/xml</span><span class=w> </span><span class=s>application/xml+rss</span><span class=w> </span><span class=s>text/javascript</span><span class=p>;</span>

<span class=w>  </span><span class=kn>proxy_redirect</span><span class=w> </span><span class=no>off</span><span class=p>;</span>
<span class=w>  </span><span class=kn>proxy_set_header</span><span class=w> </span><span class=s>Host</span><span class=w> </span><span class=nv>$host</span><span class=p>;</span>
<span class=w>  </span><span class=kn>proxy_set_header</span><span class=w> </span><span class=s>X-Real-IP</span><span class=w> </span><span class=nv>$remote_addr</span><span class=p>;</span>
<span class=w>  </span><span class=kn>proxy_set_header</span><span class=w> </span><span class=s>X-Forwarded-For</span><span class=w> </span><span class=nv>$proxy_add_x_forwarded_for</span><span class=p>;</span>
<span class=w>  </span><span class=kn>proxy_pass_header</span><span class=w> </span><span class=s>Set-Cookie</span><span class=p>;</span><span class=kn>root</span><span class=w> </span><span class=s>**/PATH/TO/WORDPRESS**</span><span class=p>;</span>

<span class=w>  </span><span class=c1># default location, used for the basic proxying</span>
<span class=w>  </span><span class=kn>location</span><span class=w> </span><span class=s>/</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=c1># if we're requesting a file and â€¦</span></pre></div></div></section><div class="eevee-divider mdl-color--accent" role=presentation></div><div class=eevee-divider-to-top><a title="Back to the top of the page" href=#top itemprop=url> Back to the top of the page </a></div></article><article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting><meta content=fullKeyboardControl itemprop=accessibilityControl><meta content=fullMouseControl itemprop=accessibilityControl><meta content=bookmarks itemprop=accessibilityControl><meta content=captions itemprop=accessibilityControl><meta content=alternativeText itemprop=accessibilityControl><meta content=index itemprop=accessibilityControl><meta content=readingOrder itemprop=accessibilityControl><meta content=structuralNavigation itemprop=accessibilityControl><meta content=tableOfContents itemprop=accessibilityControl><meta content=noFlashingHazard itemprop=accessibilityHazard><meta content=noMotionSimulationHazard itemprop=accessibilityHazard><meta content=noSoundHazard itemprop=accessibilityHazard><meta content=ARIA itemprop=accessibilityAPI><div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation><a class=hidden href=https://kura.gg/authors/kura/ itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a></div><meta content=apache,nginx,varnish,wordpress itemprop=keywords><meta content=tutorials itemprop=keywords><div class="eevee-meta mdl-color-text--grey-500"><time datetime=2010-09-26T19:41:00+01:00 itemprop=datePublished> 26 Sep 2010 </time>Â â€” 6 min read</div><h2 class=article-title itemprop=name><a title="Permalink to 'WordPress + nginx + Varnish + ApacheÂ 2'" href=https://kura.gg/2010/09/26/nginx-varnish-apache2/ itemprop=url rel=bookmark> WordPress + nginx + Varnish + ApacheÂ 2 </a></h2><section class=summary-content itemprop=articleBody><p>Lately Iâ€™ve been doing a lot of work with Varnish, this includes testing it within a load balanced environment, putting it behind nginx, putting it in front of Solr, the list goesÂ on.<p>This blog post will hopefully give you an insight in to a simple way of combining nginx, Varnish and Apache to create a powerful Wordpress environment that can really take aÂ hammering.<p>Iâ€™m going to assume you already have Apache and nginx working together, if not I suggest you read my other articles on these subjects to learn how to combineÂ them.<div class=section id=installing-varnish><h2>InstallingÂ Varnish</h2><div class=highlight><pre><span></span>sudo<span class=w> </span>apt-get<span class=w> </span>install<span class=w> </span>varnish
</pre></div></div><div class=section id=configuring-apache><h2>ConfiguringÂ Apache</h2><p>I suggest binding Apache to port 81, this is easy to change, open the following file in your favouriteÂ editor.<blockquote>/etc/apache2/ports.conf</blockquote><p>Change the Listen and NameVirtualHost linesÂ to:<div class=highlight><pre><span></span><span class=nb>Listen</span><span class=w> </span><span class=m>81</span>
<span class=nb>NameVirtualHost</span><span class=w> </span>*:81
</pre></div><p>This will mean you need to go and change all â€¦</div></section><div class="eevee-divider mdl-color--accent" role=presentation></div><div class=eevee-divider-to-top><a title="Back to the top of the page" href=#top itemprop=url> Back to the top of the page </a></div></article><article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting><meta content=fullKeyboardControl itemprop=accessibilityControl><meta content=fullMouseControl itemprop=accessibilityControl><meta content=bookmarks itemprop=accessibilityControl><meta content=captions itemprop=accessibilityControl><meta content=alternativeText itemprop=accessibilityControl><meta content=index itemprop=accessibilityControl><meta content=readingOrder itemprop=accessibilityControl><meta content=structuralNavigation itemprop=accessibilityControl><meta content=tableOfContents itemprop=accessibilityControl><meta content=noFlashingHazard itemprop=accessibilityHazard><meta content=noMotionSimulationHazard itemprop=accessibilityHazard><meta content=noSoundHazard itemprop=accessibilityHazard><meta content=ARIA itemprop=accessibilityAPI><div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation><a class=hidden href=https://kura.gg/authors/kura/ itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a></div><meta content=apache,cache,nginx,proxy,proxy_cache,wordpress itemprop=keywords><meta content=tutorials itemprop=keywords><div class="eevee-meta mdl-color-text--grey-500"><time datetime=2010-04-18T12:51:00+01:00 itemprop=datePublished> 18 Apr 2010 </time>Â â€” 4 min read</div><h2 class=article-title itemprop=name><a title="Permalink to 'New syslog.tv nginx wordpress site configurationÂ explained'" href=https://kura.gg/2010/04/18/new-syslog-tv-nginx-wordpress-site-configuration/ itemprop=url rel=bookmark> New syslog.tv nginx wordpress site configurationÂ explained </a></h2><section class=summary-content itemprop=articleBody><div class=section id=configuration-changes><h2>ConfigurationÂ changes</h2><p>I made some modifications to my nginx configuration this weekend to improve performance and clear up someÂ bugs.<div class=highlight><pre><span></span><span class=k>upstream</span><span class=w> </span><span class=s>backend</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kn>server</span><span class=w> </span><span class=n>127.0.0.1</span><span class=p>:</span><span class=mi>81</span><span class=w> </span><span class=s>fail_timeout=120s</span><span class=p>;</span>
<span class=p>}</span>

<span class=k>server</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kn>listen</span><span class=w> </span><span class=mi>80</span><span class=p>;</span>
<span class=w>    </span><span class=kn>server_name</span><span class=w> </span><span class=s>syslog.tv</span><span class=p>;</span>

<span class=w>    </span><span class=kn>access_log</span><span class=w> </span><span class=s>/var/log/nginx/access.syslog.tv.log</span><span class=p>;</span>

<span class=w>    </span><span class=kn>gzip</span><span class=w> </span><span class=no>on</span><span class=p>;</span>
<span class=w>    </span><span class=kn>gzip_disable</span><span class=w> </span><span class=s>msie6</span><span class=p>;</span>
<span class=w>    </span><span class=kn>gzip_static</span><span class=w> </span><span class=no>on</span><span class=p>;</span>
<span class=w>    </span><span class=kn>gzip_comp_level</span><span class=w> </span><span class=mi>9</span><span class=p>;</span>
<span class=w>    </span><span class=kn>gzip_proxied</span><span class=w> </span><span class=s>any</span><span class=p>;</span>
<span class=w>    </span><span class=kn>gzip_types</span><span class=w> </span><span class=s>text/plain</span><span class=w> </span><span class=s>text/css</span><span class=w> </span><span class=s>application/x-javascript</span><span class=w> </span><span class=s>text/xml</span>
<span class=w>    </span><span class=s>application/xml</span><span class=w> </span><span class=s>application/xml+rss</span><span class=w> </span><span class=s>text/javascript</span><span class=p>;</span>

<span class=w>   </span><span class=kn>location</span><span class=w> </span><span class=s>/</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=kn>root</span><span class=w> </span><span class=s>/var/www/syslog.tv</span><span class=p>;</span>

<span class=w>        </span><span class=kn>set</span><span class=w> </span><span class=nv>$wordpress_logged_in</span><span class=w> </span><span class=s>""</span><span class=p>;</span>
<span class=w>        </span><span class=kn>set</span><span class=w> </span><span class=nv>$comment_author_email</span><span class=w> </span><span class=s>""</span><span class=p>;</span>
<span class=w>        </span><span class=kn>set</span><span class=w> </span><span class=nv>$comment_author</span><span class=w> </span><span class=s>""</span><span class=p>;</span>

<span class=w>        </span><span class=kn>if</span><span class=w> </span><span class=s>(</span><span class=nv>$http_cookie</span><span class=w> </span><span class=p>~</span><span class=sr>*</span><span class=w> </span><span class=s>"wordpress_logged_in_[^=]*=([^%]+)%7C")</span><span class=w> </span><span class=p>{</span>
<span class=w>             </span><span class=kn>set</span><span class=w> </span><span class=nv>$wordpress_logged_in</span><span class=w> </span><span class=s>wordpress_logged_in_</span><span class=nv>$1</span><span class=p>;</span>
<span class=w>        </span><span class=p>}</span>

<span class=w>        </span><span class=kn>if</span><span class=w> </span><span class=s>(</span><span class=nv>$http_cookie</span><span class=w> </span><span class=p>~</span><span class=sr>*</span><span class=w> </span><span class=s>"comment_author_email_[^=]*=([^</span><span class=p>;</span><span class=kn>]+)(</span><span class=p>;</span><span class=kn>|$)")</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=kn>set</span><span class=w> </span><span class=nv>$comment_author_email</span><span class=w> </span><span class=s>comment_author_email_</span><span class=nv>$1</span><span class=p>;</span>
<span class=w>        </span><span class=p>}</span>

<span class=w>        </span><span class=kn>if</span><span class=w> </span><span class=s>(</span><span class=nv>$http_cookie</span><span class=w> </span><span class=p>~</span><span class=sr>*</span><span class=w> </span><span class=s>"comment_author_[^=]*=([^</span><span class=p>;</span><span class=kn>]+)(</span><span class=p>;</span><span class=kn>|$)")</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=kn>set</span><span class=w> </span><span class=nv>$comment_author</span><span class=w> </span><span class=s>comment_author_</span><span class=nv>$1</span><span class=p>;</span>
<span class=w>        </span><span class=p>}</span>

<span class=w>        </span><span class=kn>set</span><span class=w> </span><span class=nv>$my_cache_key</span><span class=w> </span><span class=s>"</span><span class=nv>$scheme://$host$uri$is_args$args$wordpress_logged_in$comment_author_email$comment_author"</span><span class=p>;</span>

<span class=w>        </span><span class=kn>client_max_body_size</span><span class=w> </span><span class=mi>8m</span><span class=p>;</span>

<span class=w>        </span><span class=kn>proxy_redirect</span><span class=w> </span><span class=no>off</span><span class=p>;</span>
<span class=w>        </span><span class=kn>proxy_set_header</span><span class=w> </span><span class=s>Host</span><span class=w> </span><span class=nv>$host</span><span class=p>;</span>
<span class=w>        </span><span class=kn>proxy_set_header</span><span class=w> </span><span class=s>X-Real-IP</span><span class=w> </span><span class=nv>$remote_addr</span><span class=p>;</span>
<span class=w>        </span><span class=kn>proxy_set_header</span><span class=w> </span><span class=s>X-Forwarded-For</span><span class=w> </span><span class=nv>$proxy_add_x_forwarded_for</span><span class=p>;</span>
<span class=w>        </span><span class=kn>proxy_pass_header</span><span class=w> </span><span class=s>Set-Cookie</span><span class=p>;</span>
<span class=w>        </span><span class=kn>proxy_cache</span><span class=w> </span><span class=s>cache</span><span class=p>;</span>
<span class=w>        </span><span class=kn>proxy_cache_key</span><span class=w> </span><span class=nv>$my_cache_key</span><span class=p>;</span>
<span class=w>        </span><span class=kn>proxy_cache_valid</span><span class=w> </span><span class=mi>200</span><span class=w> </span><span class=mi>302</span><span class=w> </span><span class=mi>60m</span><span class=p>;</span>
<span class=w>        </span><span class=kn>proxy_cache_valid</span><span class=w> </span><span class=mi>404</span><span class=w> </span><span class=mi>1m</span><span class=p>;</span>
<span class=w>        </span><span class=kn>proxy_pass</span><span class=w> </span><span class=s>https://backend</span><span class=p>;</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=kn>location</span><span class=w> </span><span class=p>~</span><span class=sr>*</span><span class=w> </span><span class=s>.(jpg|png|gif|jpeg|js|css â€¦</span></pre></div></div></section><div class="eevee-divider mdl-color--accent" role=presentation></div><div class=eevee-divider-to-top><a title="Back to the top of the page" href=#top itemprop=url> Back to the top of the page </a></div></article><article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting><meta content=fullKeyboardControl itemprop=accessibilityControl><meta content=fullMouseControl itemprop=accessibilityControl><meta content=bookmarks itemprop=accessibilityControl><meta content=captions itemprop=accessibilityControl><meta content=alternativeText itemprop=accessibilityControl><meta content=index itemprop=accessibilityControl><meta content=readingOrder itemprop=accessibilityControl><meta content=structuralNavigation itemprop=accessibilityControl><meta content=tableOfContents itemprop=accessibilityControl><meta content=noFlashingHazard itemprop=accessibilityHazard><meta content=noMotionSimulationHazard itemprop=accessibilityHazard><meta content=noSoundHazard itemprop=accessibilityHazard><meta content=ARIA itemprop=accessibilityAPI><div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation><a class=hidden href=https://kura.gg/authors/kura/ itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a></div><meta content="apache,cache,debian,howto,load balancing,nginx,ubuntu,wordpress" itemprop=keywords><meta content=tutorials itemprop=keywords><div class="eevee-meta mdl-color-text--grey-500"><time datetime=2010-02-14T14:27:00+00:00 itemprop=datePublished> 14 Feb 2010 </time>Â â€” 4 min read</div><h2 class=article-title itemprop=name><a title="Permalink to 'More nginx proxy_cache optimizations and nginx loadÂ balancing'" href=https://kura.gg/2010/02/14/more-nginx-proxy_cache-optimizations-and-nginx-load-balancing/ itemprop=url rel=bookmark> More nginx proxy_cache optimizations and nginx loadÂ balancing </a></h2><section class=summary-content itemprop=articleBody><p>This is yet another follow up to post to several previous posts about using nginx as a reverse proxy with caching. It is actually a direct addition to my post from a week or so ago which outlined how to actually using nginxâ€™s proxy caching feature which can be read here â€” <a class="reference external" href=https://syslog.tv/2010/02/07/nginx-proxy_cache-and-explained-benchmarked/>/2010/02/07/nginx-proxy_cache-and-explained-benchmarked/</a>.<div class=section id=even-more-changes><h2>Even moreÂ changes?</h2><p>Yes, even more changes, these are basic changes that are there to improve the caching capabilities and also implement loadÂ balancing.<div class=section id=cache-changes><h3>CacheÂ changes</h3><p>The first set of changes are in the main nginx configurationÂ file<blockquote>/etc/nginx/nginx.conf</blockquote><p>These changes basically just change the proxy_cacheÂ key<div class=highlight><pre><span></span><span class=k>proxy_cache_path</span><span class=w> </span><span class=s>/var/www/nginx_cache</span><span class=w> </span><span class=s>levels=1:2</span><span class=w> </span><span class=s>keys_zone=cache:8m</span><span class=w> </span><span class=s>max_size=1000m</span><span class=w> </span><span class=s>inactive=600m</span><span class=p>;</span>
<span class=k>proxy_temp_path</span><span class=w> </span><span class=s>/tmp/nginx</span><span class=p>;</span>
<span class=k>proxy_cache_key</span><span class=w> </span><span class=s>"</span><span class=nv>$scheme://$host$request_uri"</span><span class=p>;</span>
</pre></div><p>Iâ€™ve decided to put the temporary caches file in to an nginx specific directory, just to separate them from other cache files â€¦</div></div></section><div class="eevee-divider mdl-color--accent" role=presentation></div><div class=eevee-divider-to-top><a title="Back to the top of the page" href=#top itemprop=url> Back to the top of the page </a></div></article><article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting><meta content=fullKeyboardControl itemprop=accessibilityControl><meta content=fullMouseControl itemprop=accessibilityControl><meta content=bookmarks itemprop=accessibilityControl><meta content=captions itemprop=accessibilityControl><meta content=alternativeText itemprop=accessibilityControl><meta content=index itemprop=accessibilityControl><meta content=readingOrder itemprop=accessibilityControl><meta content=structuralNavigation itemprop=accessibilityControl><meta content=tableOfContents itemprop=accessibilityControl><meta content=noFlashingHazard itemprop=accessibilityHazard><meta content=noMotionSimulationHazard itemprop=accessibilityHazard><meta content=noSoundHazard itemprop=accessibilityHazard><meta content=ARIA itemprop=accessibilityAPI><div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation><a class=hidden href=https://kura.gg/authors/kura/ itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a></div><meta content=apache,cache,debian,howto,nginx,php,ubuntu,wordpress itemprop=keywords><meta content=tutorials itemprop=keywords><div class="eevee-meta mdl-color-text--grey-500"><time datetime=2010-02-07T10:27:00+00:00 itemprop=datePublished> 07 Feb 2010 </time>Â â€” 7 min read</div><h2 class=article-title itemprop=name><a title="Permalink to 'nginx, proxy_cache and reverse proxying explained &Â benchmarked'" href=https://kura.gg/2010/02/07/nginx-proxy_cache-and-explained-benchmarked/ itemprop=url rel=bookmark> nginx, proxy_cache and reverse proxying explained <span class=amp>&</span>Â benchmarked </a></h2><section class=summary-content itemprop=articleBody><div class=section id=the-beginning><h2>TheÂ beginning</h2><p>Where to begin? nginx would be a good start I suppose. Itâ€™s far easier and makes much for sense for you to actually read about nginx from itâ€™s own website - <a class="reference external" href=https://nginx.org/en/>https://nginx.org/en/</a> - but just to give a simple explanation too; `nginx is king of static content <span class=caps>HTTP</span>Â servers.`<p>Anyone that has dealt with Apache on medium to high traffic websites will know that Apache is bit of a `wheezy, old geezer` when it comes to content serving using itâ€™s mpm-worker (threaded). Very often high traffic will cause server load to go through the roof but for serving dynamic content, there really is no better <span class=caps>HTTP</span> server than Apache, so this leaves us in a bit of a predicament; a high powered website with dynamic content and lots of static files like <span class=caps>JS</span>, <span class=caps>CSS</span> and imagery, what do weÂ do?!<p>In this example `dynamic â€¦</div></section><div class="eevee-divider mdl-color--accent" role=presentation></div><div class=eevee-divider-to-top><a title="Back to the top of the page" href=#top itemprop=url> Back to the top of the page </a></div></article><article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting><meta content=fullKeyboardControl itemprop=accessibilityControl><meta content=fullMouseControl itemprop=accessibilityControl><meta content=bookmarks itemprop=accessibilityControl><meta content=captions itemprop=accessibilityControl><meta content=alternativeText itemprop=accessibilityControl><meta content=index itemprop=accessibilityControl><meta content=readingOrder itemprop=accessibilityControl><meta content=structuralNavigation itemprop=accessibilityControl><meta content=tableOfContents itemprop=accessibilityControl><meta content=noFlashingHazard itemprop=accessibilityHazard><meta content=noMotionSimulationHazard itemprop=accessibilityHazard><meta content=noSoundHazard itemprop=accessibilityHazard><meta content=ARIA itemprop=accessibilityAPI><div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation><a class=hidden href=https://kura.gg/authors/kura/ itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a></div><meta content=apache,cache,debian,nginx,wordpress itemprop=keywords><meta content=tutorials itemprop=keywords><div class="eevee-meta mdl-color-text--grey-500"><time datetime=2010-01-12T00:37:00+00:00 itemprop=datePublished> 12 Jan 2010 </time>Â â€” 2 min read</div><h2 class=article-title itemprop=name><a title="Permalink to 'Apache 2, Nginx & WordPress MU - FollowÂ up'" href=https://kura.gg/2010/01/12/apache-2-nginx-wordpress-mu-follow-up/ itemprop=url rel=bookmark> Apache 2, Nginx <span class=amp>&</span> WordPress <span class=caps>MU</span> - FollowÂ up </a></h2><section class=summary-content itemprop=articleBody><p>This is a quick follow up to a previous post about getting this blog <a class="reference external" href=/2010/01/11/debian-apache-2-nginx-wordpress-mu/>running on nginx with a reverse proxy to Apache 2</a>.<p>It seems the issue stems from 3 mods I had installed andÂ enabled<ol class="arabic simple"><li>mod-spamhaus<li>mod-evasiveÂ and<li>mod-security</ol><p>The 3, when running together are a fantastic way to strengthen any web server from attack, be it <span class=caps>DOS</span>, injection, <span class=caps>XLS</span> etc. Iâ€™ve sworn by all 3 of them for years now and I thought I had them cracked for security:performance ratio, when it comes to reverse proxying requests from nginx to Apache 2 where WordPress is concerned, apparently I was veryÂ wrong.<p>The issue wasnâ€™t so bad when the cache was full, but seeing as my cache is only alive for an hour that leaves an open point for the cache to be recreated when a user views the page. This in itself isnâ€™t â€¦</section><div class="eevee-divider mdl-color--accent" role=presentation></div><div class=eevee-divider-to-top><a title="Back to the top of the page" href=#top itemprop=url> Back to the top of the page </a></div></article><article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting><meta content=fullKeyboardControl itemprop=accessibilityControl><meta content=fullMouseControl itemprop=accessibilityControl><meta content=bookmarks itemprop=accessibilityControl><meta content=captions itemprop=accessibilityControl><meta content=alternativeText itemprop=accessibilityControl><meta content=index itemprop=accessibilityControl><meta content=readingOrder itemprop=accessibilityControl><meta content=structuralNavigation itemprop=accessibilityControl><meta content=tableOfContents itemprop=accessibilityControl><meta content=noFlashingHazard itemprop=accessibilityHazard><meta content=noMotionSimulationHazard itemprop=accessibilityHazard><meta content=noSoundHazard itemprop=accessibilityHazard><meta content=ARIA itemprop=accessibilityAPI><div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation><a class=hidden href=https://kura.gg/authors/kura/ itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a></div><meta content=apache,cache,debian,nginx,wordpress itemprop=keywords><meta content=tutorials itemprop=keywords><div class="eevee-meta mdl-color-text--grey-500"><time datetime=2010-01-11T19:58:00+00:00 itemprop=datePublished> 11 Jan 2010 </time>Â â€” 5 min read</div><h2 class=article-title itemprop=name><a title="Permalink to 'Debian, Apache 2, Nginx, WordPress MU & WP-Super-Cache'" href=https://kura.gg/2010/01/11/debian-apache-2-nginx-wordpress-mu/ itemprop=url rel=bookmark> Debian, Apache 2, Nginx, WordPress <span class=caps>MU</span> <span class=amp>&</span> <span class=caps>WP</span>-Super-Cache </a></h2><section class=summary-content itemprop=articleBody><p><em>This is a rather old article, for more up-to-date information pleaseÂ see;</em><ol class="arabic simple"><li><a class="reference external" href=/2010/02/07/nginx-proxy_cache-and-explained-benchmarked/>/2010/02/07/nginx-proxy_cache-and-explained-benchmarked/</a><li><a class="reference external" href=/2010/02/14/more-nginx-proxy_cache-optimizations-and-nginx-load-balancing/>/2010/02/14/more-nginx-proxy_cache-optimizations-and-nginx-load-balancing/</a></ol><p>Iâ€™ve started collecting a few blogs on my servers now and figured from this one on I would consolidate it in to one workable, usable location. Removing my need to update multiple plugins, themes and WordPress itself, over andÂ over.<p>This time round I thought Iâ€™d do it properly, and properly in my book is as complicated and â€œawesomeâ€ as it can possibly be, without growing legs and running off to stomp aÂ city.<div class=section id=love><h2>Love</h2><p>Iâ€™ve fallen in-love with nginx (<a class="reference external" href=https://nginx.org/>https://nginx.org/</a>) over the last 6 months or so, Iâ€™d been an avid user of LighTTPD for a very long time before but started to look in to nginx mid year as a replacement. I learned that at my new job they used nginx for â€¦</div></section></article><div class=eevee-page-spacer role=presentation></div></div></div></main><div class="eevee-pagination__container eevee-container mdl-grid"><div class="mdl-cell mdl-cell--2-col mdl-cell--hide-tablet mdl-cell--hide-phone" role=presentation></div><div class="mdl-color-text--grey-800 mdl-cell mdl-cell--8-col"><nav class="eevee-pagination mdl-cell mdl-cell--12-col" aria-label=Pagination itemscope itemtype=http://schema.org/SiteNavigationElement><div class=eevee-spacer></div></nav></div></div><footer class=mdl-mega-footer itemscope itemtype=http://schema.org/SiteNavigationElement><div class=mdl-mega-footer--top-section><div class=mdl-mega-footer--drop-down-section><ul class=mdl-mega-footer--link-list><li><a title="Back to the top of the page" href=#top itemprop=url> Back to the top of the page </a></ul></div></div><div aria-label="Footer navigation" class=mdl-mega-footer--middle-section itemscope itemtype=http://schema.org/SiteNavigationElement><div class=mdl-mega-footer--drop-down-section><h1 class=mdl-mega-footer--heading>Menu</h1><ul class=mdl-mega-footer--link-list><li><a href=/contact/ itemprop=url rel=bookmark title=Contact> <i aria-hidden=true class=material-icons>î‚·</i> Contact </a><li><a href=https://kura.gg/archives/ itemprop=url rel=bookmark title=Archives> <i class=material-icons>î€¯</i> Archives </a><li><a href=https://kura.gg/feeds/rss.xml itemprop=url title=RSS> <i class=material-icons>îƒ¥</i> RSS </a><li><a href=https://kura.gg/feeds/atom.xml itemprop=url title=Atom> <i class=material-icons>îƒ¥</i> Atom </a></ul></div><div class=mdl-mega-footer--drop-down-section><h1 class=mdl-mega-footer--heading>Social</h1><ul class=mdl-mega-footer--link-list><li><a href=https://github.com/kura itemprop=url rel=bookmark title=GitHub> <i aria-hidden=true class=fa>ï‚›</i> Github </a><li><a href=https://noc.social/@kura itemprop=url rel=me title=@kura@noc.social> <i aria-hidden=true class=fa>ğŸ¦£</i> @kura@noc.social </a></ul></div><div class=mdl-mega-footer--drop-down-section><h1 class=mdl-mega-footer--heading>Links</h1><ul class=mdl-mega-footer--link-list><li><a href=/blackhole itemprop=url rel=bookmark title=Blackhole> <i aria-hidden=true class=material-icons>î¡¯</i> Blackhole </a><li><a href=/eevee itemprop=url rel=bookmark title=Eevee> <i aria-hidden=true class=material-icons>î¡±</i> Eevee </a><li><a href=/hauntr itemprop=url rel=bookmark title=Hauntr> <i aria-hidden=true class=material-icons>î¡±</i> Hauntr </a><li><a href=/ghastly itemprop=url rel=bookmark title=Ghastly> <i aria-hidden=true class=material-icons>î¡±</i> Ghastly </a><li><a title="Pelican Plugins" href=/pelican-plugins itemprop=url rel=bookmark> <i aria-hidden=true class=material-icons>î¡¯</i> Pelican Plugins </a></ul></div></div><div class=mdl-mega-footer--bottom-section><div class=mdl-logo><a href=https://kura.gg itemprop=url rel=bookmark title=kura.gg> kura.gg </a></div><ul class="eevee-footer mdl-mega-footer--link-list"><li>Powered by love & rainbow sparkles.<li>Source code and content released under the <a title="MIT license" href=/license/>MIT license</a>.</ul></div></footer></div>