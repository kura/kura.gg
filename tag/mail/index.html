<!DOCTYPE html><!--

                                      |
                                     /|
                                   ,' |
                                  .   |
                                    | |
                                 ' '| |
                                / / | |
       _,.-\"\"--._              / /  | |
     ,'          `.           j '   ' '
   ,'              `.         ||   / ,                         ___..--,
  /                  \\        ' `.'`.-.,-\".  .       _..---\"\"'' __, ,'
 /                    \\        \\` .\"`      `\"'\\   ,'\"_..--''\"\"\"'.'.'
.                      .      .'-'             \\,' ,'         ,','
|                      |      ,`               ' .`         .' /
|                      |     /          ,\"`.  ' `-. _____.-' .'
'                      |..---.|,\".      | | .  .-'\"\"   __.,-'
 .                   ,'       ||,|      |.' |    |\"\"`'\"
  `-._   `._.._____  |        || |      `._,'    |
      `.   .       `\".     ,'\"| \"  `'           ,+.
        \\  '         |    '   |   .....        .'  `.
         .'          '     7  \".              ,'     \\
                   ,'      |    `..        _,'      F
                  .        |,      `'----''         |
                  |      ,\"j  /                   | '
                  `     |  | .                 | `,'
                   .    |  `.|                 |/
                    `-..'   ,'                .'
                            | \\             ,''
                            |  `,'.      _,' /
                            |    | ^.  .'   /
                             `-'.' j` V    /
                                   |      /
                                   |     /
                                   |   ,'
                                    `\"\"

//--><html lang=en> <head><meta charset=utf-8><meta name=viewport content="width=device-width, initial-scale=1.0, minimum-scale=1.0"><link rel=alternate href=https://kura.gg hreflang=en><link rel=dns-prefetch href=https://kura.gg><link href=https://kura.gg/feeds/rss.xml type=application/rss+xml rel=alternate title=kura.gg><link href=https://kura.gg/feeds/atom.xml type=application/atom+xml rel=alternate title=kura.gg><meta property=og:site_name content=kura.gg><meta property=og:type content=article><meta property=og:title content=kura.gg><meta property=og:url content=https://kura.gg/tag/mail/index.html><meta property=og:image content=https://kura.gg/tag/mail/index.png><meta property=og:image:width content=1920><meta property=og:image:height content=1080><meta property=twitter:title content=kura.gg><meta property=twitter:url content=https://kura.gg/tag/mail/index.html><meta property=twitter:image content=https://kura.gg/tag/mail/index.png><meta property=twitter:card content=summary_large_image><meta property=twitter:image:width content=1920><meta property=twitter:image:height content=1080><link rel=icon href=/favicon.png type=image/png sizes="16x16 32x32 48x48 64x64 128x128 256x256"><link rel=icon href=/favicon.ico type=image/vnd.microsoft.icon sizes="16x16 32x32 48x48 64x64 128x128 256x256"><title>Articles with the 'mail' tag</title></head> <body> <div class="eevee-layout mdl-layout mdl-js-layout mdl-color--grey-50"> <header class="eevee-header mdl-color--grey-50 mdl-color-text--grey-800" itemscope itemtype=http://schema.org/WPHeader> <div class=mdl-layout__header-row> <div aria-expanded=false role=button tabindex=0 class="mdl-layout__drawer-button mdl-color-text--accent eevee-mobile-button mdl-layout--small-screen-only"> <i class=material-icons>&#xE5D2;</i> </div> <span class="eevee-logo mdl-color-text--accent mdl-layout-title"> <h2 id=top> <a href=https://kura.gg rel=bookmark title=kura.gg> kura.gg </a> </h2> </span> <div class=mdl-layout-spacer role=presentation></div> <nav class="eevee-nav mdl-navigation mdl-layout--large-screen-only" itemscope itemtype=http://schema.org/SiteNavigationElement aria-label="Header navigation"> <a class="mdl-color-text--accent mdl-navigation__link" href=/blackhole itemprop=url rel=bookmark title=Blackhole> <i class=material-icons aria-hidden=true>&#xE86F;</i> Blackhole </a> <a class="mdl-color-text--accent mdl-navigation__link" href=/eevee itemprop=url rel=bookmark title=Eevee> <i class=material-icons aria-hidden=true>&#xE871;</i> Eevee </a> <a class="mdl-color-text--accent mdl-navigation__link" href=/hauntr itemprop=url rel=bookmark title=Hauntr> <i class=material-icons aria-hidden=true>&#xE871;</i> Hauntr </a> <a class="mdl-color-text--accent mdl-navigation__link" href=/ghastly itemprop=url rel=bookmark title=Ghastly> <i class=material-icons aria-hidden=true>&#xE871;</i> Ghastly </a> <a class="mdl-color-text--accent mdl-navigation__link" href=/pelican-plugins itemprop=url rel=bookmark title="Pelican Plugins"> <i class=material-icons aria-hidden=true>&#xE86F;</i> Pelican Plugins </a> <a class="mdl-color-text--accent mdl-navigation__link" href=/contact/ itemprop=url rel=bookmark title=Contact> <i class=material-icons aria-hidden=true>&#xE0B7;</i> Contact </a> <a class="mdl-color-text--accent mdl-navigation__link" href=https://kura.gg/archives/ itemprop=url rel=bookmark title=Archives> <i class=material-icons>&#xE02F;</i> Archives </a> <a class="mdl-color-text--accent mdl-navigation__link" href=https://kura.gg/feeds/rss.xml title=RSS itemprop=url> <i class=material-icons>&#xE0E5;</i> RSS </a> </nav> </div> </header> <div class="eevee-mobile-header mdl-layout__drawer mdl-color--white" aria-hidden=true> <span class=mdl-layout-title> <h2 class="eevee-mobile-logo mdl-color-text--accent"> kura.gg </h2> </span> <div class="mdl-navigation mdl-color--white"> <nav class="eevee-nav mdl-navigation" itemscope itemtype=http://schema.org/SiteNavigationElement aria-label="Header navigation"> <a class="mdl-color-text--accent mdl-navigation__link" href=https://kura.gg itemprop=url rel=bookmark> <i class=material-icons aria-hidden=true> &#xE88A; </i> Home </a> <a class="mdl-color-text--accent mdl-navigation__link" href=/blackhole itemprop=url rel=bookmark title=Blackhole> <i class=material-icons aria-hidden=true>&#xE86F;</i> Blackhole </a> <a class="mdl-color-text--accent mdl-navigation__link" href=/eevee itemprop=url rel=bookmark title=Eevee> <i class=material-icons aria-hidden=true>&#xE871;</i> Eevee </a> <a class="mdl-color-text--accent mdl-navigation__link" href=/hauntr itemprop=url rel=bookmark title=Hauntr> <i class=material-icons aria-hidden=true>&#xE871;</i> Hauntr </a> <a class="mdl-color-text--accent mdl-navigation__link" href=/ghastly itemprop=url rel=bookmark title=Ghastly> <i class=material-icons aria-hidden=true>&#xE871;</i> Ghastly </a> <a class="mdl-color-text--accent mdl-navigation__link" href=/pelican-plugins itemprop=url rel=bookmark title="Pelican Plugins"> <i class=material-icons aria-hidden=true>&#xE86F;</i> Pelican Plugins </a> <a class="mdl-color-text--accent mdl-navigation__link" href=/contact/ itemprop=url rel=bookmark title=Contact> <i class=material-icons aria-hidden=true>&#xE0B7;</i> Contact </a> <a class="mdl-color-text--accent mdl-navigation__link" href=https://kura.gg/archives/ itemprop=url rel=bookmark title=Archives> <i class=material-icons>&#xE02F;</i> Archives </a> <a class="mdl-color-text--accent mdl-navigation__link" href=https://kura.gg/feeds/rss.xml title=RSS itemprop=url> <i class=material-icons>&#xE0E5;</i> RSS </a> </nav> </div> </div> <div class="eevee-ribbon mdl-color--primary-dark" role=presentation> </div> <main class="eevee-main mdl-layout__content"> <div class="eevee-container mdl-grid"> <div role=presentation class="mdl-cell mdl-cell--2-col mdl-cell--hide-tablet mdl-cell--hide-phone"> </div> <div class="eevee-content mdl-color--white mdl-shadow--2dp mdl-color-text--grey-800 mdl-cell mdl-cell--8-col" aria-label="Main content"> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=debian,wheezy,postfix,dovecot,mail,encrypted> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2015-01-26T21:25:00+00:00 itemprop=datePublished> 26 Jan 2015 </time>&nbsp;-- 3 min read </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2015/01/26/debian-wheezy-encrypted-maildir-using-encfs/ rel=bookmark title="Permalink to 'Debian Wheezy encrypted Maildir using encfs'" itemprop=url> Debian Wheezy encrypted Maildir using&nbsp;encfs </a> </h2> <section itemprop=articleBody class=summary-content> <p>This is really a follow up article to <a href=/debian-wheezy-tls-mailserver-with-mysql-clamav-domainkeys-dkim-spf-solr-imap-search/ class="reference external">one I wrote earlier this year</a> but is really applicable to any similar set-up, with some modifications. The only configuration similarity this requires is that mail for all users is stored on the filesystem in the same place, rather than to separate locations i.e. each user having ~/.Maildir.</p> <div class=section id=encfs> <h2><a class=toc-backref href=#toc-entry-1>EncFS</a></h2> <div class=highlight><pre><span></span>sudo apt-get install encfs
</pre></div> <p>Once installed, you’ll need to make a directory for encrypted and decrypted mail to live.</p> <div class=highlight><pre><span></span>sudo mkdir /var/mail/encrypted /var/mail/decrypted
</pre></div> <p>You’ll need to set up permissions so your mail user can access the fuse device and the new directories.</p> <p>For me, this user and group are called <em>vmail</em> but yours may be different.</p> <div class=highlight><pre><span></span>sudo chgrp mail /var/mail/decrypted
sudo g+rw /var/mail/decrypted
sudo usermod -a -g fuse vmail
sudo chgrp fuse /dev/fuse
sudo chmod g+rw /dev/fuse
</pre></div> <p>Next …</p></div> </section> <div class="eevee-divider mdl-color--accent" role=presentation></div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=blackhole,blackhole.io,email,mail> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2012-06-26T23:05:00+01:00 itemprop=datePublished> 26 Jun 2012 </time>&nbsp;-- 3 min read </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2012/06/26/send-all-email-to-a-blackhole-never-gets-delivered-test-delivery-speed-and-much-more-using-blackhole-io/ rel=bookmark title="Permalink to 'Send all email to a blackhole (never gets delivered), test delivery speed and much more using blackhole.io'" itemprop=url> Send all email to a blackhole (never gets delivered), test delivery speed and much more using&nbsp;blackhole.io </a> </h2> <section itemprop=articleBody class=summary-content> <p>I have built and released an open-source email server in the past for testing send rates and speeds, this project was called SimpleMTA and is available <a href=https://syslog.tv/simplemta/ class="reference external">here</a>.</p> <p>Recently I have rebuilt this project for an internal project at work using the <a href=https://www.tornadoweb.org/ class="reference external">Tornado framework</a>. Sadly this project as a whole cannot be released but a version of this code will be released in the near future.</p> <p>Until that is released I have launched a new service called <a class="reference external" href=https://blackhole.io>blackhole.io</a></p> <div class=section id=what-is-blackhole-io> <h2>What is blackhole.io?</h2> <p>blackhole.io is a completely open mail relay that forgets anything that is sent to it, meaning there is no auth requirements and no storage of email data within the service. Literally anyone can send anything to it and have it never get delivered.</p> <p>You can even send commands out of order, meaning you can call the <span class=caps>DATA</span> command without ever using <span class=caps>HELO</span>, <span class=caps>MAIL</span> <span class=caps>FROM</span> or <span class=caps>RCPT</span> <span class=caps>TO …</span></p></div> </section> <div class="eevee-divider mdl-color--accent" role=presentation></div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=debian,email,greylist,mail,postfix,postgrey,spam,ubuntu> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2011-09-24T21:29:00+01:00 itemprop=datePublished> 24 Sep 2011 </time>&nbsp;-- 2 min read </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2011/09/24/postfix-spam-protection-with-greylisting-using-postgrey-on-debian-6ubuntu/ rel=bookmark title="Permalink to 'Postfix spam protection with greylisting using Postgrey on Debian 6/Ubuntu'" itemprop=url> Postfix spam protection with greylisting using Postgrey on Debian&nbsp;6/Ubuntu </a> </h2> <section itemprop=articleBody class=summary-content> <p>A simple yet effective method for protecting your mail server from spam is to use greylisting. In simple terms, when an email is received the server will temporarily reject it with a 450 response code claiming that the server is busy, the sending server should then attempt to try to deliver at a later point in time, if enough time has passed the recipient server will then accept the incoming mail and whitelist the send address for a period of time.</p> <p>This is effective because most spam servers are configured not to retry the send whereas real mail servers generally will retry. This sadly does not protect against spam coming from comprised mail servers or accounts like on Hotmail.com.</p> <div class=section id=installation> <h2>Installation</h2> <div class=highlight><pre><span></span>sudo apt-get install postgrey
</pre></div> </div> <div class=section id=configuring-postgrey> <h2>Configuring Postgrey</h2> <p>By default Postgrey runs on <em>127.0.0.1:60000</em>, which is the local loopback interface so it is not exposed to the …</p></div> </section> <div class="eevee-divider mdl-color--accent" role=presentation></div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=blackhole,blacklist,email,mail,postfix,spam> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2011-09-24T21:05:00+01:00 itemprop=datePublished> 24 Sep 2011 </time>&nbsp;-- 1 min read </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2011/09/24/postfix-spam-protection-with-blacklists/ rel=bookmark title="Permalink to 'Postfix spam protection with blacklists'" itemprop=url> Postfix spam protection with&nbsp;blacklists </a> </h2> <section itemprop=articleBody class=summary-content> <p>This really should be quite a quick and simple post.</p> <p>I use several tools to protect my mail servers from spam, the most effective of these I’ve found is using external lists in conjunction with <strong>reject_rbl_client</strong> and <strong>reject_rhsbl_client</strong>.</p> <p>+======================+======================================================================================================+ | Service | description | +======================+======================================================================================================+ | zen.spamhaus.org | A single lookup for querying the <span class=caps>SBL</span>, <span class=caps>XBL</span> and <span class=caps>PBL</span> databases. | | | - <span class=caps>SBL</span> - Verified sources of spam, including spammers and their support services | | | - <span class=caps>XBL</span> - Illegal third-party exploits (e.g. open proxies and Trojan Horses) | | | - <span class=caps>PBL</span> - Static, dial-up <span class=amp>&amp;</span> <span class=caps>DHCP</span> <span class=caps>IP</span> address space that is not meant to be initiating <span class=caps>SMTP</span> connections | +———————————+———————————————————————————————————————————————————+ | dnsbl.sorbs.net | Unsolicited bulk/commercial email senders | +———————————+———————————————————————————————————————————————————+ | spam.dnsbl.sorbs.net | Hosts that have allegedly sent spam to the admins of <span class=caps>SORBS</span> at any time | +———————————+———————————————————————————————————————————————————+ | b1.spamcop.net | <span class=caps>IP</span> addresses which have been used to transmit reported email to SpamCop users | +———————————+———————————————————————————————————————————————————+ | rhsbl.ahbl.org | Domains sending spam, domains owned by spammers, comment …</p> </section> <div class="eevee-divider mdl-color--accent" role=presentation></div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=email,mail,postfix,pyzor,razor,spam,spamassassin> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2011-09-22T19:17:00+01:00 itemprop=datePublished> 22 Sep 2011 </time>&nbsp;-- < 1 min read </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2011/09/22/spamassassin-razor-pyzor/ rel=bookmark title="Permalink to 'SpamAssassin + Razor + Pyzor on Debian 6/Ubuntu'" itemprop=url> SpamAssassin + Razor + Pyzor on Debian&nbsp;6/Ubuntu </a> </h2> <section itemprop=articleBody class=summary-content> <p>This is part 4 of my series on configuring a mail server, please see <a href=/2011/09/15/postfix-dovecot-imapimaps-sasl-maildir/ class="reference external">part one</a>, <a href=/2011/09/16/postfix-spamassassin-clamav-procmail/ class="reference external">part two</a> and <a href=/2011/09/17/postfix-dk-dkim-spf/ class="reference external">part three</a> if you’re not familiar with them.</p> <p>The content of this article was written to work with the previous three articles but should work on any SpamAssassin set-up.</p> <div class=section id=razor> <h2>Razor</h2> <p>First off we need to install Razor.</p> <div class=highlight><pre><span></span>sudo apt-get install razor
</pre></div> <p>Now we need to run three commands to register and configure Razor.</p> <div class=highlight><pre><span></span>sudo razor-admin -home<span class=o>=</span>/etc/spamassassin/.razor -register
sudo razor-admin -home<span class=o>=</span>/etc/spamassassin/.razor -create
sudo razor-admin -home<span class=o>=</span>/etc/spamassassin/.razor -discover
</pre></div> <p>These 3 commands should be pretty self explanatory, they register Razor, create it’s configuration and discover the Razor servers.</p> </div> <div class=section id=pyzor> <h2>Pyzor</h2> <p>Now we’ll install Pyzor.</p> <div class=highlight><pre><span></span>sudo apt-get install pyzor
</pre></div> <p>Now we also need to tell Pyzor to discover it’s servers.</p> <div class=highlight><pre><span></span>pyzor --homedir /etc/mail/spamassassin discover
</pre></div> </div> <div class=section id=spamassassin> <h2>SpamAssassin</h2> <p>Add the following lines to the end …</p></div> </section> <div class="eevee-divider mdl-color--accent" role=presentation></div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=debian,dk,dkim,domainkeys,email,mail,postfix,spf,ubuntu> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2011-09-17T18:18:00+01:00 itemprop=datePublished> 17 Sep 2011 </time>&nbsp;-- 3 min read </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2011/09/17/postfix-dk-dkim-spf/ rel=bookmark title="Permalink to 'Postfix + DK (DomainKeys) + DKIM + SPF on Debian 6/Ubuntu'" itemprop=url> Postfix + <span class=caps>DK</span> (DomainKeys) + <span class=caps>DKIM</span> + <span class=caps>SPF</span> on Debian&nbsp;6/Ubuntu </a> </h2> <section itemprop=articleBody class=summary-content> <p>This is part 3 of my guide to getting a mail server configured with all the sexy bits to improve deliverability, spam and virus protection.</p> <p>You can view <a href=/2011/09/15/postfix-dovecot-imapimaps-sasl-maildir/ class="reference external">part 1 here</a> and <a href=/2011/09/16/postfix-spamassassin-clamav-procmail/ class="reference external">part 2 here</a>.</p> <div class=section id=the-key-pair> <h2>The key pair</h2> <p>We need to create a key pair to sign emails with:</p> <pre class=literal-block>
.. code-block:: bash
</pre> <blockquote> openssl genrsa -out private.key 1024 openssl rsa -in private.key -out public.key -pubout -outform <span class=caps>PEM</span> sudo mkdir /etc/dk/ sudo cp private.key /etc/dk/dk.key</blockquote> <p>Now we can move on to <span class=caps>DK</span> and <span class=caps>DKIM</span> signing, make sure you keep the public key for later.</p> </div> <div class=section id=dkim> <h2><span class=caps>DKIM</span></h2> <p>First we’ll need to install an application to sign our emails.</p> <div class=highlight><pre><span></span>sudo apt-get install dkim-filter
</pre></div> <p>Once installed we need to configure it, open up <strong>/etc/default/dkim-filter</strong>, modify the file to look like below replacing &lt;<span class=caps>DOMAIN</span>&gt; with the domain you want to sign email from.</p> <div class=highlight><pre><span></span><span class=nv>DAEMON_OPTS</span><span class=o>=</span><span class=s2>"-l -o …</span></pre></div></div> </section> <div class="eevee-divider mdl-color--accent" role=presentation></div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=clamav,clamsmtp,debian,email,mail,postfix,procmail,spamassassin,ubuntu> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2011-09-16T21:28:00+01:00 itemprop=datePublished> 16 Sep 2011 </time>&nbsp;-- 3 min read </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2011/09/16/postfix-spamassassin-clamav-procmail/ rel=bookmark title="Permalink to 'Postfix + SpamAssassin + ClamAV + Procmail on Debian 6/Ubuntu'" itemprop=url> Postfix + SpamAssassin + ClamAV + Procmail on Debian&nbsp;6/Ubuntu </a> </h2> <section itemprop=articleBody class=summary-content> <p>This is part 2 of my series on mail servers on Debian 6/Ubuntu 10.04, it should work on other versions of each though. <a href=/2011/09/15/postfix-dovecot-imapimaps-sasl-maildir/ class="reference external">Part 1 is available here</a>.</p> <div class=section id=spamassassin> <h2>SpamAssassin</h2> <p>First off we’ll get SpamAssassin installed and configured.</p> <div class=highlight><pre><span></span>sudo apt-get install spamassassin
</pre></div> <p>We’ll be configuring SpamAssassin as a daemon that Postfix interfaces with using <strong>spamc</strong>.</p> <p>SpamAssassin on Debian and Ubuntu runs as root which is <span class=caps>NOT</span> a good thing so we’ll need to make some changes.</p> <p>We’ll add a group called <strong>spamd</strong> with <span class=caps>GID</span>**5001**.</p> <div class=highlight><pre><span></span>sudo groupadd -g <span class=m>5001</span> spamd
</pre></div> <p>Next we add a user spamd with <span class=caps>UID</span> <strong>5001</strong> and add it to the spamd group, as well as set it’s home directory as <strong>/var/lib/spamassassin</strong> and make sure it has no shell access or <span class=caps>SSH</span> access.</p> <div class=highlight><pre><span></span>sudo useradd -u <span class=m>5001</span> -g spamd -s /usr/sbin/nologin -d /var/lib/spamassassin spamd
</pre></div> <p>Now …</p></div> </section> <div class="eevee-divider mdl-color--accent" role=presentation></div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=debian,dovecot,email,imap,imaps,mail,maildir,postfix,sasl,ubuntu> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2011-09-15T23:04:00+01:00 itemprop=datePublished> 15 Sep 2011 </time>&nbsp;-- 3 min read </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2011/09/15/postfix-dovecot-imapimaps-sasl-maildir/ rel=bookmark title="Permalink to 'Postfix + Dovecot (IMAP/IMAPS) + SASL + Maildir on Debian 6/Ubuntu'" itemprop=url> Postfix + Dovecot (<span class=caps>IMAP</span>/<span class=caps>IMAPS</span>) + <span class=caps>SASL</span> + Maildir on Debian&nbsp;6/Ubuntu </a> </h2> <section itemprop=articleBody class=summary-content> <p>This guide is part 1 of what I plan will be a couple of guides that take you through installing a base mail system, SpamAssassin, <span class=caps>DKIM</span> and much more. Stay tuned.</p> <p>This guide was written for Debian 6 but should be the same or similar for Debian 5 and Ubuntu 10.04 and above.</p> <div class=section id=the-installation> <h2>The installation</h2> <div class=highlight><pre><span></span>sudo apt-get install dovecot-imapd postfix sasl2-bin libsasl2-2 libsasl2-modules
</pre></div> <p>Choose “Internet site” when prompted and enter the fully qualified name of your server.</p> <p>Once all this is done installing we’ll need to make some changes, first off will be Postfix.</p> </div> <div class=section id=postfix> <h2>Postfix</h2> <p>Open up <strong>/etc/postfix/main.cf</strong> and add the following to the end of the file</p> <pre class=literal-block>
home_mailbox = Maildir/
smtpd_sasl_auth_enable = yes
smtpd_sasl_security_options = noanonymous
smtpd_sasl_local_domain = $myhostname
broken_sasl_auth_clients = yes

smtpd_sender_restrictions = permit_sasl_authenticated,
    permit_mynetworks,

smtpd_recipient_restrictions = permit_mynetworks,
    permit …</pre></div> </section> <div class="eevee-divider mdl-color--accent" role=presentation></div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=debian,dkim,domainkeys,howto,mail,postfix,ubuntu> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2010-02-12T19:08:00+00:00 itemprop=datePublished> 12 Feb 2010 </time>&nbsp;-- 4 min read </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2010/02/12/howto-domainkeys-with-postfix-on-debian-ubuntu/ rel=bookmark title="Permalink to 'HOWTO: DomainKeys with Postfix on Debian/Ubuntu'" itemprop=url> <span class=caps>HOWTO</span>: DomainKeys with Postfix on&nbsp;Debian/Ubuntu </a> </h2> <section itemprop=articleBody class=summary-content> <p><strong>I have written a much newer, clearer and better article on DomainKeys signing email `here`_.</strong></p> <div class=section id=about> <h2>About</h2> <p>This guide is a sister to another guide I wrote a while back about how to use DomainKeys Identified Mail (<span class=caps>DKIM</span>) with Postfix on Debian, which can be read here - <a href=/2010/01/11/dkim-on-debian-with-postfix/ class="reference external">/2010/01/11/dkim-on-debian-with-postfix/</a>.</p> <p>DomainKeys is an older implementation than <span class=caps>DKIM</span>, <span class=caps>DKIM</span> is a merge of DomainKeys and Identified Mail. Both DomainKeys and <span class=caps>DKIM</span> are used so having both configured is a good idea.</p> </div> <div class=section id=getting-started> <h2>Getting started</h2> <p>Lets start off by installing the dk-filter</p> <div class=highlight><pre><span></span>sudo apt-get install dk-filter
</pre></div> <p>Once installed you can can create a public and private key set using the commands below, if you’re already using <span class=caps>DKIM</span> you can skip this step and just use your already existing key.</p> <div class=highlight><pre><span></span>openssl genrsa -out private.key <span class=m>1024</span>
openssl rsa -in private.key -out public.key -pubout -outform PEM
sudo mkdir /etc/mail
sudo cp …</pre></div></div> </section> <div class="eevee-divider mdl-color--accent" role=presentation></div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=howto,mail> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2010-02-11T18:25:00+00:00 itemprop=datePublished> 11 Feb 2010 </time>&nbsp;-- 2 min read </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2010/02/11/howto-using-spf-to-validate-outgoing-mail/ rel=bookmark title="Permalink to 'HOWTO: Using SPF to validate outgoing mail'" itemprop=url> <span class=caps>HOWTO</span>: Using <span class=caps>SPF</span> to validate outgoing&nbsp;mail </a> </h2> <section itemprop=articleBody class=summary-content> <p>You can get a basic overview on what <span class=caps>SPF</span> is, what it’s for and it’s more advanced usages here - <a href=https://www.openspf.org/ class="reference external">https://www.openspf.org/</a></p> <p>This article is to give only a basic insight in to how you can use an <span class=caps>SPF</span> record to valid mail from your servers.</p> <div class=section id=the-dns> <h2>The <span class=caps>DNS</span></h2> <p><span class=caps>SPF</span> records work from your <span class=caps>DNS</span>, it’s really simple. Technically there is a <span class=caps>DNS</span> type defined for <span class=caps>SPF</span> records as of <a class="reference external" href=https://tools.ietf.org/html/rfc4408><span class=caps>RFC</span> 4408</a>, but since not all servers recognise this type it also works in the <span class=caps>TXT</span> type.</p> <p>A simple usage of <span class=caps>SPF</span> is</p> <pre class=literal-block>
v=spf1 a mx -all
</pre> <p>Imagine this exists on this domain, <strong>syslog.tv</strong>. This spf record would mean that <span class=caps>ALL</span> <span class=caps>AN</span> and <span class=caps>MX</span> servers listed in the <span class=caps>DNS</span> records of syslog.tv would be valid senders.</p> <p>The hypen (-) before <em>all</em> means that if the mail appears to be coming from a server that isn …</p></div> </section> <div class="eevee-divider mdl-color--accent" role=presentation></div> <div class=eevee-divider-to-top> <a href=#top title="Back to the top of the page" itemprop=url> Back to the top of the page </a> </div> </article> <article class=eevee-padding itemscope itemtype=http://schema.org/BlogPosting> <meta itemprop=accessibilityControl content=fullKeyboardControl> <meta itemprop=accessibilityControl content=fullMouseControl> <meta itemprop=accessibilityControl content=bookmarks> <meta itemprop=accessibilityControl content=captions> <meta itemprop=accessibilityControl content=alternativeText> <meta itemprop=accessibilityControl content=index> <meta itemprop=accessibilityControl content=readingOrder> <meta itemprop=accessibilityControl content=structuralNavigation> <meta itemprop=accessibilityControl content=tableOfContents> <meta itemprop=accessibilityHazard content=noFlashingHazard> <meta itemprop=accessibilityHazard content=noMotionSimulationHazard> <meta itemprop=accessibilityHazard content=noSoundHazard> <meta itemprop=accessibilityAPI content=ARIA> <div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation /> <a href=https://kura.gg/authors/kura/ class=hidden itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a> </div> <meta itemprop=keywords content=debian,dkim,howto,mail,postfix> <meta itemprop=keywords content=tutorials> <div class="eevee-meta mdl-color-text--grey-500"> <time datetime=2010-01-11T20:53:00+00:00 itemprop=datePublished> 11 Jan 2010 </time>&nbsp;-- 4 min read </div> <h2 itemprop=name class=article-title> <a href=https://kura.gg/2010/01/11/dkim-on-debian-with-postfix/ rel=bookmark title="Permalink to 'HOWTO: DKIM with Postfix on Debian'" itemprop=url> <span class=caps>HOWTO</span>: <span class=caps>DKIM</span> with Postfix on&nbsp;Debian </a> </h2> <section itemprop=articleBody class=summary-content> <p><em>There is a much newer article on this subject `here`_ and covers DomainKeys and <span class=caps>DKIM</span>.</em></p> <p>Mail and mail servers have always been my forté if I’m to be honest, my home mail server has been spam free for years now, nothing really gets past due to my love of all things installable and configurable.</p> <p>Several months ago I started a new job and after a few weeks I was tasked with getting <span class=caps>DKIM</span> signing to work on our mail platform, <span class=caps>DKIM</span> was semi-new to me, I’d never bothered with anything but <span class=caps>SPF</span> before so I figured I’d give it a shot.</p> <p>At work our servers are Debian based but are the evil that is Ubuntu, strangely though I was able to find an Ubuntu specific article that wasn’t absolute rubbish, which surprised me no end. I was able to get dkim-milter working with Postfix and signing …</p> </section> </article> <div class=eevee-page-spacer role=presentation></div> </div> </div> </main> <div class="eevee-pagination__container eevee-container mdl-grid"> <div role=presentation class="mdl-cell mdl-cell--2-col mdl-cell--hide-tablet mdl-cell--hide-phone"> </div> <div class="mdl-color-text--grey-800 mdl-cell mdl-cell--8-col"> <nav class="eevee-pagination mdl-cell mdl-cell--12-col" itemscope itemtype=http://schema.org/SiteNavigationElement aria-label=Pagination> <div class=eevee-spacer></div> </nav> </div> </div> <footer class=mdl-mega-footer itemscope itemtype=http://schema.org/SiteNavigationElement> <div class=mdl-mega-footer--top-section> <div class=mdl-mega-footer--drop-down-section> <ul class=mdl-mega-footer--link-list> <li> <a href=#top itemprop=url title="Back to the top of the page"> Back to the top of the page </a> </li> </ul> </div> </div> <div class=mdl-mega-footer--middle-section itemscope itemtype=http://schema.org/SiteNavigationElement aria-label="Footer navigation"> <div class=mdl-mega-footer--drop-down-section> <h1 class=mdl-mega-footer--heading>Menu</h1> <ul class=mdl-mega-footer--link-list> <li> <a href=/contact/ itemprop=url rel=bookmark title=Contact> <i class=material-icons aria-hidden=true>&#xE0B7;</i> Contact </a> </li> <li> <a href=https://kura.gg/archives/ itemprop=url rel=bookmark title=Archives> <i class=material-icons>&#xE02F;</i> Archives </a> </li> <li> <a href=https://kura.gg/feeds/rss.xml title=RSS itemprop=url> <i class=material-icons>&#xE0E5;</i> RSS </a> </li> </ul> </div> <div class=mdl-mega-footer--drop-down-section> <h1 class=mdl-mega-footer--heading>Social</h1> <ul class=mdl-mega-footer--link-list> <li> <a href=https://github.com/kura itemprop=url rel=bookmark title=GitHub> <i class=fa aria-hidden=true>&#xF09B;</i> Github </a> </li> </ul> </div> <div class=mdl-mega-footer--drop-down-section> <h1 class=mdl-mega-footer--heading>Links</h1> <ul class=mdl-mega-footer--link-list> <li> <a href=/blackhole itemprop=url rel=bookmark title=Blackhole> <i class=material-icons aria-hidden=true>&#xE86F;</i> Blackhole </a> </li> <li> <a href=/eevee itemprop=url rel=bookmark title=Eevee> <i class=material-icons aria-hidden=true>&#xE871;</i> Eevee </a> </li> <li> <a href=/hauntr itemprop=url rel=bookmark title=Hauntr> <i class=material-icons aria-hidden=true>&#xE871;</i> Hauntr </a> </li> <li> <a href=/ghastly itemprop=url rel=bookmark title=Ghastly> <i class=material-icons aria-hidden=true>&#xE871;</i> Ghastly </a> </li> <li> <a href=/pelican-plugins itemprop=url rel=bookmark title="Pelican Plugins"> <i class=material-icons aria-hidden=true>&#xE86F;</i> Pelican Plugins </a> </li> </ul> </div> </div> <div class=mdl-mega-footer--bottom-section> <div class=mdl-logo> <a href=https://kura.gg rel=bookmark itemprop=url title=kura.gg> kura.gg </a> </div> <ul class="eevee-footer mdl-mega-footer--link-list"> <li>Powered by love &amp; rainbow sparkles.</li> <li>Source code and content released under the <a href=/license/ title="MIT license">MIT license</a>.</li> </ul> </div> </footer> </div> <link rel=stylesheet href=https://kura.gg/theme/css/eevee.min.css?1c9d8344 integrity=sha384-D0eC6OTJtK3Ltt7gACI1MnJFRkUDzYg1NuYHxOqgfTQ4Jv+RvzvGCXLuN+6wCTMG> <script async src=https://kura.gg/theme/js/eevee.min.js?1841d254 integrity=sha384-3r7AVN+hZFJ1fEE+9rWYEDGdSsGzv+zeKBz+5FJGtQCQ/D08C6uvK10RuwxUR+kO></script> </body> </html>