<!doctype html><html lang=en><meta charset=utf-8><meta content=width=device-width,initial-scale=1.0,minimum-scale=1.0 name=viewport><link href=https://kura.gg hreflang=en rel=alternate><link href=https://kura.gg rel=dns-prefetch><link href=https://kura.gg/theme/css/eevee.min.css?1c9d8344 rel=stylesheet><script async src=https://kura.gg/theme/js/eevee.min.js?1841d254></script><link href=https://kura.gg/feeds/rss.xml rel=alternate title=kura.gg type=application/rss+xml><link href=https://kura.gg/feeds/atom.xml rel=alternate title=kura.gg type=application/atom+xml><meta content=kura.gg property=og:site_name><meta content=article property=og:type><meta content="Backup a Linux server to Amazon S3 on Debian 6/Ubuntu 10.04" property=og:title><meta content=https://kura.gg/2012/02/29/backup-a-linux-server-to-amazon-s3-on-debian-6ubuntu-10-04/ property=og:url><meta content="I have several servers powering syslog including it’s Raspberry Pi mirror, load balancer and email servers. All of my servers are hosted using Linode in their London data centre and have Linode’s back-up system doing both daily and weekly snapshots. For the app and database servers I do server-side backups storing each website and it’s database in it’s own folder within /backup in case I require a quick back-up to fix something, rather than the server has died. This is all well and good but I like having an off-site backup too and for that I use S3… About S3 Amazon’s S3 is pretty cheap and very easy to use. Because only data is going in you don’t pay a transfer fee and the cost of storage is very affordable, you can see a pricing list here. To do the backup I use a …" property=og:description><meta content=https://kura.gg/2012/02/29/backup-a-linux-server-to-amazon-s3-on-debian-6ubuntu-10-04/index.png property=og:image><meta content=1920 property=og:image:width><meta content=1080 property=og:image:height><meta content="Backup a Linux server to Amazon S3 on Debian 6/Ubuntu 10.04" property=twitter:title><meta content=https://kura.gg/2012/02/29/backup-a-linux-server-to-amazon-s3-on-debian-6ubuntu-10-04/ property=twitter:url><meta content="I have several servers powering syslog including it’s Raspberry Pi mirror, load balancer and email servers. All of my servers are hosted using Linode in their London data centre and have Linode’s back-up system doing both daily and weekly snapshots. For the app and database servers I do server-side backups storing each website and it’s database in it’s own folder within /backup in case I require a quick back-up to fix something, rather than the server has died. This is all well and good but I like having an off-site backup too and for that I use S3… About S3 Amazon’s S3 is pretty cheap and very easy to use. Because only data is going in you don’t pay a transfer fee and the cost of storage is very affordable, you can see a pricing list here. To do the backup I use a …" property=twitter:description><meta content=https://kura.gg/2012/02/29/backup-a-linux-server-to-amazon-s3-on-debian-6ubuntu-10-04/index.png property=twitter:image><meta content=summary_large_image property=twitter:card><meta content="Written by" property=twitter:label1><meta content=Kura property=twitter:data1><meta content="Estimated reading time" property=twitter:label2><meta content="2 min read" property=twitter:data2><meta content=1920 property=twitter:image:width><meta content=1080 property=twitter:image:height><link sizes="16x16 32x32 48x48 64x64 128x128 256x256" href=/favicon.png rel=icon type=image/png><link sizes="16x16 32x32 48x48 64x64 128x128 256x256" href=/favicon.ico rel=icon type=image/vnd.microsoft.icon><title>Backup a Linux server to Amazon S3 on Debian 6/Ubuntu 10.04</title><body><div class="eevee-layout mdl-layout mdl-js-layout mdl-color--grey-50"><header class="eevee-header mdl-color--grey-50 mdl-color-text--grey-800" itemscope itemtype=http://schema.org/WPHeader><div class=mdl-layout__header-row><div class="mdl-layout__drawer-button mdl-color-text--accent eevee-mobile-button mdl-layout--small-screen-only" aria-expanded=false role=button tabindex=0><i class=material-icons></i></div><span class="eevee-logo mdl-color-text--accent mdl-layout-title"> <h2 id=top><a href=https://kura.gg rel=bookmark title=kura.gg> kura.gg </a></h2> </span><div class=mdl-layout-spacer role=presentation></div><nav aria-label="Header navigation" class="eevee-nav mdl-navigation mdl-layout--large-screen-only" itemscope itemtype=http://schema.org/SiteNavigationElement><a class="mdl-color-text--accent mdl-navigation__link" href=/blackhole itemprop=url rel=bookmark title=Blackhole> <i aria-hidden=true class=material-icons></i> Blackhole </a><a class="mdl-color-text--accent mdl-navigation__link" href=/eevee itemprop=url rel=bookmark title=Eevee> <i aria-hidden=true class=material-icons></i> Eevee </a><a class="mdl-color-text--accent mdl-navigation__link" href=/hauntr itemprop=url rel=bookmark title=Hauntr> <i aria-hidden=true class=material-icons></i> Hauntr </a><a class="mdl-color-text--accent mdl-navigation__link" href=/ghastly itemprop=url rel=bookmark title=Ghastly> <i aria-hidden=true class=material-icons></i> Ghastly </a><a class="mdl-color-text--accent mdl-navigation__link" title="Pelican Plugins" href=/pelican-plugins itemprop=url rel=bookmark> <i aria-hidden=true class=material-icons></i> Pelican Plugins </a><a class="mdl-color-text--accent mdl-navigation__link" href=/contact/ itemprop=url rel=bookmark title=Contact> <i aria-hidden=true class=material-icons></i> Contact </a><a class="mdl-color-text--accent mdl-navigation__link" href=https://kura.gg/archives/ itemprop=url rel=bookmark title=Archives> <i class=material-icons></i> Archives </a><a class="mdl-color-text--accent mdl-navigation__link" href=https://kura.gg/feeds/rss.xml itemprop=url title=RSS> <i class=material-icons></i> RSS </a><a class="mdl-color-text--accent mdl-navigation__link" href=https://kura.gg/feeds/atom.xml itemprop=url title=Atom> <i class=material-icons></i> Atom </a></nav></div></header><div class="eevee-mobile-header mdl-layout__drawer mdl-color--white" aria-hidden=true><span class=mdl-layout-title> <h2 class="eevee-mobile-logo mdl-color-text--accent">kura.gg</h2> </span><div class="mdl-navigation mdl-color--white"><nav aria-label="Header navigation" class="eevee-nav mdl-navigation" itemscope itemtype=http://schema.org/SiteNavigationElement><a class="mdl-color-text--accent mdl-navigation__link" href=https://kura.gg itemprop=url rel=bookmark> <i aria-hidden=true class=material-icons>  </i> Home </a><a class="mdl-color-text--accent mdl-navigation__link" href=/blackhole itemprop=url rel=bookmark title=Blackhole> <i aria-hidden=true class=material-icons></i> Blackhole </a><a class="mdl-color-text--accent mdl-navigation__link" href=/eevee itemprop=url rel=bookmark title=Eevee> <i aria-hidden=true class=material-icons></i> Eevee </a><a class="mdl-color-text--accent mdl-navigation__link" href=/hauntr itemprop=url rel=bookmark title=Hauntr> <i aria-hidden=true class=material-icons></i> Hauntr </a><a class="mdl-color-text--accent mdl-navigation__link" href=/ghastly itemprop=url rel=bookmark title=Ghastly> <i aria-hidden=true class=material-icons></i> Ghastly </a><a class="mdl-color-text--accent mdl-navigation__link" title="Pelican Plugins" href=/pelican-plugins itemprop=url rel=bookmark> <i aria-hidden=true class=material-icons></i> Pelican Plugins </a><a class="mdl-color-text--accent mdl-navigation__link" href=/contact/ itemprop=url rel=bookmark title=Contact> <i aria-hidden=true class=material-icons></i> Contact </a><a class="mdl-color-text--accent mdl-navigation__link" href=https://kura.gg/archives/ itemprop=url rel=bookmark title=Archives> <i class=material-icons></i> Archives </a><a class="mdl-color-text--accent mdl-navigation__link" href=https://kura.gg/feeds/rss.xml itemprop=url title=RSS> <i class=material-icons></i> RSS </a><a class="mdl-color-text--accent mdl-navigation__link" href=https://kura.gg/feeds/atom.xml itemprop=url title=Atom> <i class=material-icons></i> Atom </a></nav></div></div><div class="eevee-ribbon mdl-color--primary-dark" role=presentation></div><main class="eevee-main mdl-layout__content"><div class="eevee-container mdl-grid"><div class="mdl-cell mdl-cell--2-col mdl-cell--hide-tablet mdl-cell--hide-phone" role=presentation></div><div aria-label="Main content" class="eevee-content mdl-color--white mdl-shadow--2dp mdl-color-text--grey-800 mdl-cell mdl-cell--8-col"><article itemscope itemtype=http://schema.org/BlogPosting><meta content=fullKeyboardControl itemprop=accessibilityControl><meta content=fullMouseControl itemprop=accessibilityControl><meta content=bookmarks itemprop=accessibilityControl><meta content=captions itemprop=accessibilityControl><meta content=alternativeText itemprop=accessibilityControl><meta content=index itemprop=accessibilityControl><meta content=readingOrder itemprop=accessibilityControl><meta content=structuralNavigation itemprop=accessibilityControl><meta content=tableOfContents itemprop=accessibilityControl><meta content=noFlashingHazard itemprop=accessibilityHazard><meta content=noMotionSimulationHazard itemprop=accessibilityHazard><meta content=noSoundHazard itemprop=accessibilityHazard><meta content=ARIA itemprop=accessibilityAPI><div itemprop=author itemscope itemtype=https://schema.org/Person role=presentation><a class=hidden href=https://kura.gg/authors/kura/ itemprop=url role=presentation> <span class=hidden itemprop=name role=presentation> kura </span> </a></div><meta content=amazon,aws,backup,debian,s3,ubuntu itemprop=keywords><meta content=tutorials itemprop=keywords><div class=eevee-share><ul class="social-share mdl-navigation"><li class="social-share__link social-share__link--twitter"><a onclick="window.open(this.href, 'twitter-share', 'width=550,height=235'); return false;" title="Share 'Backup a Linux server to Amazon S3 on Debian 6/Ubuntu 10.04' on Twitter" href=https://twitter.com/intent/tweet?text=Backup%20a%20Linux%20server%20to%20Amazon%20S3%20on%20Debian%206/Ubuntu%2010.04&url=https%3A//kura.gg/2012/02/29/backup-a-linux-server-to-amazon-s3-on-debian-6ubuntu-10-04/> <i aria-hidden=true class=fa></i> </a><li class="social-share__link social-share__link--facebook"><a onclick="window.open(this.href, 'facebook-share', 'width=580,height=296'); return false;" title="Share 'Backup a Linux server to Amazon S3 on Debian 6/Ubuntu 10.04' on Facebook" href=https://www.facebook.com/sharer/sharer.php?u=https%3A//kura.gg/2012/02/29/backup-a-linux-server-to-amazon-s3-on-debian-6ubuntu-10-04/> <i aria-hidden=true class=fa></i> </a><li class="social-share__link social-share__link--email"><a title="Share 'Backup a Linux server to Amazon S3 on Debian 6/Ubuntu 10.04' via email" href=mailto:?subject=Backup%20a%20Linux%20server%20to%20Amazon%20S3%20on%20Debian%206/Ubuntu%2010.04&body=I%20thought%20you%20might%20like%20'Backup%20a%20Linux%20server%20to%20Amazon%20S3%20on%20Debian%206/Ubuntu%2010.04'%20--%20https%3A//kura.gg/2012/02/29/backup-a-linux-server-to-amazon-s3-on-debian-6ubuntu-10-04/> <i aria-hidden=true class=material-icons>  </i> </a></ul></div><div class=eevee-article><div class="eevee-meta mdl-color-text--grey-500"><time datetime=2012-02-29T20:55:00+00:00 itemprop=datePublished> 29 Feb 2012 </time> — 2 min read</div><h1 itemprop=name><a title="Permalink to 'Backup a Linux server to Amazon S3 on Debian 6/Ubuntu 10.04'" href=https://kura.gg/2012/02/29/backup-a-linux-server-to-amazon-s3-on-debian-6ubuntu-10-04/ itemprop=url rel=bookmark> Backup a Linux server to Amazon S3 on Debian 6/Ubuntu 10.04 </a></h1><section class=eevee-toc><h2 id=toc>Contents</h2><nav class=eevee-toc-ribbon><div class=toc><p class=topic-title>Contents<ul class=simple><li><a class="reference internal" href=#about-s3 id=toc-entry-1>About S3</a><li><a class="reference internal" href=#installation id=toc-entry-2>Installation</a><li><a class="reference internal" href=#configuration id=toc-entry-3>Configuration</a><li><a class="reference internal" href=#using-s3cmd id=toc-entry-4>Using s3cmd</a><li><a class="reference internal" href=#example id=toc-entry-5>Example</a></ul></div></nav></section><section class=article-content itemprop=articleBody><p>I have several servers powering syslog including it’s <a class="reference external" href=https://rpi.syslog.tv/>Raspberry Pi</a> mirror, load balancer and email servers. All of my servers are hosted using <a class="reference external" href=https://www.linode.com/?r=8d58820f89940a1a68832c0cdd53109727cfa622>Linode</a> in their London data centre and have Linode’s back-up system doing both daily and weekly snapshots.<p>For the app and database servers I do server-side backups storing each website and it’s database in it’s own folder within /backup in case I require a quick back-up to fix something, rather than the server has died.<p>This is all well and good but I like having an off-site backup too and for that I use <a class="reference external" href=https://aws.amazon.com/s3/>S3</a>…<div class=section id=about-s3><h2>About S3</h2><p>Amazon’s S3 is pretty cheap and very easy to use. Because only data is going in you don’t pay a transfer fee and the cost of storage is very affordable, you can see a <a class="reference external" href=https://aws.amazon.com/s3/#pricing>pricing list here</a>.<p>To do the backup I use a daily cron job which then uploads the data to S3 using <a class="reference external" href=https://s3tools.org/s3cmd>s3cmd</a>.</div><div class=section id=installation><h2>Installation</h2><p>Download the S3 tools package list in to apt<div class=highlight><pre><span></span>sudo<span class=w> </span>wget<span class=w> </span>-O-<span class=w> </span>-q<span class=w> </span>https://s3tools.org/repo/deb-all/stable/s3tools.key<span class=w> </span><span class=p>|</span><span class=w> </span>sudo<span class=w> </span>apt-key<span class=w> </span>add<span class=w> </span>-
sudo<span class=w> </span>wget<span class=w> </span>https://s3tools.org/repo/deb-all/stable/s3tools.list<span class=w> </span>-O<span class=w> </span>/etc/apt/sources.list.d/s3tools.list
</pre></div><p>Update your package list and install s3cmd<div class=highlight><pre><span></span>sudo<span class=w> </span>apt-get<span class=w> </span>update<span class=w> </span><span class=o>&&</span><span class=w> </span>apt-get<span class=w> </span>install<span class=w> </span>s3cmd
</pre></div></div><div class=section id=configuration><h2>Configuration</h2><p>You’ll need to configure the tool to work with your <span class=caps>AWS</span> account, so run<div class=highlight><pre><span></span>sudo<span class=w> </span>s3cmd<span class=w> </span>--configure
</pre></div><p>When prompted, fill in your access and secret key which you can find <a class="reference external" href=https://aws-portal.amazon.com/gp/aws/securityCredentials>on the Amazone website</a>.<p>When asked to provide an encryption password, I choose yes but you can say no.<p>When asking if you want to use <span class=caps>HTTPS</span>, I choose yes but again, you can say no, it really depends on how secure you want the data transfer.<p>I would suggest using an encryption password and enabling <span class=caps>HTTPS</span>.</div><div class=section id=using-s3cmd><h2>Using s3cmd</h2><p>Now that s3cmd is installed and configured you can use it.<p>You can create a bucket using the s3cmd command below, but as far as I know you can’t select a location so I create my buckets manually <a class="reference external" href=https://console.aws.amazon.com/s3/home>on the web interface</a>.<div class=highlight><pre><span></span>s3cmd<span class=w> </span>mb<span class=w> </span>s3://your-bucket-name
</pre></div><p>Once done you can see a list of available buckets with<div class=highlight><pre><span></span>s3cmd<span class=w> </span>ls
</pre></div><p>As shown below<div class=highlight><pre><span></span>s3cmd<span class=w> </span>ls

<span class=m>2012</span>-02-29<span class=w> </span><span class=m>20</span>:28<span class=w> </span>s3://kura-linode-test
</pre></div><p>Now that this is done we can put some data in there, create a test file<div class=highlight><pre><span></span><span class=nb>echo</span><span class=w> </span><span class=s2>"this is a test"</span><span class=w> </span>><span class=w> </span>test.file
</pre></div><p>And put it in S3<div class=highlight><pre><span></span>s3cmd<span class=w> </span>put<span class=w> </span>test.file<span class=w> </span>s3://your-bucket-name/
</pre></div><p>You can see it using<div class=highlight><pre><span></span>s3cmd<span class=w> </span>ls<span class=w> </span>s3://your-bucket-name
</pre></div><p>Download it with<div class=highlight><pre><span></span>s3cmd<span class=w> </span>get<span class=w> </span>s3://your-bucket-name/test.file
</pre></div><p>And delete it with<div class=highlight><pre><span></span>s3cmd<span class=w> </span>del<span class=w> </span>s3://your-bucket-name/test.file
</pre></div><p>Once satisfied with this you can create a shell script to automate some backups for you, I’ll provide a simple one below that uploads my home directory.</div><div class=section id=example><h2>Example</h2><div class=highlight><pre><span></span><span class=ch>#!/bin/sh</span>
s3cmd<span class=w> </span>sync<span class=w> </span>--recursive<span class=w> </span>--skip-existing<span class=w> </span>/home/kura
s3://kura-linode-test/
</pre></div></div></section></div><div class=eevee-related><section><h2>Related articles</h2><ul><li><a title="Permalink to 'Mount Amazon S3 bucket locally on Debian 5 & 6/Ubuntu 10.04'" href=https://kura.gg/2012/03/03/mount-amazon-s3-bucket-locally/ itemprop=url rel=bookmark> Mount Amazon S3 bucket locally on Debian 5 <span class=amp>&</span> 6/Ubuntu 10.04 </a><li><a title="Permalink to 'haproxy1.5-dev22kura1'" href=https://kura.gg/2014/03/06/haproxy1.5-dev22kura1/ itemprop=url rel=bookmark> haproxy1.5-dev22kura1 </a><li><a title="Permalink to 'vagrant-bash-completion & go-bash-completion on apt.kura.gg'" href=https://kura.gg/2014/02/27/vagrant-bash-completion-and-go-bash-completion-on-apt.kura.gg/ itemprop=url rel=bookmark> vagrant-bash-completion <span class=amp>&</span> go-bash-completion on apt.kura.gg </a><li><a title="Permalink to 'haproxy1.5-dev22'" href=https://kura.gg/2014/02/22/haproxy1.5-dev22/ itemprop=url rel=bookmark> haproxy1.5-dev22 </a><li><a title="Permalink to 'nginx 1.5.10 with SPDY 3.1'" href=https://kura.gg/2014/02/06/nnginx-1.5.10-with-spdy3.1/ itemprop=url rel=bookmark> nginx 1.5.10 with <span class=caps>SPDY</span> 3.1 </a></ul></section></div><div class=eevee-ac><header class=eevee-ac__header><div class=eevee-ac-author__text><h2>Kura</h2><p>Anarchist. Pessimist. Bipolar. Hacker. Hyperpolyglot. Musician. Ex-(semi-)pro gamer. They/Them.<p><a title="Read more articles by Kura" href=https://kura.gg/authors/kura/ itemprop=url> Read more articles by Kura </a><nav><ul class=eevee-ac-author__social><li class=eevee-ac-author-social__link><a class="mdl-color-text--accent mdl-navigation__link" title="kura on GitHub" href=https://github.com/kura itemprop=url rel=bookmark> <i aria-hidden=true class=fa></i> </a><li class=eevee-ac-author-social__link><a class="mdl-color-text--accent mdl-navigation__link" title="kura on @kura@noc.social" href=https://noc.social/@kura itemprop=url rel=bookmark> <i aria-hidden=true class=fa>🦣</i> </a></ul></nav></div><img alt=Kura class=eevee-ac-author__avatar src=/images/avatar.png></header></div></article><a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--raised mdl-color--accent mdl-color-text--white" title="View 'Backup a Linux server to Amazon S3 on Debian 6/Ubuntu 10.04' on GitHub" href=https://github.com/kura/kura.gg/blob/main/content/backup-a-linux-server-to-amazon-s3-on-debian-6ubuntu-10-04.rst id=view-source> <i class=material-icons></i> View Source </a></div></div></main><div class="eevee-pagination__container eevee-container mdl-grid"><div class="mdl-cell mdl-cell--2-col mdl-cell--hide-tablet mdl-cell--hide-phone" role=presentation></div><div class="mdl-color-text--grey-800 mdl-cell mdl-cell--8-col"><nav class="eevee-pagination mdl-cell mdl-cell--12-col" aria-label=Pagination itemscope itemtype=http://schema.org/SiteNavigationElement><a class=eevee-nav__button href=https://kura.gg/2012/03/02/visualised-24-hours-of-ssh-attacks-against-a-single-server/ itemprop=url rel=bookmark title=Newer> <button class="mdl-button mdl-button--icon mdl-color--white mdl-color-text--grey-900" role=presentation><i class=material-icons></i></button> Newer </a><div class=eevee-spacer></div><a class=eevee-nav__button href=https://kura.gg/2012/01/28/automaticunattended-updates-on-debian-6-squeeze/ itemprop=url rel=bookmark title=Older> Older <button class="mdl-button mdl-button--icon mdl-color--white mdl-color-text--grey-900" role=presentation><i class=material-icons></i></button> </a></nav></div></div><footer class=mdl-mega-footer itemscope itemtype=http://schema.org/SiteNavigationElement><div class=mdl-mega-footer--top-section><div class=mdl-mega-footer--drop-down-section><ul class=mdl-mega-footer--link-list><li><a title="Back to the top of the page" href=#top itemprop=url> Back to the top of the page </a></ul></div></div><div aria-label="Footer navigation" class=mdl-mega-footer--middle-section itemscope itemtype=http://schema.org/SiteNavigationElement><div class=mdl-mega-footer--drop-down-section><h1 class=mdl-mega-footer--heading>Menu</h1><ul class=mdl-mega-footer--link-list><li><a href=/contact/ itemprop=url rel=bookmark title=Contact> <i aria-hidden=true class=material-icons></i> Contact </a><li><a href=https://kura.gg/archives/ itemprop=url rel=bookmark title=Archives> <i class=material-icons></i> Archives </a><li><a href=https://kura.gg/feeds/rss.xml itemprop=url title=RSS> <i class=material-icons></i> RSS </a><li><a href=https://kura.gg/feeds/atom.xml itemprop=url title=Atom> <i class=material-icons></i> Atom </a></ul></div><div class=mdl-mega-footer--drop-down-section><h1 class=mdl-mega-footer--heading>Social</h1><ul class=mdl-mega-footer--link-list><li><a href=https://github.com/kura itemprop=url rel=bookmark title=GitHub> <i aria-hidden=true class=fa></i> Github </a><li><a href=https://noc.social/@kura itemprop=url rel=me title=@kura@noc.social> <i aria-hidden=true class=fa>🦣</i> @kura@noc.social </a></ul></div><div class=mdl-mega-footer--drop-down-section><h1 class=mdl-mega-footer--heading>Links</h1><ul class=mdl-mega-footer--link-list><li><a href=/blackhole itemprop=url rel=bookmark title=Blackhole> <i aria-hidden=true class=material-icons></i> Blackhole </a><li><a href=/eevee itemprop=url rel=bookmark title=Eevee> <i aria-hidden=true class=material-icons></i> Eevee </a><li><a href=/hauntr itemprop=url rel=bookmark title=Hauntr> <i aria-hidden=true class=material-icons></i> Hauntr </a><li><a href=/ghastly itemprop=url rel=bookmark title=Ghastly> <i aria-hidden=true class=material-icons></i> Ghastly </a><li><a title="Pelican Plugins" href=/pelican-plugins itemprop=url rel=bookmark> <i aria-hidden=true class=material-icons></i> Pelican Plugins </a></ul></div></div><div class=mdl-mega-footer--bottom-section><div class=mdl-logo><a href=https://kura.gg itemprop=url rel=bookmark title=kura.gg> kura.gg </a></div><ul class="eevee-footer mdl-mega-footer--link-list"><li>Powered by love & rainbow sparkles.<li>Source code and content released under the <a title="MIT license" href=/license/>MIT license</a>.</ul></div></footer></div>